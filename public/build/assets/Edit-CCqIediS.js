import{j as e}from"./ui-ZHFf5B17.js";import{a as se,b as te,c as ae}from"./dialog-BLwxprq_.js";import{X as B,G as ne}from"./app-BBiA4mAE.js";import{r as x}from"./vendor-CcMVubkO.js";import{B as J}from"./button-DYC7yMVq.js";import{L as l}from"./label-DbqhUtKI.js";import{I as o}from"./input-error-DuIbBMgZ.js";import{I as h}from"./input-DqOfVTcn.js";import{C as K}from"./currency-input-BZrT8lhz.js";import{R as g}from"./rich-text-editor-59agrfWF.js";import{C as p}from"./checkbox-Cvtgzug2.js";import{S as _,a as j,b as y,c as v,d as m}from"./select-BEhl2QER.js";import{T as le}from"./tags-input-C6Ka5-VZ.js";import{D as ce}from"./date-picker-CVthJV3y.js";import{u as f}from"./useFormFields-BwNmEYJY.js";import{u as oe}from"./useTranslation-CV4_gBnb.js";import"./utils-DrcJ8Itn.js";import"./utils-B-dksMZM.js";import"./x-DVK_F_Gh.js";import"./createLucideIcon-Dov4NOxw.js";/* empty css            */import"./index-BMyiKApA.js";import"./helpers-QYnGjXad.js";import"./index-DaFL_H0m.js";import"./with-selector-CP8JaRn2.js";import"./undo-D3tFEvb3.js";import"./list-BVwWsOhE.js";import"./link-2Bt5o4zZ.js";import"./index-BYFX2qNQ.js";import"./check-DUlQPeVG.js";import"./index-BdQq_4o_.js";import"./index-BZAHB8Ku.js";import"./chevron-down-Zr-tNTku.js";import"./search-Chs14P_a.js";import"./badge-CV60sqBJ.js";import"./react-datepicker-BHcKmBHW.js";import"./popover-fYI5j510.js";import"./calendar-DvmJ2XsD.js";import"./tooltip-C7wT1CW2.js";import"./textarea-DxQ_BnuT.js";import"./radio-group-Bg6nc_Xb.js";import"./circle-bmoNtd-e.js";import"./slider-CIevYFX0.js";import"./sparkles-yKnt-shd.js";import"./switch-ByWYyd_6.js";import"./index-Chjiymov.js";import"./index-8JwjhRSi.js";function si({jobposting:a,onSuccess:C}){var k,E,T,w,D,R,I,L,P;const{jobtypes:q,joblocations:N,customquestions:u,branches:S}=B().props,{t:s}=oe(),[M,b]=x.useState(""),{data:r,setData:t,put:U,processing:F,errors:c}=ne({title:a.title??"",position:a.position??"",priority:((k=a.priority)==null?void 0:k.toString())??"0",job_application:a.job_application??"existing",application_url:a.application_url??"",branch_id:((E=a.branch_id)==null?void 0:E.toString())??"",applicant:(()=>{try{if(a.applicant){const i=JSON.parse(a.applicant);if(i&&typeof i=="object"&&!Array.isArray(i)){const n=[];return i.gender&&n.push("gender"),i.date_of_birth&&n.push("date_of_birth"),i.country&&n.push("country"),n}return Array.isArray(i)?i:[]}return[]}catch{return[]}})(),visibility:(()=>{try{if(a.visibility){const i=JSON.parse(a.visibility);if(i&&typeof i=="object"&&!Array.isArray(i)){const n=[];return i.profile_image&&n.push("profile_image"),i.resume&&n.push("resume"),i.cover_letter&&n.push("cover_letter"),n}return Array.isArray(i)?i:[]}return[]}catch{return[]}})(),min_experience:a.min_experience??"",max_experience:a.max_experience??"",min_salary:a.min_salary??"",max_salary:a.max_salary??"",description:a.description??"",requirements:a.requirements??"",benefits:a.benefits??"",terms_condition:a.terms_condition??"",show_terms_condition:a.show_terms_condition??!1,application_deadline:a.application_deadline??"",is_published:a.is_published??!1,publish_date:a.publish_date??"",is_featured:a.is_featured??!1,status:((T=a.status)==null?void 0:T.toString())??"0",job_type_id:a.job_type_id?a.job_type_id.toString():"",location_id:a.location_id?a.location_id.toString():"",custom_questions:(()=>{try{return a.custom_questions?JSON.parse(a.custom_questions):[]}catch{return[]}})(),skills:a.skills?a.skills.split(",").map(i=>i.trim()).filter(i=>i):[]}),O=f("aiField",r,t,c,"edit","title","Title","recruitment","job_posting"),[V,$]=x.useState(0),Q=f("aiField",r,(i,n)=>{t("description",n),$(d=>d+1)},c,"edit","description","Description","recruitment","job_posting"),[G,H]=x.useState(0),Y=f("aiField",r,(i,n)=>{t("requirements",n),H(d=>d+1)},c,"edit","requirements","Requirements","recruitment","job_posting"),[X,z]=x.useState(0),W=f("aiField",r,(i,n)=>{t("benefits",n),z(d=>d+1)},c,"edit","benefits","Benefits","recruitment","job_posting"),[Z,ee]=x.useState(0),ie=f("aiField",r,(i,n)=>{t("terms_condition",n),ee(d=>d+1)},c,"edit","terms_condition","Terms Condition","recruitment","job_posting"),re=i=>{if(i.preventDefault(),((u==null?void 0:u.filter(A=>A.is_required))||[]).filter(A=>!r.custom_questions.includes(A.id)).length>0){b(s("Please select all required custom questions"));return}b(""),U(route("recruitment.job-postings.update",a.id),{onSuccess:()=>{C()}})};return e.jsxs(se,{className:"max-w-4xl",children:[e.jsx(te,{children:e.jsx(ae,{children:s("Edit Job Posting")})}),e.jsxs("form",{onSubmit:re,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex gap-2 items-end",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(l,{htmlFor:"title",children:s("Title")}),e.jsx(h,{id:"title",type:"text",value:r.title,onChange:i=>t("title",i.target.value),placeholder:s("Enter Title"),required:!0}),e.jsx(o,{message:c.title})]}),O.map(i=>e.jsx("div",{children:i.component},i.id))]})}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"job_type_id",required:!0,children:s("Job Type")}),e.jsxs(_,{value:((w=r.job_type_id)==null?void 0:w.toString())||"",onValueChange:i=>t("job_type_id",i),required:!0,children:[e.jsx(j,{children:e.jsx(y,{placeholder:s("Select Job Type")})}),e.jsx(v,{children:Array.isArray(q)?q.map(i=>e.jsx(m,{value:i.id.toString(),children:i.name},i.id)):[]})]}),e.jsx(o,{message:c.job_type_id})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"location_id",required:!0,children:s("Location")}),e.jsxs(_,{value:((D=r.location_id)==null?void 0:D.toString())||"",onValueChange:i=>t("location_id",i),required:!0,children:[e.jsx(j,{children:e.jsx(y,{placeholder:s("Select Location")})}),e.jsx(v,{children:Array.isArray(N)?N.map(i=>e.jsx(m,{value:i.id.toString(),children:i.name},i.id)):[]})]}),e.jsx(o,{message:c.location_id})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"branch_id",required:!0,children:s("Branch")}),e.jsxs(_,{value:((R=r.branch_id)==null?void 0:R.toString())||"",onValueChange:i=>t("branch_id",i),required:!0,children:[e.jsx(j,{children:e.jsx(y,{placeholder:s("Select Branch")})}),e.jsx(v,{children:Array.isArray(S)?S.map(i=>e.jsx(m,{value:i.id.toString(),children:i.branch_name},i.id)):[]})]}),e.jsx(o,{message:c.branch_id})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"job_application",required:!0,children:s("Job Application")}),e.jsxs(_,{value:r.job_application||"",onValueChange:i=>t("job_application",i),required:!0,children:[e.jsx(j,{children:e.jsx(y,{placeholder:s("Select Application Type")})}),e.jsxs(v,{children:[e.jsx(m,{value:"existing",children:s("Use Existing System")}),e.jsx(m,{value:"custom",children:s("Custom Application URL")})]})]}),e.jsx(o,{message:c.job_application})]}),r.job_application==="existing"?e.jsxs("div",{children:[e.jsx(l,{children:s("Career Portal URL")}),e.jsx(h,{value:route("recruitment.frontend.careers.jobs.index",{userSlug:((L=(I=B().props.auth)==null?void 0:I.user)==null?void 0:L.slug)||"demo"}),readOnly:!0,className:"bg-gray-50"})]}):r.job_application==="custom"?e.jsxs("div",{children:[e.jsx(l,{htmlFor:"application_url",required:!0,children:s("Application URL")}),e.jsx(h,{id:"application_url",type:"url",value:r.application_url,onChange:i=>t("application_url",i.target.value),placeholder:s("Enter Application URL"),required:!0}),e.jsx(o,{message:c.application_url})]}):e.jsx("div",{}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"position",required:!0,children:s("Number of Positions")}),e.jsx(h,{id:"position",type:"number",min:"1",value:r.position,onChange:i=>t("position",i.target.value),placeholder:s("Enter Number of Positions"),required:!0}),e.jsx(o,{message:c.position})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"priority",required:!0,children:s("Priority")}),e.jsxs(_,{value:((P=r.priority)==null?void 0:P.toString())||"",onValueChange:i=>t("priority",i),required:!0,children:[e.jsx(j,{children:e.jsx(y,{placeholder:s("Select Priority")})}),e.jsxs(v,{children:[e.jsx(m,{value:"0",children:s("Low")}),e.jsx(m,{value:"1",children:s("Medium")}),e.jsx(m,{value:"2",children:s("High")})]})]}),e.jsx(o,{message:c.priority})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"min_experience",required:!0,children:s("Min Experience (Years)")}),e.jsx(h,{id:"min_experience",type:"number",step:"0.5",min:"0",value:r.min_experience,onChange:i=>t("min_experience",i.target.value),placeholder:s("Enter Minimum Experience"),required:!0}),e.jsx(o,{message:c.min_experience})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"max_experience",children:s("Max Experience (Years)")}),e.jsx(h,{id:"max_experience",type:"number",step:"0.5",min:"0",value:r.max_experience,onChange:i=>t("max_experience",i.target.value),placeholder:s("Enter Maximum Experience")}),e.jsx(o,{message:c.max_experience})]}),e.jsx("div",{children:e.jsx(K,{label:s("Min Salary"),value:r.min_salary,onChange:i=>t("min_salary",i),error:c.min_salary})}),e.jsx("div",{children:e.jsx(K,{label:s("Max Salary"),value:r.max_salary,onChange:i=>t("max_salary",i),error:c.max_salary})}),e.jsxs("div",{children:[e.jsx(l,{required:!0,children:s("Application Deadline")}),e.jsx(ce,{value:r.application_deadline,onChange:i=>t("application_deadline",i),placeholder:s("Select Application Deadline"),minDate:new Date(Date.now()+24*60*60*1e3),required:!0}),e.jsx(o,{message:c.application_deadline})]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-2",children:[e.jsx(p,{id:"is_featured",checked:r.is_featured||!1,onCheckedChange:i=>t("is_featured",!!i)}),e.jsx(l,{htmlFor:"is_featured",className:"cursor-pointer",children:s("Featured Job")}),e.jsx(o,{message:c.is_featured})]})]}),e.jsxs("div",{children:[e.jsx(l,{children:s("Need to Ask?")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(p,{id:"applicant_gender",checked:Array.isArray(r.applicant)&&r.applicant.includes("gender"),onCheckedChange:i=>{i?t("applicant",Array.isArray(r.applicant)?[...r.applicant,"gender"]:["gender"]):t("applicant",Array.isArray(r.applicant)?r.applicant.filter(n=>n!=="gender"):[])}}),e.jsx(l,{htmlFor:"applicant_gender",className:"cursor-pointer",children:s("Gender")})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(p,{id:"applicant_date_of_birth",checked:Array.isArray(r.applicant)&&r.applicant.includes("date_of_birth"),onCheckedChange:i=>{i?t("applicant",Array.isArray(r.applicant)?[...r.applicant,"date_of_birth"]:["date_of_birth"]):t("applicant",Array.isArray(r.applicant)?r.applicant.filter(n=>n!=="date_of_birth"):[])}}),e.jsx(l,{htmlFor:"applicant_date_of_birth",className:"cursor-pointer",children:s("Date Of Birth")})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(p,{id:"applicant_country",checked:Array.isArray(r.applicant)&&r.applicant.includes("country"),onCheckedChange:i=>{i?t("applicant",Array.isArray(r.applicant)?[...r.applicant,"country"]:["country"]):t("applicant",Array.isArray(r.applicant)?r.applicant.filter(n=>n!=="country"):[])}}),e.jsx(l,{htmlFor:"applicant_country",className:"cursor-pointer",children:s("Country")})]})]})]}),e.jsxs("div",{children:[e.jsx(l,{children:s("Need to show Option?")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(p,{id:"visibility_profile_image",checked:Array.isArray(r.visibility)&&r.visibility.includes("profile_image"),onCheckedChange:i=>{i?t("visibility",Array.isArray(r.visibility)?[...r.visibility,"profile_image"]:["profile_image"]):t("visibility",Array.isArray(r.visibility)?r.visibility.filter(n=>n!=="profile_image"):[])}}),e.jsx(l,{htmlFor:"visibility_profile_image",className:"cursor-pointer",children:s("Profile Image")})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(p,{id:"visibility_resume",checked:Array.isArray(r.visibility)&&r.visibility.includes("resume"),onCheckedChange:i=>{i?t("visibility",Array.isArray(r.visibility)?[...r.visibility,"resume"]:["resume"]):t("visibility",Array.isArray(r.visibility)?r.visibility.filter(n=>n!=="resume"):[])}}),e.jsx(l,{htmlFor:"visibility_resume",className:"cursor-pointer",children:s("Resume")})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(p,{id:"visibility_cover_letter",checked:Array.isArray(r.visibility)&&r.visibility.includes("cover_letter"),onCheckedChange:i=>{i?t("visibility",Array.isArray(r.visibility)?[...r.visibility,"cover_letter"]:["cover_letter"]):t("visibility",Array.isArray(r.visibility)?r.visibility.filter(n=>n!=="cover_letter"):[])}}),e.jsx(l,{htmlFor:"visibility_cover_letter",className:"cursor-pointer",children:s("Cover Letter")})]})]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"skills",required:!0,children:s("Required Skills")}),e.jsx(le,{value:r.skills,onChange:i=>t("skills",i),placeholder:s("Add skills and press Enter..."),allowCustom:!0,required:!0}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:s("Type Required Skills and press Enter")}),e.jsx(o,{message:c.skills})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(l,{htmlFor:"description",children:s("Description")}),e.jsx("div",{className:"flex gap-2",children:Q.map(i=>e.jsx("div",{children:i.component},i.id))})]}),e.jsx(g,{content:r.description,onChange:i=>t("description",i),placeholder:s("Enter Description")},`description-editor-${V}`),e.jsx(o,{message:c.description})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(l,{htmlFor:"requirements",children:s("Requirements")}),e.jsx("div",{className:"flex gap-2",children:Y.map(i=>e.jsx("div",{children:i.component},i.id))})]}),e.jsx(g,{content:r.requirements,onChange:i=>t("requirements",i),placeholder:s("Enter Requirements")},`requirements-editor-${G}`),e.jsx(o,{message:c.requirements})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(l,{htmlFor:"benefits",children:s("Benefits")}),e.jsx("div",{className:"flex gap-2",children:W.map(i=>e.jsx("div",{children:i.component},i.id))})]}),e.jsx(g,{content:r.benefits,onChange:i=>t("benefits",i),placeholder:s("Enter Benefits")},`benefits-editor-${X}`),e.jsx(o,{message:c.benefits})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(l,{htmlFor:"terms_condition",required:!0,children:s("Terms Condition")}),e.jsx("div",{className:"flex gap-2",children:ie.map(i=>e.jsx("div",{children:i.component},i.id))})]}),e.jsx(g,{content:r.terms_condition,onChange:i=>t("terms_condition",i),placeholder:s("Enter Terms Condition")},`terms-editor-${Z}`),e.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[e.jsx(p,{id:"show_terms_condition",checked:r.show_terms_condition||!1,onCheckedChange:i=>t("show_terms_condition",!!i)}),e.jsx(l,{htmlFor:"show_terms_condition",className:"cursor-pointer",children:s("Show Terms & Conditions on Application Form")})]}),e.jsx(o,{message:c.terms_condition})]}),e.jsxs("div",{children:[e.jsx(l,{children:s("Application Questions")}),e.jsx("div",{className:"space-y-2 mt-2",children:u==null?void 0:u.map(i=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(p,{id:`question_${i.id}`,checked:r.custom_questions.includes(i.id),onCheckedChange:n=>{n?t("custom_questions",[...r.custom_questions,i.id]):t("custom_questions",r.custom_questions.filter(d=>d!==i.id)),b("")}}),e.jsxs(l,{htmlFor:`question_${i.id}`,className:"cursor-pointer",children:[i.question,i.is_required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]})]},i.id))}),e.jsx(o,{message:c.custom_questions||M})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(J,{type:"button",variant:"outline",onClick:C,children:s("Cancel")}),e.jsx(J,{type:"submit",disabled:F,children:s(F?"Updating...":"Update")})]})]})]})}export{si as default};
