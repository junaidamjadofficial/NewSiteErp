import{j as s}from"./ui-ZHFf5B17.js";import{r as h}from"./vendor-CcMVubkO.js";import{B as C}from"./button-DYC7yMVq.js";import{C as E,a as T,b as w,c as k}from"./card-DHszHnbI.js";import{S as y}from"./switch-ByWYyd_6.js";import{T as A,a as L,b as P,c as M}from"./tabs-BdIH_p7Q.js";import{X as O,A as z}from"./app-BBiA4mAE.js";import{b as B,g as F}from"./helpers-QYnGjXad.js";import{u as H}from"./useTranslation-CV4_gBnb.js";import{M as I}from"./mail-XtzF_PXw.js";import{S as R}from"./save-B89BgUdM.js";import"./index-BMyiKApA.js";import"./utils-B-dksMZM.js";import"./utils-DrcJ8Itn.js";import"./index-BYFX2qNQ.js";/* empty css            */import"./createLucideIcon-Dov4NOxw.js";function rs({userSettings:V,canEdit:j=!1,isSuperAdmin:X=!1}){var f,u,x;const{t:c}=H(),l=O().props,{notifications:n,auth:i}=l,N=((f=i==null?void 0:i.user)==null?void 0:f.activatedPackages)||[],[m,d]=h.useState(!1),g=j||((x=(u=i==null?void 0:i.user)==null?void 0:u.permissions)==null?void 0:x.includes("manage-email-notification-settings")),[p,S]=h.useState(()=>{const t={};return Object.values(n||{}).forEach(e=>{e.forEach(a=>{t[a.action]=B(a.action,l)||"off"})}),t}),b=(t,e)=>{S(a=>({...a,[t]:e?"on":"off"}))},v=()=>{d(!0);const t={};Object.values(n||{}).forEach(e=>{e.forEach(a=>{var r,o;(o=(r=i.user)==null?void 0:r.permissions)!=null&&o.includes(a.permissions)&&(t[a.action]=p[a.action])})}),z.post(route("email.notification.setting.store"),{mail_noti:t},{onSuccess:()=>{},onError:()=>{},onFinish:()=>d(!1)})};return s.jsxs(E,{children:[s.jsxs(T,{className:"flex flex-row items-center justify-between",children:[s.jsx("div",{className:"order-1 rtl:order-2",children:s.jsxs(w,{className:"flex items-center gap-2 text-lg",children:[s.jsx(I,{className:"h-5 w-5"}),c("Email Notification Settings")]})}),g&&s.jsxs(C,{className:"order-2 rtl:order-1",onClick:v,disabled:m,size:"sm",children:[s.jsx(R,{className:"h-4 w-4 mr-2"}),c(m?"Saving...":"Save Changes")]})]}),s.jsx(k,{className:"space-y-6",children:(()=>{const t=Object.keys(n||{}).filter(e=>e.toLowerCase()==="general"||N.includes(e));return t.length>0?s.jsxs(A,{defaultValue:t[0],children:[s.jsx(L,{className:"flex-wrap h-auto",children:t.map(e=>s.jsx(P,{value:e,className:"capitalize",children:F(e)},e))}),t.map(e=>s.jsx(M,{value:e,children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:(n[e]||[]).filter(a=>{var r,o;return(o=(r=i.user)==null?void 0:r.permissions)==null?void 0:o.includes(a.permissions)}).map(a=>s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[s.jsx("span",{className:"font-medium text-gray-3900",children:a.action}),s.jsx(y,{checked:p[a.action]==="on",onCheckedChange:r=>b(a.action,r),disabled:!g})]},a.id))})},e))]}):s.jsx("p",{className:"text-muted-foreground",children:"No email notifications configured."})})()})]})}export{rs as default};
