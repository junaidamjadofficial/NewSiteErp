import{j as t}from"./ui-ZHFf5B17.js";import{r as l}from"./vendor-CcMVubkO.js";import{X as R,a as P}from"./app-BBiA4mAE.js";import{B as i}from"./button-DYC7yMVq.js";import{C as T,c as w}from"./card-DHszHnbI.js";import{S as A,a as $,b as z,c as J,d as p}from"./select-BEhl2QER.js";import{D}from"./date-picker-CVthJV3y.js";import{a as B,f as o}from"./helpers-QYnGjXad.js";import{N as L}from"./no-records-found-C2RGIdAh.js";import{u as U}from"./useTranslation-CV4_gBnb.js";import{P as V}from"./printer-BDwaclJ1.js";import{C as G}from"./chevron-down-Zr-tNTku.js";import{C as I}from"./chevron-right-BtPraxo3.js";import{F as X}from"./file-text-BmYvzZ5U.js";/* empty css            */import"./index-BMyiKApA.js";import"./utils-B-dksMZM.js";import"./utils-DrcJ8Itn.js";import"./index-BdQq_4o_.js";import"./index-BYFX2qNQ.js";import"./index-BZAHB8Ku.js";import"./input-DqOfVTcn.js";import"./search-Chs14P_a.js";import"./createLucideIcon-Dov4NOxw.js";import"./check-DUlQPeVG.js";import"./react-datepicker-BHcKmBHW.js";import"./popover-fYI5j510.js";import"./calendar-DvmJ2XsD.js";import"./plus-C1hmRCnY.js";function bt({financialYear:a}){var b,f;const{t:e}=U(),{auth:S}=R().props,[d,h]=l.useState((a==null?void 0:a.year_start_date)||""),[c,j]=l.useState((a==null?void 0:a.year_end_date)||""),[x,u]=l.useState(""),[m,C]=l.useState([]),[n,v]=l.useState(new Set),[N,g]=l.useState(!1),y=async()=>{g(!0);try{const s=await P.get(route("double-entry.reports.journal-entry"),{params:{from_date:d,to_date:c,status:x}});C(s.data)}catch(s){console.error("Error fetching journal entries:",s)}finally{g(!1)}};l.useEffect(()=>{y()},[]);const _=s=>{const r=new Set(n);r.has(s)?r.delete(s):r.add(s),v(r)},k=()=>{const s=route("double-entry.reports.journal-entry.print")+`?from_date=${d}&to_date=${c}&status=${x}&download=pdf`;window.open(s,"_blank")},F=()=>{h((a==null?void 0:a.year_start_date)||""),j((a==null?void 0:a.year_end_date)||""),u("")};return t.jsxs(T,{className:"shadow-sm",children:[t.jsx(w,{className:"p-6 border-b bg-gray-50/50",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e("From Date")}),t.jsx(D,{value:d,onChange:h,placeholder:e("Select from date")})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e("To Date")}),t.jsx(D,{value:c,onChange:j,placeholder:e("Select to date")})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e("Status")}),t.jsxs(A,{value:x,onValueChange:u,children:[t.jsx($,{children:t.jsx(z,{placeholder:e("All Status")})}),t.jsxs(J,{children:[t.jsx(p,{value:" ",children:e("All Status")}),t.jsx(p,{value:"posted",children:e("Posted")}),t.jsx(p,{value:"draft",children:e("Draft")})]})]})]}),t.jsxs("div",{className:"flex items-end gap-2",children:[t.jsx(i,{onClick:y,disabled:N,size:"sm",children:e(N?"Loading...":"Generate")}),t.jsx(i,{variant:"outline",onClick:F,size:"sm",children:e("Clear")}),m.length>0&&((f=(b=S.user)==null?void 0:b.permissions)==null?void 0:f.includes("print-journal-entry"))&&t.jsxs(i,{variant:"outline",size:"sm",onClick:k,className:"gap-2",children:[t.jsx(V,{className:"h-4 w-4"}),e("Download PDF")]})]})]})}),t.jsx(w,{className:"p-0",children:m.length>0?t.jsx("div",{className:"overflow-y-auto scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-100 max-h-[60vh] w-full",children:t.jsx("div",{className:"min-w-[900px]",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-100 sticky top-0",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold w-12"}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:e("Journal #")}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:e("Date")}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:e("Reference")}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:e("Description")}),t.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold",children:e("Total Debit")}),t.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold",children:e("Total Credit")}),t.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:e("Status")})]})}),t.jsx("tbody",{children:m.map(s=>t.jsxs(t.Fragment,{children:[t.jsxs("tr",{className:"border-t hover:bg-gray-50 cursor-pointer",onClick:()=>_(s.id),children:[t.jsx("td",{className:"px-4 py-3 text-sm",children:n.has(s.id)?t.jsx(G,{className:"h-4 w-4"}):t.jsx(I,{className:"h-4 w-4"})}),t.jsx("td",{className:"px-4 py-3 text-sm font-medium",children:s.journal_number}),t.jsx("td",{className:"px-4 py-3 text-sm",children:B(s.date)}),t.jsx("td",{className:"px-4 py-3 text-sm",children:s.reference_type}),t.jsx("td",{className:"px-4 py-3 text-sm",children:s.description}),t.jsx("td",{className:"px-4 py-3 text-sm text-right",children:o(s.total_debit)}),t.jsx("td",{className:"px-4 py-3 text-sm text-right",children:o(s.total_credit)}),t.jsxs("td",{className:"px-4 py-3 text-sm text-center",children:[t.jsx("span",{className:`px-2 py-1 rounded-full text-sm ${s.status==="posted"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:e(s.status==="posted"?"Posted":"Draft")}),!s.is_balanced&&t.jsx("span",{className:"px-2 py-1 rounded-full text-sm bg-red-100 text-red-800 ml-2",children:e("Unbalanced")})]})]},s.id),n.has(s.id)&&t.jsx("tr",{children:t.jsx("td",{colSpan:8,className:"px-4 py-2 bg-gray-50",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"text-xs text-gray-600",children:[t.jsx("th",{className:"px-4 py-2 text-left",children:e("Account Code")}),t.jsx("th",{className:"px-4 py-2 text-left",children:e("Account Name")}),t.jsx("th",{className:"px-4 py-2 text-left",children:e("Description")}),t.jsx("th",{className:"px-4 py-2 text-right",children:e("Debit")}),t.jsx("th",{className:"px-4 py-2 text-right",children:e("Credit")})]})}),t.jsx("tbody",{children:s.items.map((r,E)=>t.jsxs("tr",{className:"text-sm",children:[t.jsx("td",{className:"px-4 py-2",children:r.account_code}),t.jsx("td",{className:"px-4 py-2",children:r.account_name}),t.jsx("td",{className:"px-4 py-2",children:r.description}),t.jsx("td",{className:"px-4 py-2 text-right",children:r.debit>0?o(r.debit):"-"}),t.jsx("td",{className:"px-4 py-2 text-right",children:r.credit>0?o(r.credit):"-"})]},E))})]})})})]}))})]})})}):t.jsx(L,{icon:X,title:e("Journal Entry Report"),description:e("Select date range to generate the report"),className:"h-auto py-12"})})]})}export{bt as default};
