import{j as r}from"./ui-ZHFf5B17.js";import{r as l}from"./vendor-CcMVubkO.js";import{c as i}from"./utils-DrcJ8Itn.js";import{B as b}from"./button-DYC7yMVq.js";import{I as y}from"./input-DqOfVTcn.js";import{P as C,a as S,b as k}from"./popover-fYI5j510.js";import{B as h}from"./badge-CV60sqBJ.js";import{u as P}from"./useTranslation-CV4_gBnb.js";import{X as B}from"./x-DVK_F_Gh.js";import{C as O}from"./chevron-down-Zr-tNTku.js";import{S as T}from"./search-Chs14P_a.js";import{C as E}from"./check-DUlQPeVG.js";function G({options:a,value:s,onValueChange:m,placeholder:u,searchable:c=!1,className:f}){const{t:o}=P(),[d,v]=l.useState(!1),[n,p]=l.useState(""),x=l.useMemo(()=>!c||!n?a:a.filter(e=>e.label.toLowerCase().includes(n.toLowerCase())),[a,n,c]),g=a.filter(e=>s.includes(e.value)),j=e=>{const t=s.includes(e)?s.filter(w=>w!==e):[...s,e];m(t),p("")},N=e=>{m(s.filter(t=>t!==e))};return r.jsxs(C,{open:d,onOpenChange:v,children:[r.jsx(S,{asChild:!0,children:r.jsxs(b,{variant:"outline",role:"combobox","aria-expanded":d,className:i("w-full justify-between",f),children:[s.length>0?r.jsxs("div",{className:"flex flex-wrap gap-1 pointer-events-none",children:[g.slice(0,2).map(e=>r.jsxs(h,{variant:"secondary",className:"mr-1",children:[e.label,r.jsx("div",{className:"ml-1 h-auto p-0 pointer-events-auto cursor-pointer hover:bg-gray-100 rounded",onClick:t=>{t.preventDefault(),t.stopPropagation(),N(e.value)},children:r.jsx(B,{className:"h-3 w-3"})})]},e.value)),s.length>2&&r.jsxs(h,{variant:"secondary",children:["+",s.length-2," ",o("more")]})]}):r.jsx("span",{className:"text-muted-foreground",children:u||o("Select...")}),r.jsx(O,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),r.jsx(k,{className:"w-[var(--radix-popover-trigger-width)] p-0",children:r.jsxs("div",{className:"flex flex-col",children:[c&&r.jsxs("div",{className:"flex items-center border-b px-3 py-2",children:[r.jsx(T,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),r.jsx(y,{placeholder:o("Search..."),value:n,onChange:e=>p(e.target.value),className:"h-8 border-0 p-0 focus:border-primary"})]}),r.jsx("div",{className:"max-h-[200px] overflow-y-auto",onWheel:e=>{e.currentTarget.scrollTop+=e.deltaY},tabIndex:-1,children:x.length===0?r.jsx("div",{className:"py-6 text-center text-sm text-muted-foreground",children:o("No options found.")}):x.map(e=>{const t=s.includes(e.value);return r.jsxs("div",{className:i("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none hover:bg-accent hover:text-accent-foreground",t&&"bg-accent text-accent-foreground"),onClick:()=>j(e.value),children:[r.jsx(E,{className:i("mr-2 h-4 w-4",t?"opacity-100":"opacity-0")}),e.label]},e.value)})})]})})]})}export{G as M};
