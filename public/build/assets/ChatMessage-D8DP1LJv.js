import{j as e}from"./ui-ZHFf5B17.js";import{r as j}from"./vendor-CcMVubkO.js";import{B as d}from"./button-DYC7yMVq.js";import{T as b,a as v,b as N,c as w}from"./tooltip-C7wT1CW2.js";import{j as x,k as T}from"./helpers-QYnGjXad.js";import{X as $}from"./app-BBiA4mAE.js";import{u as C}from"./useTranslation-CV4_gBnb.js";import{T as P}from"./trash-2-CIuynBL1.js";import{P as _}from"./paperclip-C_mZqrNn.js";import{D as y}from"./download-DpWzK9fg.js";import"./index-BMyiKApA.js";import"./utils-B-dksMZM.js";import"./utils-DrcJ8Itn.js";import"./index-BZAHB8Ku.js";/* empty css            */import"./createLucideIcon-Dov4NOxw.js";const k=t=>t?/\.(jpg|jpeg|png|gif|webp|svg)$/i.test(t):!1;function K({reply:t,isOwnMessage:s,onDelete:i,canDelete:h}){var l;const p=$().props,{imageUrlPrefix:g}=p,{t:n}=C(),[f,m]=j.useState(!1);return e.jsx("div",{className:`flex mb-4 ${s?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[70%] ${s?"order-2":"order-1"}`,children:[e.jsxs("div",{className:`rounded-lg p-3 ${t.is_internal?"bg-orange-100 border-l-4 border-orange-500 text-orange-900":s?"bg-blue-500 text-white":"bg-gray-100 text-gray-900"}`,onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-sm font-medium ${t.is_internal?"text-orange-700":s?"text-blue-100":"text-gray-600"}`,children:(l=t.creator)==null?void 0:l.name}),t.is_internal&&e.jsx("span",{className:"text-xs bg-orange-200 text-orange-800 px-2 py-0.5 rounded-full font-medium",children:n("Internal Note")})]}),f&&h&&i&&e.jsx(b,{children:e.jsxs(v,{children:[e.jsx(N,{asChild:!0,children:e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>i(t.id),className:`h-6 w-6 p-0 ${t.is_internal?"text-orange-600 hover:text-red-600 hover:bg-red-50":s?"text-blue-100 hover:text-white hover:bg-blue-600":"text-gray-400 hover:text-red-600 hover:bg-red-50"}`,children:e.jsx(P,{className:"h-3 w-3"})})}),e.jsx(w,{children:e.jsx("p",{children:n("Delete")})})]})})]}),e.jsx("div",{className:"text-sm whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:t.message}}),(()=>{let a=[];if(typeof t.attachments=="string")try{a=JSON.parse(t.attachments)}catch{a=[t.attachments]}else Array.isArray(t.attachments)&&(a=t.attachments);return a.length>0?e.jsx("div",{className:"mt-2 space-y-1",children:a.map((r,u)=>{const c=k(r);return e.jsxs("div",{className:`flex items-center gap-2 p-2 rounded ${s?"bg-blue-600/20":"bg-gray-200"}`,children:[c?e.jsx("img",{src:x(r),alt:"Preview",className:"w-16 h-16 object-cover rounded"}):e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx(_,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:r})]}),e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>{const o=document.createElement("a");o.href=c?x(r):`${g}/${r}`,o.download=r.split("/").pop()||"file",document.body.appendChild(o),o.click(),document.body.removeChild(o)},className:"h-8 w-8 p-0",children:e.jsx(y,{className:"h-4 w-4"})})]},u)})}):null})()]}),e.jsx("div",{className:`text-xs text-gray-500 mt-1 ${s?"text-right":"text-left"}`,children:T(t.created_at)})]})})}export{K as default};
