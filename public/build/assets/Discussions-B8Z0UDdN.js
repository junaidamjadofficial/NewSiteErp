import{j as e}from"./ui-ZHFf5B17.js";import{r as i}from"./vendor-CcMVubkO.js";import{A as g}from"./app-BBiA4mAE.js";import{B as c}from"./button-DYC7yMVq.js";import{D as h,a as f,b as j,c as b}from"./dialog-BLwxprq_.js";import{L as v}from"./label-DbqhUtKI.js";import{T as N}from"./textarea-DxQ_BnuT.js";import{N as y}from"./no-records-found-C2RGIdAh.js";import{k as D}from"./helpers-QYnGjXad.js";import{u as w}from"./useTranslation-CV4_gBnb.js";import{M as d}from"./message-square-U01x5Y17.js";/* empty css            */import"./index-BMyiKApA.js";import"./utils-B-dksMZM.js";import"./utils-DrcJ8Itn.js";import"./x-DVK_F_Gh.js";import"./createLucideIcon-Dov4NOxw.js";import"./plus-C1hmRCnY.js";function I({deal:t,onRegisterAddHandler:n}){i.useEffect(()=>{n(()=>a(!0))},[n]);const{t:s}=w(),[u,a]=i.useState(!1),[o,m]=i.useState({message:""}),p=r=>{r.preventDefault(),g.post(route("lead.deals.store-discussion",t.id),o,{onSuccess:()=>{m({message:""}),a(!1)}})};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-3 max-h-[75vh] overflow-y-auto",children:t.discussions&&t.discussions.length>0?t.discussions.map((r,x)=>{var l;return e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border-l-4 border-green-400 rounded-r-lg p-5 shadow-sm",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-green-100 p-2 rounded-full",children:e.jsx(d,{className:"h-4 w-4 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:((l=r.creator)==null?void 0:l.name)||"Unknown User"}),e.jsx("p",{className:"text-xs text-gray-500",children:D(r.created_at)})]})]})}),e.jsx("div",{className:"bg-white rounded-lg p-4 border border-gray-100",children:e.jsx("div",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:r.comment})})]},x)}):e.jsx(y,{icon:d,title:s("No Discussions found"),description:s("Get started by adding your first discussion."),onCreateClick:()=>a(!0),createButtonText:s("Add Message"),className:"h-auto"})}),e.jsx(h,{open:u,onOpenChange:a,children:e.jsxs(f,{className:"max-w-md",children:[e.jsx(j,{children:e.jsx(b,{children:s("Add Message")})}),e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(v,{htmlFor:"message",children:s("Message")}),e.jsx(N,{id:"message",value:o.message,onChange:r=>m({...o,message:r.target.value}),placeholder:s("Enter your message"),rows:4,required:!0})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(c,{type:"button",variant:"outline",onClick:()=>a(!1),children:s("Cancel")}),e.jsx(c,{type:"submit",children:s("Save")})]})]})]})})]})}export{I as default};
