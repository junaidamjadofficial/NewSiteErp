import{j as s,f as ne,P as ce,i as oe}from"./ui-ZHFf5B17.js";import{r as d}from"./vendor-CcMVubkO.js";import{B as O}from"./button-DYC7yMVq.js";import{I as L}from"./input-DqOfVTcn.js";import{T as le}from"./textarea-DxQ_BnuT.js";import{S as ie,a as me,b as pe,c as de,d as ue}from"./select-BEhl2QER.js";import{C as Y}from"./checkbox-Cvtgzug2.js";import{S as he}from"./switch-ByWYyd_6.js";import{R as xe,a as ge}from"./radio-group-Bg6nc_Xb.js";import{D as ve}from"./date-picker-CVthJV3y.js";import{D as je}from"./date-range-picker-BtQHvri2.js";import{D as Ne}from"./datetime-range-picker-DZsBmrPb.js";import{c as E}from"./utils-DrcJ8Itn.js";import{P as be,a as ye,b as Ce}from"./popover-fYI5j510.js";import{u as $e}from"./useTranslation-CV4_gBnb.js";import{C as fe}from"./clock-3RA97mBy.js";import{C as ke}from"./currency-input-BZrT8lhz.js";import{P as we}from"./phone-input-d5yugTbF.js";import{R as Se}from"./rich-text-editor-59agrfWF.js";import{S as Te}from"./slider-CIevYFX0.js";import{R as Pe}from"./rating-CvplBioO.js";import{c as Ee}from"./index-BMyiKApA.js";import{M as Re}from"./multi-select-enhanced-C0hF2-Yw.js";import{L as Ie}from"./label-DbqhUtKI.js";import{S as Me}from"./search-input-BmfsW7ME.js";import{T as Ae}from"./tags-input-C6Ka5-VZ.js";import{I as Ve}from"./icon-picker-BWvrvokq.js";import{T as ze,a as J,b as Q,c as X}from"./tooltip-C7wT1CW2.js";import{M as Fe}from"./MediaPicker-CztOgrDm.js";import{T as Oe}from"./trash-2-CIuynBL1.js";import{P as qe}from"./plus-C1hmRCnY.js";function De({value:c,onChange:m,placeholder:p,className:y,id:u,required:w,style:v,disabled:N}){const{t:S}=$e(),[h,C]=d.useState(!1),[f,o]=d.useState(c?c.split(":")[0]:"09"),[A,R]=d.useState(c?c.split(":")[1]:"00"),T=d.useRef(null),P=d.useRef(null);d.useEffect(()=>{if(c){const[n,x]=c.split(":");o(n),R(x)}},[c]),d.useEffect(()=>{h&&setTimeout(()=>{var $,e;const n=($=T.current)==null?void 0:$.querySelector(`[data-value="${f}"]`),x=(e=P.current)==null?void 0:e.querySelector(`[data-value="${A}"]`);n&&T.current&&(T.current.scrollTop=n.offsetTop-80),x&&P.current&&(P.current.scrollTop=x.offsetTop-80)},50)},[h]);const q=n=>{var $;o(n);const x=($=T.current)==null?void 0:$.querySelector(`[data-value="${n}"]`);x&&T.current&&T.current.scrollTo({top:x.offsetTop-80,behavior:"smooth"})},V=n=>{var $;R(n);const x=($=P.current)==null?void 0:$.querySelector(`[data-value="${n}"]`);x&&P.current&&P.current.scrollTo({top:x.offsetTop-80,behavior:"smooth"})},D=()=>{m(`${f}:${A}`),C(!1)},H=Array.from({length:24},(n,x)=>String(x).padStart(2,"0")),I=Array.from({length:60},(n,x)=>String(x).padStart(2,"0"));return s.jsxs("div",{className:E("w-full",y),children:[u&&s.jsx("input",{id:u,type:"hidden",value:c||"",required:w}),s.jsxs(be,{open:h&&!N,onOpenChange:N?void 0:C,children:[s.jsx(ye,{asChild:!0,children:s.jsxs(O,{variant:"outline",className:E("w-full justify-start text-left font-normal h-10",!c&&"text-muted-foreground",N&&"opacity-50 cursor-not-allowed"),style:v,disabled:N,children:[s.jsx(fe,{className:"mr-2 h-4 w-4"}),c||p||S("Select time")]})}),s.jsxs(Ce,{className:"w-auto p-0",align:"start",children:[s.jsxs("div",{className:"flex gap-0",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("div",{className:"text-xs font-semibold text-center py-3 border-b",children:S("Hour")}),s.jsxs("div",{className:"relative h-[200px] overflow-y-auto overflow-x-hidden",ref:T,children:[s.jsx("div",{className:"absolute inset-x-0 top-[80px] h-[40px] bg-accent/50 pointer-events-none z-10"}),H.map(n=>s.jsx("button",{type:"button","data-value":n,onClick:()=>q(n),className:E("w-16 h-[40px] flex items-center justify-center text-sm font-medium hover:bg-accent transition-colors",f===n&&"text-primary font-bold"),children:n},n))]})]}),s.jsx("div",{className:"border-l"}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("div",{className:"text-xs font-semibold text-center py-3 border-b",children:S("Minute")}),s.jsxs("div",{className:"relative h-[200px] overflow-y-auto overflow-x-hidden",ref:P,children:[s.jsx("div",{className:"absolute inset-x-0 top-[80px] h-[40px] bg-accent/50 pointer-events-none z-10"}),I.map(n=>s.jsx("button",{type:"button","data-value":n,onClick:()=>V(n),className:E("w-16 h-[40px] flex items-center justify-center text-sm font-medium hover:bg-accent transition-colors",A===n&&"text-primary font-bold"),children:n},n))]})]})]}),s.jsx("div",{className:"p-3 border-t",children:s.jsx(O,{onClick:D,className:"w-full",size:"sm",children:S("Apply")})})]})]})]})}var Z="Toggle",ee=d.forwardRef((c,m)=>{const{pressed:p,defaultPressed:y,onPressedChange:u,...w}=c,[v,N]=ne({prop:p,onChange:u,defaultProp:y??!1,caller:Z});return s.jsx(ce.button,{type:"button","aria-pressed":v,"data-state":v?"on":"off","data-disabled":c.disabled?"":void 0,...w,ref:m,onClick:oe(c.onClick,()=>{c.disabled||N(!v)})})});ee.displayName=Z;var se=ee;const He=Ee("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-3",sm:"h-9 px-2.5",lg:"h-11 px-5"}},defaultVariants:{variant:"default",size:"default"}}),ae=d.forwardRef(({className:c,variant:m,size:p,...y},u)=>s.jsx(se,{ref:u,className:E(He({variant:m,size:p,className:c})),...y}));ae.displayName=se.displayName;const te=d.forwardRef(({options:c,value:m=[],onValueChange:p,className:y,disabled:u,direction:w="horizontal",...v},N)=>{const S=(h,C)=>{p&&p(C?[...m,h]:m.filter(f=>f!==h))};return s.jsx("div",{ref:N,className:E(w==="horizontal"?"flex flex-wrap gap-4":"grid gap-3",y),...v,children:c.map(h=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Y,{id:h.value,checked:m.includes(h.value),onCheckedChange:C=>S(h.value,C),disabled:u}),s.jsx(Ie,{htmlFor:h.value,className:"text-sm font-normal leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:h.label})]},h.value))})});te.displayName="CheckboxGroup";function Le({options:c,selected:m,onChange:p,placeholder:y}){return s.jsx("div",{children:s.jsx("select",{multiple:!0,value:m,onChange:u=>{const w=Array.from(u.target.selectedOptions,v=>v.value);p(w)},children:c.map(u=>s.jsx("option",{value:u.value,children:u.label},u.value))})})}const re=d.forwardRef(({fields:c,value:m=[],onChange:p,addButtonText:y="Add Item",deleteTooltipText:u="Delete",className:w,minItems:v=0,maxItems:N,errors:S={},renderCustomField:h,onValidationChange:C,showDefault:f=!1,layout:o},A)=>{const[R,T]=d.useState({}),[P,q]=d.useState(!1),V=()=>Math.random().toString(36).substring(2,9);d.useEffect(()=>{if(f&&(!m||m.length===0)){const e={id:V(),...c.reduce((r,a)=>{if(a.type==="checkbox"||a.type==="switch")r[a.name]=!1;else if(a.type==="conditional"&&a.conditions){const l=Object.keys(a.conditions)[0],i=a.conditions[l];r[a.name]=i.type==="checkbox"||i.type==="switch"?!1:""}else r[a.name]="";return r},{})};p([e])}},[f,c,p]);const D=()=>{if(N&&m.length>=N)return;const e={id:V(),...c.reduce((r,a,l)=>{if(a.type==="checkbox"||a.type==="switch")r[a.name]=!1;else if(a.type==="conditional"&&a.conditions){const i=Object.keys(a.conditions)[0],g=a.conditions[i];r[a.name]=g.type==="checkbox"||g.type==="switch"?!1:""}else r[a.name]="";return r},{})};p([...m,e])},H=e=>{const r=f?Math.max(1,v):v;m.length<=r||p(m.filter(a=>a.id!==e))},I=d.useCallback(()=>{const e={};let r=!0;return m.forEach(a=>{c.forEach(l=>{if(l.required){const i=a[l.name];(i===""||i===null||i===void 0||Array.isArray(i)&&i.length===0)&&(e[a.id]||(e[a.id]={}),e[a.id][l.name]=`${l.label} is required`,r=!1)}})}),T(e),C==null||C(r,e),r},[m,c,C]);d.useImperativeHandle(A,()=>({validate:I,getValidationErrors:()=>R}),[I,R]),d.useEffect(()=>{const e=r=>{var i,g,k,t,j;const l=r.target.closest("button");l&&((i=l.textContent)!=null&&i.includes("Save")||(g=l.textContent)!=null&&g.includes("Change")||(k=l.textContent)!=null&&k.includes("Update")||(t=l.textContent)!=null&&t.includes("Create")||(j=l.textContent)!=null&&j.includes("Submit"))&&(I()||(r.preventDefault(),r.stopPropagation(),r.stopImmediatePropagation(),q(!0)))};return document.addEventListener("click",e,!0),()=>{document.removeEventListener("click",e,!0)}},[I]);const n=(e,r,a)=>{const l=m.map(i=>i.id===e?{...i,[r]:a}:i);p(l)},x=()=>{if(!o||o.type==="grid"){if(o!=null&&o.columns){if(typeof o.columns=="object"){const{sm:e=1,md:r=2,lg:a=2,xl:l=3}=o.columns;return`grid gap-${o.gap||"4"} grid-cols-${e} md:grid-cols-${r} lg:grid-cols-${a} xl:grid-cols-${l}`}return o.columns==="auto"?`grid gap-${o.gap||"4"} grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4`:`grid gap-${o.gap||"4"} grid-cols-${o.columns}`}return`grid gap-4 ${c.length===1?"grid-cols-1":c.length===2?"grid-cols-1 md:grid-cols-2":"grid-cols-1 lg:grid-cols-2"}`}return o.type==="flex"?`flex flex-wrap gap-${o.gap||"4"}`:o.type==="stack"?`space-y-${o.gap||"4"}`:o.type==="custom"&&o.className?o.className:`grid gap-4 ${c.length===1?"grid-cols-1":c.length===2?"grid-cols-1 md:grid-cols-2":"grid-cols-1 lg:grid-cols-2"}`},$=(e,r)=>{var l,i,g;const a=r[e.name];if(e.type==="conditional"&&e.dependsOn&&e.conditions){const k=r[e.dependsOn],t=e.conditions[k];if(t){const j={...e,...t,type:t.type};return $(j,r)}return null}switch(e.type){case"textarea":return s.jsx(le,{placeholder:e.placeholder,value:a||"",onChange:t=>n(r.id,e.name,t.target.value),className:e.className,rows:e.rows||3});case"select":return s.jsxs(ie,{value:a||"",onValueChange:t=>n(r.id,e.name,t),children:[s.jsx(me,{className:e.className,children:s.jsx(pe,{placeholder:e.placeholder})}),s.jsx(de,{searchable:(((l=e.options)==null?void 0:l.length)||0)>10,children:(i=e.options)==null?void 0:i.map((t,j)=>s.jsx(ue,{value:t.value,children:t.label},`${r.id}-${e.name}-${t.value}-${j}`))})]});case"checkbox":return s.jsxs("div",{className:"flex items-center space-x-3 py-2",children:[s.jsx(Y,{id:`checkbox-${r.id}-${e.name}`,checked:a===!0,onCheckedChange:t=>n(r.id,e.name,t),className:E("data-[state=checked]:bg-primary data-[state=checked]:border-primary",e.className)},`checkbox-${r.id}-${e.name}`),s.jsx("label",{htmlFor:`checkbox-${r.id}-${e.name}`,className:"text-sm font-medium cursor-pointer select-none text-gray-700",children:e.label})]},`checkbox-wrapper-${r.id}-${e.name}`);case"switch":const k=`switch-${r.id}-${e.name}`;return s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(he,{id:k,checked:a||!1,onCheckedChange:t=>n(r.id,e.name,t),className:e.className}),s.jsx("label",{htmlFor:k,className:"text-sm font-medium cursor-pointer",children:e.label})]});case"radio":return s.jsx(xe,{value:a||"",onValueChange:t=>n(r.id,e.name,t),className:e.className,children:(g=e.options)==null?void 0:g.map((t,j)=>{const M=`radio-${r.id}-${e.name}-${j}`;return s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ge,{id:M,value:t.value}),s.jsx("label",{htmlFor:M,className:"text-sm font-medium cursor-pointer",children:t.label})]},`${r.id}-${e.name}-${t.value}-${j}`)})});case"date":return s.jsx(ve,{value:a||"",onChange:t=>n(r.id,e.name,t),placeholder:e.placeholder,className:e.className});case"daterange":return s.jsx(je,{value:a||"",onChange:t=>n(r.id,e.name,t),placeholder:e.placeholder,className:e.className});case"datetimerange":return s.jsx(Ne,{value:a||"",onChange:t=>n(r.id,e.name,t),placeholder:e.placeholder,className:e.className});case"timepicker":return s.jsx(De,{value:a||"",onChange:t=>n(r.id,e.name,t),placeholder:e.placeholder,className:e.className});case"repeater":return s.jsx(re,{value:a||[],onChange:t=>n(r.id,e.name,t),fields:e.options&&e.options.length>0?e.options.map(t=>({type:"text",name:t.value,label:t.label})):[{type:"text",name:"value",label:"Value"}],addButtonText:"Add Item",className:e.className});case"image":case"media":return s.jsx(Fe,{value:a||"",onChange:t=>n(r.id,e.name,t),placeholder:e.placeholder,multiple:!1},`${r.id}-${e.name}`);case"currency":return s.jsx(ke,{value:a||"",onChange:t=>n(r.id,e.name,t),placeholder:e.placeholder,currency:e.currency,className:e.className,disabled:e.disabled});case"phone":return s.jsx(we,{value:a||"",onChange:t=>n(r.id,e.name,t),placeholder:e.placeholder,className:e.className});case"richtext":return s.jsx(Se,{content:a||"",onChange:t=>n(r.id,e.name,t),placeholder:e.placeholder,className:e.className});case"slider":return s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{value:[a||e.min||0],onValueChange:t=>n(r.id,e.name,t[0]),min:e.min||0,max:e.max||100,step:e.step||1,className:e.className}),s.jsx("div",{className:"text-sm text-gray-500 text-center",children:a||e.min||0})]});case"rating":return s.jsx(Pe,{value:a||0,onChange:t=>n(r.id,e.name,t),max:e.max||5,className:e.className});case"toggle":return s.jsx("div",{className:"flex items-center space-x-2",children:s.jsx(ae,{pressed:a||!1,onPressedChange:t=>n(r.id,e.name,t),className:e.className,children:e.label})});case"multiselect":return s.jsx(Re,{options:e.options||[],value:a||[],onValueChange:t=>n(r.id,e.name,t),placeholder:e.placeholder,searchable:!0,className:e.className});case"checkboxgroup":return s.jsx(te,{options:e.options||[],value:a||[],onValueChange:t=>n(r.id,e.name,t),className:e.className});case"search":return s.jsx(Me,{value:a||"",onChange:t=>n(r.id,e.name,t),onSearch:()=>{},placeholder:e.placeholder,className:e.className});case"simplemultiselect":return s.jsx(Le,{options:e.options||[],selected:a||[],onChange:t=>n(r.id,e.name,t),placeholder:e.placeholder});case"tags":return s.jsx(Ae,{value:a||[],onChange:t=>n(r.id,e.name,t),placeholder:e.placeholder,className:e.className});case"icon":return s.jsx(Ve,{value:a||"",onChange:t=>n(r.id,e.name,t),placeholder:e.placeholder,className:e.className});case"file":return s.jsx(L,{type:"file",placeholder:e.placeholder,onChange:t=>{var j;return n(r.id,e.name,(j=t.target.files)==null?void 0:j[0])},className:e.className});case"color":case"url":case"time":case"datetime":case"month":case"week":return s.jsx(L,{type:e.type==="datetime"?"datetime-local":e.type,placeholder:e.placeholder,value:a||"",onChange:t=>n(r.id,e.name,t.target.value),className:e.className});default:return s.jsx(L,{type:e.type,placeholder:e.placeholder,value:a||"",onChange:t=>n(r.id,e.name,t.target.value),className:e.className})}};return s.jsx(ze,{children:s.jsxs("div",{className:E("space-y-4",w),children:[s.jsx("div",{className:"max-h-96 overflow-y-auto space-y-4 pr-2",children:(Array.isArray(m)?m:[]).map((e,r)=>s.jsxs("div",{className:"border rounded-lg p-4 bg-gray-50/50",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h4",{className:"text-sm font-medium text-gray-700",children:["Item ",r+1]}),m.length>(f?Math.max(1,v):v)&&s.jsxs(J,{delayDuration:0,children:[s.jsx(Q,{asChild:!0,children:s.jsx(O,{variant:"ghost",size:"sm",onClick:()=>H(e.id),className:"h-8 w-8 p-0 text-destructive hover:text-destructive",children:s.jsx(Oe,{className:"h-4 w-4"})})}),s.jsx(X,{children:s.jsx("p",{children:u})})]})]}),s.jsx("div",{className:x(),children:c.sort((a,l)=>{var i,g;return(((i=a.layout)==null?void 0:i.order)||0)-(((g=l.layout)==null?void 0:g.order)||0)}).map((a,l)=>{var M,G,B,K,_;const i=$(a,e);if(!i)return null;const g=a.type==="textarea"||a.type==="richtext"||a.type==="tags",k=a.type==="checkbox"||a.type==="switch",t=()=>{let b=k?"flex items-center":"space-y-2";if(a.layout){if(a.layout.hidden)return"hidden";if(a.layout.colSpan)if(typeof a.layout.colSpan=="object"){const{sm:z,md:F,lg:U,xl:W}=a.layout.colSpan;z&&(b+=` col-span-${z}`),F&&(b+=` md:col-span-${F}`),U&&(b+=` lg:col-span-${U}`),W&&(b+=` xl:col-span-${W}`)}else b+=` col-span-${a.layout.colSpan}`;a.layout.order&&(b+=` order-${a.layout.order}`),a.layout.className&&(b+=` ${a.layout.className}`)}else if((o==null?void 0:o.type)==="grid"&&g&&c.length>1)if(typeof o.columns=="object"){const{md:z=2,lg:F=2}=o.columns;b+=` md:col-span-${Math.min(z,2)} lg:col-span-${Math.min(F,2)}`}else b+=" md:col-span-2 lg:col-span-2";else!o&&g&&c.length>1&&(b+=" md:col-span-2 lg:col-span-2");return(o==null?void 0:o.type)==="flex"&&(b+=" flex-1 min-w-0"),b},j=(M=a.layout)!=null&&M.width?{width:a.layout.width}:void 0;return s.jsxs("div",{className:t(),style:j,"data-repeater-field":`${e.id}-${a.name}`,children:[!k&&s.jsxs("label",{className:"text-sm font-medium text-gray-700",children:[a.label,a.required&&s.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),i,(((G=S[e.id])==null?void 0:G[a.name])||P&&((B=R[e.id])==null?void 0:B[a.name]))&&s.jsx("div",{className:"text-red-500 text-xs mt-1",children:((K=S[e.id])==null?void 0:K[a.name])||((_=R[e.id])==null?void 0:_[a.name])})]},`${e.id}-${a.name}-${l}`)})}),h&&h(e,r,(a,l)=>n(e.id,a,l))]},`repeater-item-${e.id||r}`))}),(!N||m.length<N)&&s.jsxs(J,{delayDuration:0,children:[s.jsx(Q,{asChild:!0,children:s.jsxs(O,{type:"button",variant:"outline",onClick:D,className:"w-full border-dashed",children:[s.jsx(qe,{className:"h-4 w-4 mr-2"}),y]})}),s.jsx(X,{children:s.jsx("p",{children:y})})]})]})})});re.displayName="Repeater";export{re as R};
