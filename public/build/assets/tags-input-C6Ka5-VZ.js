import{j as r}from"./ui-ZHFf5B17.js";import{r as o}from"./vendor-CcMVubkO.js";import{I as T}from"./input-DqOfVTcn.js";import{B as I}from"./badge-CV60sqBJ.js";import{c as R}from"./utils-DrcJ8Itn.js";import{X as O}from"./x-DVK_F_Gh.js";const L=o.forwardRef(({value:n=[],onChange:g,placeholder:v="Type and press Enter...",className:y,disabled:i,separator:u=",",options:c=[],allowCustom:k=!0},j)=>{const[s,f]=o.useState(""),[h,a]=o.useState(!1),w=o.useRef(null),d=o.useRef(null),l=o.useMemo(()=>s?c.filter(e=>e.label.toLowerCase().includes(s.toLowerCase())&&!n.includes(e.value)):c,[c,s,n]),m=e=>{const t=e.trim();t&&!n.includes(t)&&g([...n,t]),f("")},x=e=>{g(n.filter(t=>t!==e))},E=e=>{e.key==="Enter"||e.key===u?(e.preventDefault(),l.length>0&&h?b(l[0]):k&&m(s),a(!1)):e.key==="Escape"?a(!1):e.key==="Backspace"&&!s&&n.length>0&&x(n[n.length-1])},N=e=>{const t=e.target.value;if(f(t),a(t.length>0&&c.length>0),t.includes(u)){const p=t.split(u);p.slice(0,-1).forEach(C=>m(C)),f(p[p.length-1]||"")}},b=e=>{m(e.value),a(!1)};return o.useEffect(()=>{const e=t=>{d.current&&!d.current.contains(t.target)&&a(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),r.jsxs("div",{ref:d,className:"relative",children:[r.jsxs("div",{ref:j,className:R("flex min-h-10 w-full flex-wrap gap-2 rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-within:ring-2 focus-within:ring-ring focus-within:ring-offset-2",i&&"cursor-not-allowed opacity-50",y),onClick:()=>{var e;return(e=w.current)==null?void 0:e.focus()},children:[n.map(e=>r.jsxs(I,{variant:"secondary",className:"gap-1",children:[e,!i&&r.jsx(O,{className:"h-3 w-3 cursor-pointer hover:text-destructive",onClick:t=>{t.stopPropagation(),x(e)}})]},e)),r.jsx(T,{ref:w,value:s,onChange:N,onKeyDown:E,onFocus:()=>a(s.length>0&&c.length>0),placeholder:n.length===0?v:"",disabled:i,className:"flex-1 border-0 p-0 shadow-none focus-visible:ring-0"})]}),h&&l.length>0&&r.jsx("div",{className:"absolute z-50 w-full mt-1 bg-background border border-input rounded-md shadow-lg max-h-48 overflow-y-auto",children:l.map(e=>r.jsx("div",{className:"px-3 py-2 text-sm cursor-pointer hover:bg-accent hover:text-accent-foreground",onClick:()=>b(e),children:e.label},e.value))})]})});L.displayName="TagsInput";export{L as T};
