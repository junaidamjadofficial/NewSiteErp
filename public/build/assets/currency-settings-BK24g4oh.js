import{j as e}from"./ui-ZHFf5B17.js";import{r as p}from"./vendor-CcMVubkO.js";import{B as t}from"./button-DYC7yMVq.js";import{I as H}from"./input-DqOfVTcn.js";import{L as i}from"./label-DbqhUtKI.js";import{C as M,a as X,b as q,c as G}from"./card-DHszHnbI.js";import{S as b,a as j,b as N,c as v,d as C}from"./select-BEhl2QER.js";import{S as T}from"./switch-ByWYyd_6.js";import{X as J,A as K}from"./app-BBiA4mAE.js";import{u as O}from"./useTranslation-CV4_gBnb.js";import{D as Q}from"./dollar-sign-CaNGv6yE.js";import{S as W}from"./save-B89BgUdM.js";import{C as h}from"./check-DUlQPeVG.js";import"./index-BMyiKApA.js";import"./utils-B-dksMZM.js";import"./utils-DrcJ8Itn.js";import"./index-BdQq_4o_.js";import"./index-BYFX2qNQ.js";import"./index-BZAHB8Ku.js";import"./chevron-down-Zr-tNTku.js";import"./createLucideIcon-Dov4NOxw.js";import"./search-Chs14P_a.js";/* empty css            */function je({userSettings:a={},auth:y}){var $,k,D,S;const{t:r}=O(),{currencies:m=[]}=J().props,[w,f]=p.useState(!1),d=(k=($=y==null?void 0:y.user)==null?void 0:$.permissions)==null?void 0:k.includes("edit-currency-settings"),[c,x]=p.useState({decimalFormat:(a==null?void 0:a.decimalFormat)||"2",defaultCurrency:(a==null?void 0:a.defaultCurrency)||"USD",decimalSeparator:(a==null?void 0:a.decimalSeparator)||".",thousandsSeparator:(a==null?void 0:a.thousandsSeparator)||",",floatNumber:(a==null?void 0:a.floatNumber)!=="0",currencySymbolSpace:(a==null?void 0:a.currencySymbolSpace)==="1",currencySymbolPosition:(a==null?void 0:a.currencySymbolPosition)||"before",currencySymbol:(a==null?void 0:a.currencySymbol)||"$",currencyName:""}),[P,F]=p.useState(1234.56),L=[{value:"0",label:"0 (e.g., 1234)"},{value:"1",label:"1 (e.g., 1234.5)"},{value:"2",label:"2 (e.g., 1234.56)"},{value:"3",label:"3 (e.g., 1234.567)"},{value:"4",label:"4 (e.g., 1234.5678)"}],V=[{value:",",label:"Comma (1,234.56)"},{value:".",label:"Dot (1.234,56)"},{value:" ",label:"Space (1 234.56)"},{value:"none",label:"None (123456.78)"}];p.useEffect(()=>{x({decimalFormat:(a==null?void 0:a.decimalFormat)||"2",defaultCurrency:(a==null?void 0:a.defaultCurrency)||"USD",decimalSeparator:(a==null?void 0:a.decimalSeparator)||".",thousandsSeparator:(a==null?void 0:a.thousandsSeparator)||",",floatNumber:(a==null?void 0:a.floatNumber)!=="0",currencySymbolSpace:(a==null?void 0:a.currencySymbolSpace)==="1",currencySymbolPosition:(a==null?void 0:a.currencySymbolPosition)||"before",currencySymbol:(a==null?void 0:a.currencySymbol)||"$",currencyName:""})},[a]),p.useEffect(()=>{if(m&&m.length>0){const l=m.find(o=>o.code===c.defaultCurrency);l&&x(o=>({...o,currencyName:l.name}))}},[m,c.defaultCurrency]);const n=(l,o)=>{x(s=>({...s,[l]:o}))},B=l=>{const o=m.find(s=>s.code===l);x(s=>({...s,defaultCurrency:l,currencySymbol:(o==null?void 0:o.symbol)||"$",currencyName:(o==null?void 0:o.name)||l}))},z=()=>{try{let l=Number(P)||0;const o=parseInt(c.decimalFormat)||2;c.floatNumber||(l=Math.floor(l));const s=Number(l).toFixed(o).split(".");c.thousandsSeparator!=="none"&&(s[0]=s[0].replace(/\B(?=(\d{3})+(?!\d))/g,c.thousandsSeparator));let E=s.join(c.decimalSeparator);const u=m.find(U=>U.code===c.defaultCurrency),I=(u==null?void 0:u.symbol)||"$",A=c.currencySymbolSpace?" ":"";return c.currencySymbolPosition==="before"?`${I}${A}${E}`:`${E}${A}${I}`}catch{return"Invalid format"}},R=()=>{f(!0),K.post(route("settings.currency.update"),{settings:c},{preserveScroll:!0,onSuccess:()=>{f(!1)},onError:()=>{f(!1)}})};return e.jsxs(M,{children:[e.jsxs(X,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{className:"order-1 rtl:order-2",children:[e.jsxs(q,{className:"flex items-center gap-2 text-lg",children:[e.jsx(Q,{className:"h-5 w-5"}),r("Currency Settings")]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:r("Configure how currency values are displayed throughout the application")})]}),d&&e.jsxs(t,{className:"order-2 rtl:order-1",onClick:R,disabled:w,size:"sm",children:[e.jsx(W,{className:"h-4 w-4 mr-2"}),r(w?"Saving...":"Save Changes")]})]}),e.jsxs(G,{children:[e.jsxs("div",{className:"mb-6 p-4 bg-muted/30 rounded-md border flex flex-col md:flex-row items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col items-center md:items-start mb-3 md:mb-0",children:[e.jsx("div",{className:"text-2xl font-semibold mb-1",children:z()}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[c.currencyName," (",c.defaultCurrency,")"]})]}),e.jsx("div",{className:"w-full md:w-auto md:max-w-[200px]",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{type:"number",className:"text-right h-8 text-sm",value:P,onChange:l=>F(parseFloat(l.target.value)||0),placeholder:"Test amount",disabled:!d}),e.jsx(t,{variant:"outline",onClick:()=>F(1234.56),type:"button",size:"sm",className:"h-8 text-xs",disabled:!d,children:r("Reset")})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(i,{children:r("Default Currency")}),e.jsxs(b,{value:c.defaultCurrency,onValueChange:B,disabled:!d,children:[e.jsx(j,{children:e.jsx(N,{placeholder:r("Select currency")})}),e.jsx(v,{children:e.jsx("div",{className:"max-h-[300px] overflow-y-auto",children:m&&m.length>0?m.map(l=>e.jsx(C,{value:l.code,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-8 text-center",children:l.symbol}),e.jsxs("span",{children:[l.code," - ",l.name]}),l.code===c.defaultCurrency&&e.jsx("span",{className:"ml-2 text-xs text-primary",children:"(Selected)"})]})},l.id)):e.jsx("div",{className:"p-2 text-center text-muted-foreground",children:r("No currencies found")})})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(i,{children:r("Decimal Places")}),e.jsxs(b,{value:c.decimalFormat,onValueChange:l=>n("decimalFormat",l),disabled:!d,children:[e.jsx(j,{children:e.jsx(N,{placeholder:r("Select decimal format")})}),e.jsx(v,{children:L.map(l=>e.jsx(C,{value:l.value,children:l.label},l.value))})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(i,{children:r("Symbol Position")}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs(t,{type:"button",variant:c.currencySymbolPosition==="before"?"default":"outline",className:"justify-center",onClick:()=>n("currencySymbolPosition","before"),disabled:!d,children:[e.jsx("span",{className:"mr-2",children:((D=m.find(l=>l.code===c.defaultCurrency))==null?void 0:D.symbol)||"$"}),"100",c.currencySymbolPosition==="before"&&e.jsx(h,{className:"h-4 w-4 ml-2"})]}),e.jsxs(t,{type:"button",variant:c.currencySymbolPosition==="after"?"default":"outline",className:"justify-center",onClick:()=>n("currencySymbolPosition","after"),disabled:!d,children:["100",e.jsx("span",{className:"ml-2",children:((S=m.find(l=>l.code===c.defaultCurrency))==null?void 0:S.symbol)||"$"}),c.currencySymbolPosition==="after"&&e.jsx(h,{className:"h-4 w-4 ml-2"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(i,{children:r("Decimal Separator")}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs(t,{type:"button",variant:c.decimalSeparator==="."?"default":"outline",className:"justify-center",onClick:()=>n("decimalSeparator","."),disabled:!d,children:[r("Dot")," (123.45)",c.decimalSeparator==="."&&e.jsx(h,{className:"h-4 w-4 ml-2"})]}),e.jsxs(t,{type:"button",variant:c.decimalSeparator===","?"default":"outline",className:"justify-center",onClick:()=>n("decimalSeparator",","),disabled:!d,children:[r("Comma")," (123,45)",c.decimalSeparator===","&&e.jsx(h,{className:"h-4 w-4 ml-2"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(i,{children:r("Thousands Separator")}),e.jsxs(b,{value:c.thousandsSeparator,onValueChange:l=>n("thousandsSeparator",l),disabled:!d,children:[e.jsx(j,{children:e.jsx(N,{placeholder:r("Select thousands separator")})}),e.jsx(v,{children:V.map(l=>e.jsx(C,{value:l.value,children:l.label},l.value))})]})]}),e.jsx("div",{className:"space-y-3 border rounded-md p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"floatNumber",children:r("Show Decimals")}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:r("Display decimal places in amounts")})]}),e.jsx(T,{id:"floatNumber",checked:c.floatNumber,onCheckedChange:l=>n("floatNumber",l),disabled:!d})]})}),e.jsx("div",{className:"space-y-3 border rounded-md p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"currencySymbolSpace",children:r("Add Space")}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:r("Space between amount and symbol")})]}),e.jsx(T,{id:"currencySymbolSpace",checked:c.currencySymbolSpace,onCheckedChange:l=>n("currencySymbolSpace",l),disabled:!d})]})})]})]})]})}export{je as default};
