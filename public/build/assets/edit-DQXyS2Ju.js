import{j as e}from"./ui-ZHFf5B17.js";import{r as _}from"./vendor-CcMVubkO.js";import{X as N,G as b}from"./app-BBiA4mAE.js";import{a as f,b as C,c as S}from"./dialog-BLwxprq_.js";import{B as o}from"./button-DYC7yMVq.js";import{I as m}from"./input-DqOfVTcn.js";import{L as l}from"./label-DbqhUtKI.js";import{T as F}from"./textarea-DxQ_BnuT.js";import{S as E,a as D,b as U,c as I,d as p}from"./select-BEhl2QER.js";import{S as L}from"./switch-ByWYyd_6.js";import{D as P}from"./date-picker-CVthJV3y.js";import{C as j}from"./currency-input-BZrT8lhz.js";import{u as T}from"./useTranslation-CV4_gBnb.js";/* empty css            */import"./utils-DrcJ8Itn.js";import"./utils-B-dksMZM.js";import"./x-DVK_F_Gh.js";import"./createLucideIcon-Dov4NOxw.js";import"./index-BMyiKApA.js";import"./index-BdQq_4o_.js";import"./index-BYFX2qNQ.js";import"./index-BZAHB8Ku.js";import"./chevron-down-Zr-tNTku.js";import"./search-Chs14P_a.js";import"./check-DUlQPeVG.js";import"./react-datepicker-BHcKmBHW.js";import"./popover-fYI5j510.js";import"./calendar-DvmJ2XsD.js";import"./input-error-DuIbBMgZ.js";import"./helpers-QYnGjXad.js";function ce({coupon:t,onSuccess:x}){var h;const{t:s}=T(),[n,u]=_.useState(!1),{props:c}=N(),g=((h=c==null?void 0:c.companyAllSetting)==null?void 0:h.currencySymbol)||"$",{data:a,setData:d,patch:v,errors:r}=b({name:t.name,description:t.description||"",code:t.code,discount:t.discount,limit:t.limit||void 0,type:t.type,minimum_spend:t.minimum_spend||void 0,maximum_spend:t.maximum_spend||void 0,limit_per_user:t.limit_per_user||void 0,expiry_date:t.expiry_date||"",included_module:t.included_module||[],excluded_module:t.excluded_module||[],status:t.status}),y=i=>{i.preventDefault(),u(!0),v(route("coupons.update",t.id),{onSuccess:()=>{x()},onFinish:()=>u(!1)})};return e.jsxs(f,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(C,{children:e.jsx(S,{children:s("Edit Coupon")})}),e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"name",children:s("Name")}),e.jsx(m,{id:"name",value:a.name,onChange:i=>d("name",i.target.value),placeholder:s("Enter coupon name"),className:r.name?"border-red-500":"",required:!0}),r.name&&e.jsx("p",{className:"text-sm text-red-500",children:r.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"code",children:s("Code")}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m,{id:"code",value:a.code,onChange:i=>d("code",i.target.value.toUpperCase()),placeholder:s("Enter coupon code"),className:r.code?"border-red-500":"",required:!0}),e.jsx(o,{type:"button",variant:"outline",onClick:()=>d("code","COUP-"+Date.now()),disabled:n,children:s("Generate")})]}),r.code&&e.jsx("p",{className:"text-sm text-red-500",children:r.code})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"type",required:!0,children:s("Type")}),e.jsxs(E,{value:a.type,onValueChange:i=>d("type",i),children:[e.jsx(D,{className:r.type?"border-red-500":"",children:e.jsx(U,{placeholder:s("Select type")})}),e.jsxs(I,{children:[e.jsx(p,{value:"percentage",children:s("Percentage")}),e.jsx(p,{value:"flat",children:s("Flat Amount")}),e.jsx(p,{value:"fixed",children:s("Fixed Price")})]})]}),r.type&&e.jsx("p",{className:"text-sm text-red-500",children:r.type})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(l,{htmlFor:"discount",required:!0,children:[s("Discount")," ",a.type==="percentage"?"(%)":`(${g})`]}),e.jsx(m,{id:"discount",type:"number",step:"0.01",min:"0",value:a.discount,onChange:i=>d("discount",parseFloat(i.target.value)||0),placeholder:s("Enter discount value"),className:r.discount?"border-red-500":""}),r.discount&&e.jsx("p",{className:"text-sm text-red-500",children:r.discount})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"limit",children:s("Usage Limit")}),e.jsx(m,{id:"limit",type:"number",min:"1",value:a.limit||"",onChange:i=>d("limit",i.target.value?parseInt(i.target.value):void 0),placeholder:s("Enter Usage Limit"),className:r.limit?"border-red-500":""}),r.limit&&e.jsx("p",{className:"text-sm text-red-500",children:r.limit})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"limit_per_user",children:s("Limit Per User")}),e.jsx(m,{id:"limit_per_user",type:"number",min:"1",value:a.limit_per_user||"",onChange:i=>d("limit_per_user",i.target.value?parseInt(i.target.value):void 0),placeholder:s("Enter Limit Per User"),className:r.limit_per_user?"border-red-500":""}),r.limit_per_user&&e.jsx("p",{className:"text-sm text-red-500",children:r.limit_per_user})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsx(j,{label:s("Minimum Spend"),value:(a.minimum_spend||"").toString(),onChange:i=>d("minimum_spend",i?parseFloat(i):void 0),error:r.minimum_spend,placeholder:s("Enter minimum spend")})}),e.jsx("div",{children:e.jsx(j,{label:s("Maximum Spend"),value:(a.maximum_spend||"").toString(),onChange:i=>d("maximum_spend",i?parseFloat(i):void 0),error:r.maximum_spend,placeholder:s("Enter maximum spend")})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"expiry_date",children:s("Expiry Date")}),e.jsx(P,{value:a.expiry_date,onChange:i=>d("expiry_date",i),placeholder:s("Select expiry date"),className:r.expiry_date?"border-red-500":""}),r.expiry_date&&e.jsx("p",{className:"text-sm text-red-500",children:r.expiry_date})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"description",children:s("Description")}),e.jsx(F,{id:"description",value:a.description,onChange:i=>d("description",i.target.value),placeholder:s("Enter coupon description"),rows:3,className:r.description?"border-red-500":""}),r.description&&e.jsx("p",{className:"text-sm text-red-500",children:r.description})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(L,{id:"status",checked:a.status,onCheckedChange:i=>d("status",i)}),e.jsx(l,{htmlFor:"status",children:s("Active")})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(o,{type:"button",variant:"outline",onClick:x,children:s("Cancel")}),e.jsx(o,{type:"submit",disabled:n,children:s(n?"Updating...":"Update")})]})]})]})}export{ce as default};
