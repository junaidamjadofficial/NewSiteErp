import{j as e}from"./ui-ZHFf5B17.js";import{r as v}from"./vendor-CcMVubkO.js";import{X as O,S as P}from"./app-BBiA4mAE.js";import{a as A}from"./html2pdf-Dais6JZR.js";import{a as F,b as n,f as t}from"./helpers-QYnGjXad.js";import{u as S}from"./useTranslation-CV4_gBnb.js";/* empty css            */function T(){var c,r,m,o,x,p,j,h,y,f,b;const{t:a}=S(),{payrollEntry:s}=O().props,[_,d]=v.useState(!1);v.useEffect(()=>{new URLSearchParams(window.location.search).get("download")==="pdf"&&g()},[]);const g=async()=>{var i,N,u;d(!0);const l=document.querySelector(".payslip-container");if(l){const k={margin:.25,filename:`payslip-${((N=(i=s.employee)==null?void 0:i.user)==null?void 0:N.name)||((u=s.employee)==null?void 0:u.name)}-${F(s.payroll.pay_period_start)}.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2},jsPDF:{unit:"in",format:"a4",orientation:"portrait"}};try{await A().set(k).from(l).save(),setTimeout(()=>window.close(),1e3)}catch(D){console.error("PDF generation failed:",D)}}d(!1)},w=((r=(c=s.employee)==null?void 0:c.user)==null?void 0:r.name)||((m=s.employee)==null?void 0:m.name);return(x=(o=s.employee)==null?void 0:o.user)!=null&&x.email||((p=s.employee)==null||p.email),e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsx(P,{title:a("Payslip")}),_&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),e.jsx("p",{className:"text-lg font-semibold text-gray-700",children:a("Generating PDF...")})]})})}),e.jsxs("div",{className:"payslip-container bg-white max-w-4xl mx-auto p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-xl font-bold",children:s.payroll.title})}),e.jsxs("div",{className:"text-right",children:[e.jsx("h1",{className:"text-xl font-bold",children:n("company_name")||"YOUR COMPANY"}),e.jsx("p",{className:"text-sm text-gray-600",children:n("company_address")})]})]}),e.jsx("div",{className:"border-2 border-black",children:e.jsxs("div",{className:"p-1 pl-1",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-x-8 gap-y-2 mb-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"font-medium",children:[a("Name")," :"]}),e.jsx("span",{children:w})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"font-medium",children:[a("Designation")," :"]}),e.jsx("span",{children:((h=(j=s.employee)==null?void 0:j.designation)==null?void 0:h.designation_name)||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"font-medium",children:[a("Working Days")," :"]}),e.jsx("span",{children:s.working_days})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"font-medium",children:[a("Employee ID")," :"]}),e.jsx("span",{children:s.employee.employee_id})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"font-medium",children:[a("Days Worked")," :"]}),e.jsx("span",{children:s.present_days})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"font-medium",children:[a("Bank Name")," :"]}),e.jsx("span",{children:((y=s.employee)==null?void 0:y.bank_name)||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"font-medium",children:[a("Paid Leave")," :"]}),e.jsx("span",{children:s.paid_leave_days})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"font-medium",children:[a("Bank A/C No")," :"]}),e.jsx("span",{children:((f=s.employee)==null?void 0:f.account_number)||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"font-medium",children:[a("Unpaid Leave")," :"]}),e.jsx("span",{children:s.unpaid_leave_days})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"font-medium",children:[a("IFSC No")," :"]}),e.jsx("span",{children:((b=s.employee)==null?void 0:b.ifsc_code)||"N/A"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-0 border border-black mt-1",children:[e.jsxs("div",{className:"border-r border-black",children:[e.jsx("div",{className:"bg-gray-100 px-3 py-2 border-b border-black",children:e.jsx("h3",{className:"font-bold",children:a("Earnings")})}),e.jsxs("div",{className:"p-3 space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:a("Basic Salary")}),e.jsx("span",{children:t(s.basic_salary)})]}),Object.keys(s.allowances_breakdown||{}).length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs font-semibold text-gray-600 pt-1",children:[a("Allowances"),":"]}),Object.entries(s.allowances_breakdown||{}).map(([l,i])=>e.jsxs("div",{className:"flex justify-between pl-2",children:[e.jsx("span",{className:"text-sm",children:l}),e.jsx("span",{className:"text-sm",children:t(Number(i))})]},l))]}),Object.keys(s.manual_overtimes_breakdown||{}).length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs font-semibold text-gray-600 pt-1",children:[a("Manual Overtime"),":"]}),Object.entries(s.manual_overtimes_breakdown||{}).map(([l,i])=>e.jsxs("div",{className:"flex justify-between pl-2",children:[e.jsx("span",{className:"text-sm",children:l}),e.jsx("span",{className:"text-sm",children:t(Number(i))})]},l))]}),s.attendance_overtime_amount>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs font-semibold text-gray-600 pt-1",children:[a("Attendance Overtime"),":"]}),e.jsxs("div",{className:"flex justify-between pl-2",children:[e.jsxs("span",{className:"text-sm",children:[a("OT Hours")," (",s.attendance_overtime_hours,"h)"]}),e.jsx("span",{className:"text-sm",children:t(s.attendance_overtime_amount)})]})]})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"bg-gray-100 px-3 py-2 border-b border-black",children:e.jsx("h3",{className:"font-bold",children:a("Deduction")})}),e.jsxs("div",{className:"p-3 space-y-1",children:[(s.unpaid_leave_deduction>0||s.half_day_deduction>0||s.absent_day_deduction>0)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs font-semibold text-gray-600",children:[a("Leave Deductions"),":"]}),s.unpaid_leave_deduction>0&&e.jsxs("div",{className:"flex justify-between pl-2",children:[e.jsxs("span",{className:"text-sm",children:[a("Unpaid Leave")," (",s.unpaid_leave_days,"d)"]}),e.jsx("span",{className:"text-sm",children:t(s.unpaid_leave_deduction)})]}),s.half_day_deduction>0&&e.jsxs("div",{className:"flex justify-between pl-2",children:[e.jsxs("span",{className:"text-sm",children:[a("Half Days")," (",s.half_days,"d)"]}),e.jsx("span",{className:"text-sm",children:t(s.half_day_deduction)})]}),s.absent_day_deduction>0&&e.jsxs("div",{className:"flex justify-between pl-2",children:[e.jsxs("span",{className:"text-sm",children:[a("Absent Days")," (",s.absent_days,"d)"]}),e.jsx("span",{className:"text-sm",children:t(s.absent_day_deduction)})]})]}),Object.keys(s.deductions_breakdown||{}).length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs font-semibold text-gray-600 pt-1",children:[a("Other Deductions"),":"]}),Object.entries(s.deductions_breakdown||{}).map(([l,i])=>e.jsxs("div",{className:"flex justify-between pl-2",children:[e.jsx("span",{className:"text-sm",children:l}),e.jsx("span",{className:"text-sm",children:t(Number(i))})]},l))]}),Object.keys(s.loans_breakdown||{}).length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs font-semibold text-gray-600 pt-1",children:[a("Loans"),":"]}),Object.entries(s.loans_breakdown||{}).map(([l,i])=>e.jsxs("div",{className:"flex justify-between pl-2",children:[e.jsx("span",{className:"text-sm",children:l}),e.jsx("span",{className:"text-sm",children:t(Number(i))})]},l))]})]})]})]}),e.jsxs("div",{className:"mt-2 space-y-2",children:[e.jsxs("div",{className:"px-3 py-3 flex justify-between items-center",children:[e.jsxs("span",{children:[e.jsx("span",{className:"font-bold",children:a("Gross Pay")})," (Basic + Allowances + Overtimes - Leave Deductions)"]}),e.jsx("span",{className:"font-bold",children:t(s.gross_pay)})]}),e.jsxs("div",{className:"px-3 py-3 flex justify-between items-center",children:[e.jsxs("span",{children:[e.jsx("span",{className:"font-bold",children:a("Net Pay")})," (Gross - Deductions)"]}),e.jsx("span",{className:"font-bold",children:t(s.net_pay)})]})]})]})}),e.jsx("div",{className:"mt-4 w-48",children:e.jsx("div",{className:"bg-white border border-black rounded-lg p-3 flex items-center justify-center min-h-[4rem] text-center",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-black",children:a("Net Salary")}),e.jsx("div",{className:"text-xl font-bold text-black",children:t(s.net_pay)})]})})}),e.jsxs("div",{className:"mt-6 flex justify-between items-end",children:[e.jsx("div",{className:"text-center flex-1",children:e.jsx("p",{className:"text-xs text-gray-600",children:a("This is a computer generated payslip and does not require signature.")})}),e.jsxs("div",{className:"text-right text-sm text-gray-600 max-w-xs",children:[e.jsx("div",{className:"font-semibold",children:n("company_name")||"YOUR COMPANY"}),n("company_address")&&e.jsx("div",{children:n("company_address")}),(n("company_city")||n("company_state")||n("company_zipcode"))&&e.jsxs("div",{children:[n("company_city"),n("company_state")&&`, ${n("company_state")}`," ",n("company_zipcode")]}),n("company_country")&&e.jsx("div",{children:n("company_country")}),n("company_telephone")&&e.jsxs("div",{children:[a("Ph"),": ",n("company_telephone")]}),n("company_email")&&e.jsx("div",{children:n("company_email")})]})]})]}),e.jsx("style",{children:`
                body {
                    -webkit-print-color-adjust: exact;
                    color-adjust: exact;
                    font-family: Arial, sans-serif;
                }

                @page {
                    margin: 0.25in;
                    size: A4;
                }

                .payslip-container {
                    max-width: 100%;
                    margin: 0;
                    box-shadow: none;
                }

                @media print {
                    body {
                        background: white;
                    }

                    .payslip-container {
                        box-shadow: none;
                    }
                }
            `})]})}export{T as default};
