import{j as e}from"./ui-ZHFf5B17.js";import{S as h,x as b,a as g}from"./app-BBiA4mAE.js";import{r as n}from"./vendor-CcMVubkO.js";import{C as j,a as f,b as y,c as N}from"./card-DHszHnbI.js";import{B as v}from"./button-DYC7yMVq.js";import{u as w}from"./useTranslation-CV4_gBnb.js";/* empty css            */import"./utils-DrcJ8Itn.js";import"./utils-B-dksMZM.js";import"./index-BMyiKApA.js";function I({hasUpdates:o,pendingMigrations:i}){const{t:s}=w(),[m,c]=n.useState(!1),[t,u]=n.useState(!1),[x,l]=n.useState(""),p=async()=>{var r,a;c(!0),l("");try{const d=await g.post(route("updater.update"));d.data.success?(u(!0),setTimeout(()=>{window.location.href=route("dashboard")},2e3)):l(d.data.message)}catch(d){l(((a=(r=d.response)==null?void 0:r.data)==null?void 0:a.message)||"Update failed")}finally{c(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(h,{title:s("System Updater")}),e.jsx("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:e.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-2xl",children:e.jsxs(j,{children:[e.jsx(f,{children:e.jsx(y,{children:s("System Updater")})}),e.jsxs(N,{children:[x&&e.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-md",children:e.jsx("p",{className:"text-red-700",children:x})}),t&&e.jsxs("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-md",children:[e.jsx("p",{className:"text-green-700",children:s("System updated successfully!")}),e.jsx("p",{className:"text-sm text-green-600 mt-1",children:s("Redirecting to dashboard...")})]}),!o&&!t?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-green-600 text-6xl mb-4",children:"✓"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:s("System is up to date")}),e.jsx("p",{className:"text-gray-600",children:s("No pending migrations found. Your system is running the latest version.")})]}):t?null:e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:s("Pending Updates")}),e.jsx("p",{className:"text-gray-600 mb-4",children:s("The following database migrations are pending and need to be executed:")}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:[e.jsxs("h4",{className:"font-medium text-blue-900 mb-2",children:[s("Migrations to run")," (",i.length,"):"]}),e.jsx("div",{className:"max-h-40 overflow-y-auto",children:i.map((r,a)=>e.jsxs("div",{className:"text-sm text-blue-800 py-1",children:["• ",r]},a))})]})]}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md p-4 mb-6",children:[e.jsxs("h4",{className:"font-semibold text-yellow-800 mb-2",children:[s("Important Notice"),":"]}),e.jsxs("ul",{className:"text-sm text-yellow-700 space-y-1",children:[e.jsxs("li",{children:["• ",s("Please backup your database before proceeding")]}),e.jsxs("li",{children:["• ",s("The update process may take a few minutes")]}),e.jsxs("li",{children:["• ",s("Do not close this page during the update")]})]})]})]}),e.jsxs("div",{className:"flex justify-between",children:[o&&!t&&e.jsx(v,{onClick:p,disabled:m,className:"bg-blue-600 hover:bg-blue-700",children:m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),s("Updating...")]}):s("Run Update")}),t&&e.jsx(b,{href:route("dashboard"),className:"py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700",children:s("Continue to Dashboard")})]})]})]})})})]})}export{I as default};
