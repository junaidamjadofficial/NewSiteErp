import{j as e}from"./ui-ZHFf5B17.js";import{G as _,S as N,x as y}from"./app-BBiA4mAE.js";import{L as i}from"./label-DbqhUtKI.js";import{I as l}from"./input-DqOfVTcn.js";import{B as p}from"./button-DYC7yMVq.js";import{I as d}from"./input-error-DuIbBMgZ.js";import{C as f,a as C,b as w,c as S}from"./card-DHszHnbI.js";import{S as x,a as h,b as u,c as b,d as m}from"./select-BEhl2QER.js";import{u as q}from"./useTranslation-CV4_gBnb.js";import"./vendor-CcMVubkO.js";/* empty css            */import"./index-BMyiKApA.js";import"./utils-B-dksMZM.js";import"./utils-DrcJ8Itn.js";import"./index-BdQq_4o_.js";import"./index-BYFX2qNQ.js";import"./index-BZAHB8Ku.js";import"./chevron-down-Zr-tNTku.js";import"./createLucideIcon-Dov4NOxw.js";import"./search-Chs14P_a.js";import"./check-DUlQPeVG.js";function W({timezones:j}){const{t:a}=q(),{data:r,setData:t,post:g,processing:c,errors:n}=_({app_name:"ERPGo SaaS",app_url:window.location.origin,app_timezone:"UTC",db_connection:"mysql",db_host:"127.0.0.1",db_port:"3306",db_database:"",db_username:"",db_password:""}),v=s=>{s.preventDefault(),g(route("installer.environment.store"),{forceFormData:!0,onSuccess:()=>{console.log("Environment saved successfully"),window.location.href=route("installer.database")},onError:o=>{console.log("Validation errors:",o)}})};return e.jsxs(e.Fragment,{children:[e.jsx(N,{title:a("Installation - Environment")}),e.jsx("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:e.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-2xl",children:e.jsxs(f,{children:[e.jsx(C,{children:e.jsx(w,{children:a("Environment Configuration")})}),e.jsx(S,{children:e.jsxs("form",{onSubmit:v,className:"space-y-6",children:[c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-4"}),e.jsx("p",{children:a("Configuring environment...")})]})}),Object.keys(n).length>0&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mb-4",children:[e.jsx("h3",{className:"font-semibold text-red-800 mb-2",children:"Validation Errors:"}),Object.entries(n).map(([s,o])=>e.jsxs("div",{className:"text-sm text-red-700 mb-1",children:[e.jsxs("strong",{children:[s,":"]})," ",Array.isArray(o)?o[0]:o]},s))]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"app_name",children:a("Application Name")}),e.jsx(l,{id:"app_name",type:"text",value:r.app_name,onChange:s=>t("app_name",s.target.value),className:"h-11",required:!0}),e.jsx(d,{message:n.app_name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"app_url",children:a("Application URL")}),e.jsx(l,{id:"app_url",type:"url",value:r.app_url,onChange:s=>t("app_url",s.target.value),className:"h-11",required:!0}),e.jsx(d,{message:n.app_url})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:a("Timezone")}),e.jsxs(x,{value:r.app_timezone,onValueChange:s=>t("app_timezone",s),children:[e.jsx(h,{className:"h-11",children:e.jsx(u,{placeholder:"Select timezone"})}),e.jsx(b,{searchable:!0,children:j.map(s=>e.jsx(m,{value:s,children:s},s))})]}),e.jsx(d,{message:n.app_timezone})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:a("Database Connection")}),e.jsxs(x,{value:r.db_connection,onValueChange:s=>t("db_connection",s),children:[e.jsx(h,{className:"h-11",children:e.jsx(u,{})}),e.jsxs(b,{children:[e.jsx(m,{value:"mysql",children:"MySQL"}),e.jsx(m,{value:"pgsql",children:"PostgreSQL"}),e.jsx(m,{value:"sqlite",children:"SQLite"})]})]})]}),r.db_connection!=="sqlite"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"db_host",children:a("Database Host")}),e.jsx(l,{id:"db_host",type:"text",value:r.db_host,onChange:s=>t("db_host",s.target.value),className:"h-11",required:!0}),e.jsx(d,{message:n.db_host})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"db_port",children:a("Database Port")}),e.jsx(l,{id:"db_port",type:"number",value:r.db_port,onChange:s=>t("db_port",s.target.value),className:"h-11",required:!0}),e.jsx(d,{message:n.db_port})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"db_username",children:a("Database Username")}),e.jsx(l,{id:"db_username",type:"text",value:r.db_username,onChange:s=>t("db_username",s.target.value),className:"h-11",required:!0}),e.jsx(d,{message:n.db_username})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"db_password",children:a("Database Password")}),e.jsx(l,{id:"db_password",type:"password",value:r.db_password,onChange:s=>t("db_password",s.target.value),className:"h-11"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"db_database",children:a("Database Name")}),e.jsx(l,{id:"db_database",type:"text",value:r.db_database,onChange:s=>t("db_database",s.target.value),className:"h-11",required:!0}),e.jsx(d,{message:n.db_database})]}),e.jsxs("div",{className:"flex justify-between pt-4",children:[e.jsx(p,{variant:"outline",asChild:!0,children:e.jsx(y,{href:route("installer.permissions"),children:a("Back")})}),e.jsx(p,{type:"submit",className:"py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50",disabled:c,onClick:s=>{console.log("Button clicked, processing:",c)},children:a(c?"Saving...":"Next")})]})]})})]})})})]})}export{W as default};
