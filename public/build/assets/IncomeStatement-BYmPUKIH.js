import{j as e}from"./ui-ZHFf5B17.js";import{r as o}from"./vendor-CcMVubkO.js";import{X as f,a as v}from"./app-BBiA4mAE.js";import{B as p}from"./button-DYC7yMVq.js";import{C as D,c as h}from"./card-DHszHnbI.js";import{D as g}from"./date-picker-CVthJV3y.js";import{a as j,f as l}from"./helpers-QYnGjXad.js";import{N as _}from"./no-records-found-C2RGIdAh.js";import{u as w}from"./useTranslation-CV4_gBnb.js";import{P as S}from"./printer-BDwaclJ1.js";import{F as C}from"./file-text-BmYvzZ5U.js";/* empty css            */import"./index-BMyiKApA.js";import"./utils-B-dksMZM.js";import"./utils-DrcJ8Itn.js";import"./react-datepicker-BHcKmBHW.js";import"./popover-fYI5j510.js";import"./calendar-DvmJ2XsD.js";import"./createLucideIcon-Dov4NOxw.js";import"./plus-C1hmRCnY.js";function U({financialYear:r}){const{t}=w(),{auth:F}=f().props,[d,N]=o.useState((r==null?void 0:r.year_start_date)||""),[m,b]=o.useState((r==null?void 0:r.year_end_date)||""),[s,u]=o.useState(null),[n,i]=o.useState(!1),x=async()=>{i(!0);try{const a=await v.get(route("account.reports.income-statement"),{params:{from_date:d,to_date:m}});u(a.data)}catch(a){console.error("Error:",a)}finally{i(!1)}};o.useEffect(()=>{x()},[]);const y=()=>{window.open(route("account.reports.income-statement.print")+`?from_date=${d}&to_date=${m}&download=pdf`,"_blank")};return e.jsxs(D,{className:"shadow-sm",children:[e.jsx(h,{className:"p-6 border-b bg-gray-50/50",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("From Date")}),e.jsx(g,{value:d,onChange:N,placeholder:t("Select from date")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("To Date")}),e.jsx(g,{value:m,onChange:b,placeholder:t("Select to date")})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx(p,{onClick:x,disabled:n,size:"sm",children:t(n?"Loading...":"Generate")}),s&&e.jsxs(p,{variant:"outline",size:"sm",onClick:y,className:"gap-2",children:[e.jsx(S,{className:"h-4 w-4"}),t("Download PDF")]})]})]})}),e.jsx(h,{className:"p-0",children:s?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-4 bg-gray-50 border-b",children:[e.jsx("h3",{className:"font-semibold text-lg",children:t("Income Statement")}),e.jsxs("p",{className:"text-sm text-gray-600",children:[j(s.from_date)," ",t("to")," ",j(s.to_date)]})]}),e.jsx("div",{className:"overflow-y-auto max-h-[60vh]",children:e.jsx("table",{className:"w-full",children:e.jsxs("tbody",{children:[e.jsxs("tr",{className:"bg-blue-50",children:[e.jsx("td",{className:"px-4 py-3 font-semibold",children:t("Revenue")}),e.jsx("td",{className:"px-4 py-3 text-right"})]}),s.revenue.map((a,c)=>e.jsxs("tr",{className:"border-t hover:bg-gray-50",children:[e.jsx("td",{className:"px-8 py-2",children:a.category}),e.jsx("td",{className:"px-4 py-2 text-right",children:l(a.amount)})]},c)),e.jsxs("tr",{className:"bg-gray-100 font-semibold border-t-2",children:[e.jsx("td",{className:"px-4 py-3",children:t("Total Revenue")}),e.jsx("td",{className:"px-4 py-3 text-right",children:l(s.total_revenue)})]}),e.jsxs("tr",{className:"bg-blue-50",children:[e.jsx("td",{className:"px-4 py-3 font-semibold",children:t("Expenses")}),e.jsx("td",{className:"px-4 py-3 text-right"})]}),s.expenses.map((a,c)=>e.jsxs("tr",{className:"border-t hover:bg-gray-50",children:[e.jsx("td",{className:"px-8 py-2",children:a.category}),e.jsx("td",{className:"px-4 py-2 text-right",children:l(a.amount)})]},c)),e.jsxs("tr",{className:"bg-gray-100 font-semibold border-t-2",children:[e.jsx("td",{className:"px-4 py-3",children:t("Total Expenses")}),e.jsx("td",{className:"px-4 py-3 text-right",children:l(s.total_expenses)})]}),e.jsxs("tr",{className:`font-bold border-t-4 ${s.net_income>=0?"bg-green-50":"bg-red-50"}`,children:[e.jsx("td",{className:"px-4 py-4 text-lg",children:t("Net Income")}),e.jsx("td",{className:"px-4 py-4 text-lg text-right",children:l(s.net_income)})]})]})})})]}):e.jsx(_,{icon:C,title:t("Income Statement"),description:t("Select date range to generate the report"),className:"h-auto py-12"})})]})}export{U as default};
