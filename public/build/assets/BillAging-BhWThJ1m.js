import{j as s}from"./ui-ZHFf5B17.js";import{r as i}from"./vendor-CcMVubkO.js";import{X as N,a as u}from"./app-BBiA4mAE.js";import{B as p}from"./button-DYC7yMVq.js";import{C as b,c as h}from"./card-DHszHnbI.js";import{D as _}from"./date-picker-CVthJV3y.js";import{a as D,f as e}from"./helpers-QYnGjXad.js";import{N as v}from"./no-records-found-C2RGIdAh.js";import{u as w}from"./useTranslation-CV4_gBnb.js";import{P as C}from"./printer-BDwaclJ1.js";import{F as k}from"./file-text-BmYvzZ5U.js";/* empty css            */import"./index-BMyiKApA.js";import"./utils-B-dksMZM.js";import"./utils-DrcJ8Itn.js";import"./react-datepicker-BHcKmBHW.js";import"./popover-fYI5j510.js";import"./calendar-DvmJ2XsD.js";import"./createLucideIcon-Dov4NOxw.js";import"./plus-C1hmRCnY.js";function M({financialYear:l}){var c,x;const{t}=w(),{auth:g}=N().props,[o,y]=i.useState((l==null?void 0:l.year_end_date)||""),[a,j]=i.useState(null),[d,m]=i.useState(!1),n=async()=>{m(!0);try{const r=await u.get(route("account.reports.bill-aging"),{params:{as_of_date:o}});j(r.data)}catch(r){console.error("Error:",r)}finally{m(!1)}};return i.useEffect(()=>{n()},[]),s.jsxs(b,{className:"shadow-sm",children:[s.jsx(h,{className:"p-6 border-b bg-gray-50/50",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("As Of Date")}),s.jsx(_,{value:o,onChange:y,placeholder:t("Select date")})]}),s.jsxs("div",{className:"flex items-end gap-2",children:[s.jsx(p,{onClick:n,disabled:d,size:"sm",children:t(d?"Loading...":"Generate")}),a&&((x=(c=g.user)==null?void 0:c.permissions)==null?void 0:x.includes("print-bill-aging"))&&s.jsxs(p,{variant:"outline",size:"sm",onClick:()=>window.open(route("account.reports.bill-aging.print")+`?as_of_date=${o}&download=pdf`,"_blank"),className:"gap-2",children:[s.jsx(C,{className:"h-4 w-4"}),t("Download PDF")]})]})]})}),s.jsx(h,{className:"p-0",children:a&&a.vendors.length>0?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"p-4 bg-gray-50 border-b",children:[s.jsx("h3",{className:"font-semibold text-lg",children:t("Bill Aging Report")}),s.jsxs("p",{className:"text-sm text-gray-600",children:[t("As of")," ",D(a.as_of_date)]})]}),s.jsx("div",{className:"overflow-y-auto max-h-[60vh]",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-100 sticky top-0",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:t("Vendor")}),s.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold",children:t("Current")}),s.jsxs("th",{className:"px-4 py-3 text-right text-sm font-semibold",children:["1-30 ",t("Days")]}),s.jsxs("th",{className:"px-4 py-3 text-right text-sm font-semibold",children:["31-60 ",t("Days")]}),s.jsxs("th",{className:"px-4 py-3 text-right text-sm font-semibold",children:["61-90 ",t("Days")]}),s.jsxs("th",{className:"px-4 py-3 text-right text-sm font-semibold",children:[">90 ",t("Days")]}),s.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold",children:t("Total")})]})}),s.jsxs("tbody",{children:[a.vendors.map((r,f)=>s.jsxs("tr",{className:"border-t hover:bg-gray-50",children:[s.jsx("td",{className:"px-4 py-3",children:r.vendor_name}),s.jsx("td",{className:"px-4 py-3 text-right",children:e(r.current)}),s.jsx("td",{className:"px-4 py-3 text-right",children:e(r["1_30_days"])}),s.jsx("td",{className:"px-4 py-3 text-right",children:e(r["31_60_days"])}),s.jsx("td",{className:"px-4 py-3 text-right",children:e(r["61_90_days"])}),s.jsx("td",{className:"px-4 py-3 text-right",children:e(r.over_90_days)}),s.jsx("td",{className:"px-4 py-3 text-right font-semibold",children:e(r.total)})]},f)),s.jsxs("tr",{className:"bg-gray-200 font-bold border-t-4",children:[s.jsx("td",{className:"px-4 py-4",children:t("Total")}),s.jsx("td",{className:"px-4 py-4 text-right",children:e(a.aging_summary.current)}),s.jsx("td",{className:"px-4 py-4 text-right",children:e(a.aging_summary["1_30_days"])}),s.jsx("td",{className:"px-4 py-4 text-right",children:e(a.aging_summary["31_60_days"])}),s.jsx("td",{className:"px-4 py-4 text-right",children:e(a.aging_summary["61_90_days"])}),s.jsx("td",{className:"px-4 py-4 text-right",children:e(a.aging_summary.over_90_days)}),s.jsx("td",{className:"px-4 py-4 text-right",children:e(a.aging_summary.total)})]})]})]})})]}):s.jsx(v,{icon:k,title:t("Bill Aging Report"),description:t("No outstanding bills found"),className:"h-auto py-12"})})]})}export{M as default};
