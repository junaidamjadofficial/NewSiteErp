import{j as e}from"./ui-ZHFf5B17.js";import{r as a}from"./vendor-CcMVubkO.js";import{X as v}from"./app-BBiA4mAE.js";import{B as C}from"./button-DYC7yMVq.js";import{C as k}from"./checkbox-Cvtgzug2.js";import{R as E}from"./rich-text-editor-59agrfWF.js";import{M as T}from"./MediaPicker-CztOgrDm.js";import{u as A}from"./useTranslation-CV4_gBnb.js";import{S as I}from"./send-J2b8i-sO.js";/* empty css            */import"./index-BMyiKApA.js";import"./utils-B-dksMZM.js";import"./utils-DrcJ8Itn.js";import"./index-BYFX2qNQ.js";import"./check-DUlQPeVG.js";import"./createLucideIcon-Dov4NOxw.js";import"./index-DaFL_H0m.js";import"./with-selector-CP8JaRn2.js";import"./undo-D3tFEvb3.js";import"./list-BVwWsOhE.js";import"./link-2Bt5o4zZ.js";import"./input-DqOfVTcn.js";import"./label-DbqhUtKI.js";import"./dialog-BLwxprq_.js";import"./x-DVK_F_Gh.js";import"./badge-CV60sqBJ.js";import"./image-C8M1mNs8.js";import"./plus-C1hmRCnY.js";import"./search-Chs14P_a.js";import"./upload-KhHqnUys.js";import"./helpers-QYnGjXad.js";function le({ticketId:y,onReplyAdded:g,disabled:o}){var u;const{t:r}=A(),[i,m]=a.useState(""),[l,p]=a.useState([]),[c,d]=a.useState(!1),[s,h]=a.useState(!1),[j,S]=a.useState(0),{auth:N}=v().props,b=async t=>{var x;if(t.preventDefault(),!(!i.trim()||s)){h(!0);try{const n={message:i,is_internal:c,attachments:l||null},f=await(await fetch(route("helpdesk-replies.store",y),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((x=document.querySelector('meta[name="csrf-token"]'))==null?void 0:x.getAttribute("content"))||""},body:JSON.stringify(n)})).json();f.success?(m(""),p([]),d(!1),S(w=>w+1),g(f.reply)):console.error("Failed to send reply")}catch(n){console.error("Error sending reply:",n)}finally{h(!1)}}};return e.jsx("div",{className:"border-t bg-gray-50/50 p-3",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"relative",children:e.jsx(E,{content:i,onChange:t=>m(t),placeholder:r("Type your message..."),disabled:o||s,className:"min-h-[80px]",onKeyDown:t=>{t.stopPropagation()}},j)}),e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("div",{className:"flex items-center gap-1",children:e.jsx(T,{label:"",value:l,onChange:t=>p(Array.isArray(t)?t:[t].filter(Boolean)),multiple:!0,placeholder:r("Attach"),showPreview:!1,disabled:o||s})}),((u=N.user)==null?void 0:u.type)==="superadmin"&&e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(k,{id:"is_internal",checked:c,onCheckedChange:t=>d(!!t),disabled:o||s,className:"h-4 w-4"}),e.jsx("label",{htmlFor:"is_internal",className:"text-xs text-gray-600 cursor-pointer whitespace-nowrap",children:r("Internal")})]})]}),e.jsxs(C,{type:"button",onClick:b,disabled:!i.trim()||o||s,size:"sm",className:"flex items-center gap-1.5 px-4 py-2 h-8",children:[e.jsx(I,{className:"h-3.5 w-3.5"}),e.jsx("span",{className:"text-xs font-medium",children:r(s?"Sending...":"Send")})]})]})]})})}export{le as default};
