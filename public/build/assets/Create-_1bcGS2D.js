import{j as e}from"./ui-ZHFf5B17.js";import{a as E,b as F,c as T}from"./dialog-BLwxprq_.js";import{X as y,G as D}from"./app-BBiA4mAE.js";import{B as _}from"./button-DYC7yMVq.js";import{L as a}from"./label-DbqhUtKI.js";import{I as l}from"./input-error-DuIbBMgZ.js";import{T as x}from"./textarea-DxQ_BnuT.js";import{S,a as C,b,c as I,d as o}from"./select-BEhl2QER.js";import{M as V}from"./multi-select-enhanced-C0hF2-Yw.js";import{R as g}from"./rating-CvplBioO.js";import{r as k}from"./vendor-CcMVubkO.js";import{u as H}from"./useTranslation-CV4_gBnb.js";import"./utils-DrcJ8Itn.js";import"./utils-B-dksMZM.js";import"./x-DVK_F_Gh.js";import"./createLucideIcon-Dov4NOxw.js";/* empty css            */import"./index-BMyiKApA.js";import"./index-BdQq_4o_.js";import"./index-BYFX2qNQ.js";import"./index-BZAHB8Ku.js";import"./input-DqOfVTcn.js";import"./chevron-down-Zr-tNTku.js";import"./search-Chs14P_a.js";import"./check-DUlQPeVG.js";import"./popover-fYI5j510.js";import"./badge-CV60sqBJ.js";import"./star-D9yXa3BZ.js";function me({onSuccess:v}){var p,w;const{interviews:c,users:d}=y().props,[m,h]=k.useState(d||[]),{t:r}=H(),{data:i,setData:s,post:N,processing:j,errors:n}=D({technical_rating:"",communication_rating:"",cultural_fit_rating:"",overall_rating:"",strengths:"",weaknesses:"",comments:"",recommendation:"0",interview_id:"",interviewer_ids:[]});k.useEffect(()=>{if(i.interview_id){const t=c.find(u=>u.id.toString()===i.interview_id);if(t&&t.interviewers&&t.interviewers.length>0){const u=d.filter(f=>t.interviewers.includes(f.name)||t.interviewers.includes(f.id.toString()));h(u)}else h([]);s("interviewer_ids",[])}else h([]),s("interviewer_ids",[])},[i.interview_id,c,d]);const R=t=>{t.preventDefault(),N(route("recruitment.interview-feedbacks.store"),{onSuccess:()=>{v()}})};return e.jsxs(E,{children:[e.jsx(F,{children:e.jsx(T,{children:r("Create Interview Feedback")})}),e.jsxs("form",{onSubmit:R,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs(a,{htmlFor:"interview_id",required:!0,children:[r("Interview")," "]}),e.jsxs(S,{value:((p=i.interview_id)==null?void 0:p.toString())||"",onValueChange:t=>s("interview_id",t),children:[e.jsx(C,{children:e.jsx(b,{placeholder:r("Select Interview")})}),e.jsx(I,{children:c.map(t=>e.jsx(o,{value:t.id.toString(),children:t.name},t.id))})]}),e.jsx(l,{message:n.interview_id}),(!c||c.length===0)&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[r("Create interview here. "),e.jsx("a",{href:route("recruitment.interviews.index"),className:"text-blue-600 hover:text-blue-800 cursor-pointer",children:r("interview")}),"."]})]}),e.jsxs("div",{children:[e.jsxs(a,{required:!0,children:[r("Interviewers")," "]}),e.jsx(V,{options:m.map(t=>({value:t.id.toString(),label:t.name})),value:i.interviewer_ids,onValueChange:t=>s("interviewer_ids",t),placeholder:i.interview_id?m.length===0?r("No interviewers available"):r("Select Interviewers..."):r("Select Interview first"),searchable:!0,disabled:!i.interview_id||m.length===0}),e.jsx(l,{message:n.interviewer_ids}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:r("Interviewers are filtered based on selected interview.")}),(!m||m.length===0)&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[r("Create user here. "),e.jsx("a",{href:route("users.index"),className:"text-blue-600 hover:text-blue-800 cursor-pointer",children:r("Create User")}),"."]})]}),e.jsxs("div",{children:[e.jsx(a,{children:r("Technical Rating")}),e.jsx(g,{value:Number(i.technical_rating)||0,onChange:t=>s("technical_rating",t.toString())}),e.jsx(l,{message:n.technical_rating})]}),e.jsxs("div",{children:[e.jsx(a,{children:r("Communication Rating")}),e.jsx(g,{value:Number(i.communication_rating)||0,onChange:t=>s("communication_rating",t.toString())}),e.jsx(l,{message:n.communication_rating})]}),e.jsxs("div",{children:[e.jsx(a,{children:r("Cultural Fit Rating")}),e.jsx(g,{value:Number(i.cultural_fit_rating)||0,onChange:t=>s("cultural_fit_rating",t.toString())}),e.jsx(l,{message:n.cultural_fit_rating})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"recommendation",children:r("Recommendation")}),e.jsxs(S,{value:((w=i.recommendation)==null?void 0:w.toString())||"0",onValueChange:t=>s("recommendation",t),children:[e.jsx(C,{children:e.jsx(b,{})}),e.jsxs(I,{children:[e.jsx(o,{value:"0",children:r("Strong Hire")}),e.jsx(o,{value:"1",children:r("Hire")}),e.jsx(o,{value:"2",children:r("Maybe")}),e.jsx(o,{value:"3",children:r("Reject")}),e.jsx(o,{value:"4",children:r("Strong Reject")})]})]}),e.jsx(l,{message:n.recommendation})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"strengths",children:r("Strengths")}),e.jsx(x,{id:"strengths",value:i.strengths,onChange:t=>s("strengths",t.target.value),placeholder:r("Enter Strengths"),rows:3}),e.jsx(l,{message:n.strengths})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"weaknesses",children:r("Weaknesses")}),e.jsx(x,{id:"weaknesses",value:i.weaknesses,onChange:t=>s("weaknesses",t.target.value),placeholder:r("Enter Weaknesses"),rows:3}),e.jsx(l,{message:n.weaknesses})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"comments",children:r("Comments")}),e.jsx(x,{id:"comments",value:i.comments,onChange:t=>s("comments",t.target.value),placeholder:r("Enter Comments"),rows:3}),e.jsx(l,{message:n.comments})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(_,{type:"button",variant:"outline",onClick:v,children:r("Cancel")}),e.jsx(_,{type:"submit",disabled:j,children:r(j?"Creating...":"Create")})]})]})]})}export{me as default};
