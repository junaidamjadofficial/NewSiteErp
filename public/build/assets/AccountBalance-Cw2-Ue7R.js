import{j as e}from"./ui-ZHFf5B17.js";import{r as c}from"./vendor-CcMVubkO.js";import{X as D,a as E}from"./app-BBiA4mAE.js";import{B as p}from"./button-DYC7yMVq.js";import{C as T,c as v}from"./card-DHszHnbI.js";import{S as B,a as $,b as F,c as z,d as i}from"./select-BEhl2QER.js";import{D as L}from"./date-picker-CVthJV3y.js";import{C as P}from"./checkbox-Cvtgzug2.js";import{L as R}from"./label-DbqhUtKI.js";import{a as O,f as r}from"./helpers-QYnGjXad.js";import{N as q}from"./no-records-found-C2RGIdAh.js";import{u as Z}from"./useTranslation-CV4_gBnb.js";import{P as G}from"./printer-BDwaclJ1.js";import{F as V}from"./file-text-BmYvzZ5U.js";/* empty css            */import"./index-BMyiKApA.js";import"./utils-B-dksMZM.js";import"./utils-DrcJ8Itn.js";import"./index-BdQq_4o_.js";import"./index-BYFX2qNQ.js";import"./index-BZAHB8Ku.js";import"./input-DqOfVTcn.js";import"./chevron-down-Zr-tNTku.js";import"./createLucideIcon-Dov4NOxw.js";import"./search-Chs14P_a.js";import"./check-DUlQPeVG.js";import"./react-datepicker-BHcKmBHW.js";import"./popover-fYI5j510.js";import"./calendar-DvmJ2XsD.js";import"./plus-C1hmRCnY.js";function fe({financialYear:o}){var f,N;const{t:s}=Z(),{auth:_}=D().props,[d,h]=c.useState((o==null?void 0:o.year_end_date)||""),[m,b]=c.useState(""),[x,j]=c.useState(!1),[a,S]=c.useState(null),[u,g]=c.useState(!1),y=async()=>{g(!0);try{const t=await E.get(route("double-entry.reports.account-balance"),{params:{as_of_date:d,account_type:m,show_zero_balances:x}});S(t.data)}catch(t){console.error("Error fetching account balance:",t)}finally{g(!1)}};c.useEffect(()=>{y()},[]);const w=()=>{const t=route("double-entry.reports.account-balance.print")+`?as_of_date=${d}&account_type=${m}&show_zero_balances=${x}&download=pdf`;window.open(t,"_blank")},C=()=>{h((o==null?void 0:o.year_end_date)||""),b(""),j(!1)},A={Assets:"bg-blue-50",Liabilities:"bg-red-50",Equity:"bg-green-50",Revenue:"bg-purple-50",Expenses:"bg-orange-50"};return e.jsxs(T,{className:"shadow-sm",children:[e.jsx(v,{className:"p-6 border-b bg-gray-50/50",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:s("As of Date")}),e.jsx(L,{value:d,onChange:h,placeholder:s("Select date")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:s("Account Type")}),e.jsxs(B,{value:m,onValueChange:b,children:[e.jsx($,{children:e.jsx(F,{placeholder:s("All Types")})}),e.jsxs(z,{children:[e.jsx(i,{value:" ",children:s("All Types")}),e.jsx(i,{value:"Assets",children:s("Assets")}),e.jsx(i,{value:"Liabilities",children:s("Liabilities")}),e.jsx(i,{value:"Equity",children:s("Equity")}),e.jsx(i,{value:"Revenue",children:s("Revenue")}),e.jsx(i,{value:"Expenses",children:s("Expenses")})]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(P,{id:"show-zero",checked:x,onCheckedChange:t=>j(t)}),e.jsx(R,{htmlFor:"show-zero",className:"text-sm",children:s("Show Zero Balances")})]})}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx(p,{onClick:y,disabled:u,size:"sm",children:s(u?"Loading...":"Generate")}),e.jsx(p,{variant:"outline",onClick:C,size:"sm",children:s("Clear")}),a&&((N=(f=_.user)==null?void 0:f.permissions)==null?void 0:N.includes("print-account-balance"))&&e.jsxs(p,{variant:"outline",size:"sm",onClick:w,className:"gap-2",children:[e.jsx(G,{className:"h-4 w-4"}),s("Download PDF")]})]})]})}),e.jsx(v,{className:"p-0",children:a&&Object.keys(a.grouped).length>0?e.jsx("div",{className:"overflow-y-auto scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-100 max-h-[60vh] w-full",children:e.jsxs("div",{className:"min-w-[900px]",children:[a.as_of_date&&e.jsxs("div",{className:"p-4 bg-gray-50 border-b",children:[e.jsx("h3",{className:"font-semibold text-lg",children:s("Account Balance Summary")}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s("As of"),": ",O(a.as_of_date)]})]}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100 sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:s("Account Code")}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:s("Account Name")}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:s("Type")}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold",children:s("Debit")}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold",children:s("Credit")}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold",children:s("Net Balance")})]})}),e.jsxs("tbody",{children:[Object.entries(a.grouped).map(([t,n])=>e.jsxs(e.Fragment,{children:[e.jsx("tr",{className:`${A[t]||"bg-gray-50"} font-semibold`,children:e.jsx("td",{colSpan:6,className:"px-4 py-2 text-sm",children:s(t)})},`header-${t}`),n.accounts.map((l,k)=>e.jsxs("tr",{className:"border-t hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2 text-sm",children:l.account_code}),e.jsx("td",{className:"px-4 py-2 text-sm",children:l.account_name}),e.jsx("td",{className:"px-4 py-2 text-sm",children:s(t)}),e.jsx("td",{className:"px-4 py-2 text-sm text-right",children:l.debit>0?r(l.debit):"-"}),e.jsx("td",{className:"px-4 py-2 text-sm text-right",children:l.credit>0?r(l.credit):"-"}),e.jsx("td",{className:"px-4 py-2 text-sm text-right font-medium",children:r(l.net_balance)})]},`${t}-${k}`)),e.jsxs("tr",{className:"bg-gray-100 font-semibold border-t-2",children:[e.jsxs("td",{colSpan:3,className:"px-4 py-3 text-sm",children:[s("Subtotal")," - ",s(t)]}),e.jsx("td",{className:"px-4 py-3 text-sm text-right",children:r(n.subtotal_debit)}),e.jsx("td",{className:"px-4 py-3 text-sm text-right",children:r(n.subtotal_credit)}),e.jsx("td",{className:"px-4 py-3 text-sm text-right",children:r(n.subtotal_net)})]},`subtotal-${t}`),e.jsx("tr",{className:"h-2",children:e.jsx("td",{colSpan:6})},`space-${t}`)]})),e.jsxs("tr",{className:"bg-gray-200 font-bold border-t-4 border-gray-800 sticky bottom-0",children:[e.jsx("td",{colSpan:3,className:"px-4 py-3 text-sm",children:s("Grand Total")}),e.jsx("td",{className:"px-4 py-3 text-sm text-right",children:r(a.totals.debit)}),e.jsx("td",{className:"px-4 py-3 text-sm text-right",children:r(a.totals.credit)}),e.jsx("td",{className:"px-4 py-3 text-sm text-right",children:r(a.totals.net)})]})]})]})]})}):e.jsx(q,{icon:V,title:s("Account Balance Summary"),description:s("Select date to generate the report"),className:"h-auto py-12"})})]})}export{fe as default};
