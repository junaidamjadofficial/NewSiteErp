import{j as e}from"./ui-ZHFf5B17.js";import{r as l}from"./vendor-CcMVubkO.js";import{X as w,a as C}from"./app-BBiA4mAE.js";import{B as i}from"./button-DYC7yMVq.js";import{C as _,c as b}from"./card-DHszHnbI.js";import{D as f}from"./date-picker-CVthJV3y.js";import{f as o}from"./helpers-QYnGjXad.js";import{N as F}from"./no-records-found-C2RGIdAh.js";import{u as D}from"./useTranslation-CV4_gBnb.js";import{P as S}from"./printer-BDwaclJ1.js";import{F as k}from"./file-text-BmYvzZ5U.js";/* empty css            */import"./index-BMyiKApA.js";import"./utils-B-dksMZM.js";import"./utils-DrcJ8Itn.js";import"./react-datepicker-BHcKmBHW.js";import"./popover-fYI5j510.js";import"./calendar-DvmJ2XsD.js";import"./createLucideIcon-Dov4NOxw.js";import"./plus-C1hmRCnY.js";function V({financialYear:t}){var g,j;const{t:s}=D(),{auth:N}=w().props,[d,c]=l.useState((t==null?void 0:t.year_start_date)||""),[n,m]=l.useState((t==null?void 0:t.year_end_date)||""),[r,u]=l.useState(null),[x,h]=l.useState(!1),p=async()=>{h(!0);try{const a=await C.get(route("double-entry.reports.cash-flow"),{params:{from_date:d,to_date:n}});u(a.data)}catch(a){console.error("Error fetching cash flow:",a)}finally{h(!1)}};l.useEffect(()=>{p()},[]);const y=()=>{const a=route("double-entry.reports.cash-flow.print")+`?from_date=${d}&to_date=${n}&download=pdf`;window.open(a,"_blank")},v=()=>{c((t==null?void 0:t.year_start_date)||""),m((t==null?void 0:t.year_end_date)||"")};return e.jsxs(_,{className:"shadow-sm",children:[e.jsx(b,{className:"p-6 border-b bg-gray-50/50",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:s("From Date")}),e.jsx(f,{value:d,onChange:c,placeholder:s("Select from date")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:s("To Date")}),e.jsx(f,{value:n,onChange:m,placeholder:s("Select to date")})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx(i,{onClick:p,disabled:x,size:"sm",children:s(x?"Loading...":"Generate")}),e.jsx(i,{variant:"outline",onClick:v,size:"sm",children:s("Clear")}),r&&((j=(g=N.user)==null?void 0:g.permissions)==null?void 0:j.includes("print-cash-flow"))&&e.jsxs(i,{variant:"outline",size:"sm",onClick:y,className:"gap-2",children:[e.jsx(S,{className:"h-4 w-4"}),s("Download PDF")]})]})]})}),e.jsx(b,{className:"p-0",children:r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4 bg-gray-50 border-b",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-white rounded-lg border",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 mb-1",children:s("Beginning Cash")}),e.jsx("p",{className:"text-lg font-bold",children:o(r.beginning_cash)})]}),e.jsxs("div",{className:"text-center p-4 bg-white rounded-lg border",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 mb-1",children:s("Net Cash Flow")}),e.jsx("p",{className:"text-lg font-bold",children:o(r.net_cash_flow)})]}),e.jsxs("div",{className:"text-center p-4 bg-white rounded-lg border",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 mb-1",children:s("Ending Cash")}),e.jsx("p",{className:"text-lg font-bold",children:o(r.ending_cash)})]})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-bold mb-3 text-base",children:s("Cash Flow from Operating Activities")}),e.jsxs("div",{className:"flex justify-between py-2",children:[e.jsx("p",{className:"text-sm",children:s("Net cash from operations")}),e.jsx("p",{className:"text-sm font-semibold",children:o(r.operating)})]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-bold mb-3 text-base",children:s("Cash Flow from Investing Activities")}),e.jsxs("div",{className:"flex justify-between py-2",children:[e.jsx("p",{className:"text-sm",children:s("Net cash from investing")}),e.jsx("p",{className:"text-sm font-semibold",children:o(r.investing)})]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-bold mb-3 text-base",children:s("Cash Flow from Financing Activities")}),e.jsxs("div",{className:"flex justify-between py-2",children:[e.jsx("p",{className:"text-sm",children:s("Net cash from financing")}),e.jsx("p",{className:"text-sm font-semibold",children:o(r.financing)})]})]}),e.jsxs("div",{className:"flex justify-between py-4 border-t-2 border-gray-300 font-bold text-lg",children:[e.jsx("p",{children:s("Net Increase/Decrease in Cash")}),e.jsx("p",{children:o(r.net_cash_flow)})]}),e.jsxs("div",{className:"flex justify-between py-4 border-t-4 border-gray-800 font-bold text-xl",children:[e.jsx("p",{children:s("Ending Cash Balance")}),e.jsx("p",{children:o(r.ending_cash)})]})]})})]}):e.jsx(F,{icon:k,title:s("Cash Flow Statement"),description:s("Select date range to generate the report"),className:"h-auto py-12"})})]})}export{V as default};
