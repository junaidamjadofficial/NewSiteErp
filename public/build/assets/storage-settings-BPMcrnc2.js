import{j as e}from"./ui-ZHFf5B17.js";import{r as n}from"./vendor-CcMVubkO.js";import{B as v}from"./button-DYC7yMVq.js";import{I as d}from"./input-DqOfVTcn.js";import{L as i}from"./label-DbqhUtKI.js";import{T as M,a as D,b as y,c as f}from"./tabs-BdIH_p7Q.js";import{C as X}from"./checkbox-Cvtgzug2.js";import{C as P,a as O,b as q,c as Y}from"./card-DHszHnbI.js";import{A as K}from"./app-BBiA4mAE.js";import{u as H}from"./useTranslation-CV4_gBnb.js";import{H as F}from"./hard-drive-7HjIbMwJ.js";import{S as _}from"./save-B89BgUdM.js";import{S as G}from"./search-Chs14P_a.js";import"./index-BMyiKApA.js";import"./utils-B-dksMZM.js";import"./utils-DrcJ8Itn.js";import"./index-BYFX2qNQ.js";import"./check-DUlQPeVG.js";import"./createLucideIcon-Dov4NOxw.js";/* empty css            */const U=["3dmf","3dm","avi","ai","bin","bmp","cab","c","c++","class","css","csv","cdr","doc","dot","docx","dwg","eps","exe","gif","gz","gtar","flv","fh4","fh5","fhc","help","hlp","html","htm","ico","imap","inf","jpe","jpeg","jpg","js","java","latex","log","m3u","midi","mid","mov","mp4","mp3","mpeg","mpg","mp2","ogg","phtml","php","pdf","pgp","png","pps","ppt","ppz","pot","ps","qt","qd3d","qd3","qxd","rar","ra","ram","rm","rtf","spr","sprite","stream","swf","svg","sgml","sgm","tar","tiff","tif","tgz","tex","txt","vob","wav","wrl","xla","xls","xlc","xml","zip","json","webp"];function xa({userSettings:t,auth:w}){var A,C;const{t:s}=H(),[N,h]=n.useState(!1),c=(C=(A=w==null?void 0:w.user)==null?void 0:A.permissions)==null?void 0:C.includes("edit-storage-settings"),[b,u]=n.useState(""),g=a=>({storageType:(a==null?void 0:a.storageType)||"local",allowedFileTypes:(a==null?void 0:a.allowedFileTypes)||"jpg,png,webp,gif",maxUploadSize:(a==null?void 0:a.maxUploadSize)||"2048",awsAccessKeyId:(a==null?void 0:a.awsAccessKeyId)||"",awsSecretAccessKey:(a==null?void 0:a.awsSecretAccessKey)||"",awsDefaultRegion:(a==null?void 0:a.awsDefaultRegion)||"us-east-1",awsBucket:(a==null?void 0:a.awsBucket)||"",awsUrl:(a==null?void 0:a.awsUrl)||"",awsEndpoint:(a==null?void 0:a.awsEndpoint)||"",wasabiAccessKey:(a==null?void 0:a.wasabiAccessKey)||"",wasabiSecretKey:(a==null?void 0:a.wasabiSecretKey)||"",wasabiRegion:(a==null?void 0:a.wasabiRegion)||"us-east-1",wasabiBucket:(a==null?void 0:a.wasabiBucket)||"",wasabiUrl:(a==null?void 0:a.wasabiUrl)||"",wasabiRoot:(a==null?void 0:a.wasabiRoot)||""}),[l,m]=n.useState(()=>g(t));n.useEffect(()=>{t&&m(g(t))},[t]);const o=(a,r)=>{m(x=>({...x,[a]:r}))},E=(a,r)=>{const x=l.allowedFileTypes.split(",").filter(p=>p.trim()),W=r?[...x,a]:x.filter(p=>p!==a);m(p=>({...p,allowedFileTypes:W.join(",")}))},T=()=>{m(a=>({...a,allowedFileTypes:U.join(",")}))},z=()=>{m(a=>({...a,allowedFileTypes:""}))},R=n.useMemo(()=>U.filter(a=>a.toLowerCase().includes(b.toLowerCase())),[b]),k=()=>{if(l.allowedFileTypes.trim()){h(!0);try{K.post(route("settings.storage.update"),{settings:l},{preserveScroll:!0,onSuccess:()=>{h(!1),K.reload({only:["globalSettings"]})},onError:()=>{h(!1)}})}catch{h(!1)}}},j=()=>e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{children:s("Allowed File Types")}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(G,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(d,{placeholder:s("Search file types..."),value:b,onChange:a=>u(a.target.value),className:"pl-10"})]}),e.jsx(v,{type:"button",variant:"outline",size:"sm",onClick:T,children:s("Select All")}),e.jsx(v,{type:"button",variant:"outline",size:"sm",onClick:z,children:s("Unselect All")})]}),e.jsx("div",{className:"grid grid-cols-4 gap-2 p-4 border rounded-md max-h-48 overflow-y-auto",children:R.map(a=>e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(X,{id:a,checked:l.allowedFileTypes.split(",").includes(a),onCheckedChange:r=>E(a,r),disabled:!c}),e.jsx(i,{htmlFor:a,className:"text-sm font-normal",children:a})]},a))})]})]}),B=()=>e.jsxs("div",{className:"space-y-6",children:[j(),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"maxUploadSize",children:s("Max Upload Size (KB)")}),e.jsx(d,{id:"maxUploadSize",type:"number",value:l.maxUploadSize,onChange:a=>o("maxUploadSize",a.target.value),placeholder:"2048",disabled:!c})]})]}),I=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"awsAccessKeyId",children:s("AWS Access Key ID")}),e.jsx(d,{id:"awsAccessKeyId",value:l.awsAccessKeyId,onChange:a=>o("awsAccessKeyId",a.target.value),placeholder:"AKIAIOSFODNN7EXAMPLE",disabled:!c})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"awsSecretAccessKey",children:s("AWS Secret Access Key")}),e.jsx(d,{id:"awsSecretAccessKey",type:"password",value:l.awsSecretAccessKey,onChange:a=>o("awsSecretAccessKey",a.target.value),placeholder:"wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY",disabled:!c})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"awsDefaultRegion",children:s("AWS Default Region")}),e.jsx(d,{id:"awsDefaultRegion",value:l.awsDefaultRegion,onChange:a=>o("awsDefaultRegion",a.target.value),placeholder:"us-east-1",disabled:!c})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"awsBucket",children:s("AWS Bucket")}),e.jsx(d,{id:"awsBucket",value:l.awsBucket,onChange:a=>o("awsBucket",a.target.value),placeholder:"my-bucket-name",disabled:!c})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"awsUrl",children:s("AWS URL")}),e.jsx(d,{id:"awsUrl",value:l.awsUrl,onChange:a=>o("awsUrl",a.target.value),placeholder:"https://s3.amazonaws.com",disabled:!c})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"awsEndpoint",children:s("AWS Endpoint")}),e.jsx(d,{id:"awsEndpoint",value:l.awsEndpoint,onChange:a=>o("awsEndpoint",a.target.value),placeholder:"https://s3.us-east-1.amazonaws.com",disabled:!c})]})]}),e.jsxs("div",{className:"space-y-6",children:[j(),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"awsMaxUploadSize",children:s("Max Upload Size (KB)")}),e.jsx(d,{id:"awsMaxUploadSize",type:"number",value:l.maxUploadSize,onChange:a=>o("maxUploadSize",a.target.value),placeholder:"2048",disabled:!c})]})]})]}),L=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"wasabiAccessKey",children:s("Wasabi Access Key")}),e.jsx(d,{id:"wasabiAccessKey",value:l.wasabiAccessKey,onChange:a=>o("wasabiAccessKey",a.target.value),placeholder:"AKIAIOSFODNN7EXAMPLE",disabled:!c})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"wasabiSecretKey",children:s("Wasabi Secret Key")}),e.jsx(d,{id:"wasabiSecretKey",type:"password",value:l.wasabiSecretKey,onChange:a=>o("wasabiSecretKey",a.target.value),placeholder:"wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY",disabled:!c})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"wasabiRegion",children:s("Wasabi Region")}),e.jsx(d,{id:"wasabiRegion",value:l.wasabiRegion,onChange:a=>o("wasabiRegion",a.target.value),placeholder:"us-east-1",disabled:!c})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"wasabiBucket",children:s("Wasabi Bucket")}),e.jsx(d,{id:"wasabiBucket",value:l.wasabiBucket,onChange:a=>o("wasabiBucket",a.target.value),placeholder:"my-wasabi-bucket",disabled:!c})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"wasabiUrl",children:s("Wasabi URL")}),e.jsx(d,{id:"wasabiUrl",value:l.wasabiUrl,onChange:a=>o("wasabiUrl",a.target.value),placeholder:"https://s3.wasabisys.com",disabled:!c})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"wasabiRoot",children:s("Wasabi Root")}),e.jsx(d,{id:"wasabiRoot",value:l.wasabiRoot,onChange:a=>o("wasabiRoot",a.target.value),placeholder:"/",disabled:!c})]})]}),e.jsxs("div",{className:"space-y-6",children:[j(),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"wasabiMaxUploadSize",children:s("Max Upload Size (KB)")}),e.jsx(d,{id:"wasabiMaxUploadSize",type:"number",value:l.maxUploadSize,onChange:a=>o("maxUploadSize",a.target.value),placeholder:"2048",disabled:!c})]})]})]});return e.jsxs(P,{children:[e.jsxs(O,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{className:"order-1 rtl:order-2",children:[e.jsxs(q,{className:"flex items-center gap-2 text-lg",children:[e.jsx(F,{className:"h-5 w-5"}),s("Storage Settings")]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:s("Configure file storage settings for your application")})]}),c&&e.jsxs(v,{className:"order-2 rtl:order-1",onClick:k,disabled:N,size:"sm",children:[e.jsx(_,{className:"h-4 w-4 mr-2"}),s(N?"Saving...":"Save Changes")]})]}),e.jsx(Y,{children:e.jsxs(M,{value:l.storageType,className:"w-full",onValueChange:a=>m(r=>({...r,storageType:a})),children:[e.jsxs(D,{className:"grid w-full grid-cols-3",children:[e.jsxs(y,{value:"local",className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-4 w-4"}),s("Local Storage")]}),e.jsxs(y,{value:"aws_s3",className:"flex items-center gap-2",children:[e.jsx("span",{children:"‚òÅÔ∏è"}),s("AWS S3")]}),e.jsxs(y,{value:"wasabi",className:"flex items-center gap-2",children:[e.jsx("span",{children:"üóÑÔ∏è"}),s("Wasabi")]})]}),e.jsxs(f,{value:"local",className:"mt-6",children:[e.jsx("h3",{className:"text-base font-medium mb-4",children:s("Local Storage Settings")}),B()]}),e.jsxs(f,{value:"aws_s3",className:"mt-6",children:[e.jsx("h3",{className:"text-base font-medium mb-4",children:s("AWS S3 Storage Settings")}),I()]}),e.jsxs(f,{value:"wasabi",className:"mt-6",children:[e.jsx("h3",{className:"text-base font-medium mb-4",children:s("Wasabi Storage Settings")}),L()]})]})})]})}export{xa as default};
