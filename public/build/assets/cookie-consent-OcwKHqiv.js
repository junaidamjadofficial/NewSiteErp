import{j as e}from"./ui-ZHFf5B17.js";import{r as m}from"./vendor-CcMVubkO.js";import{B as c}from"./button-DYC7yMVq.js";import{S as v}from"./switch-ByWYyd_6.js";import{X as d,A as g}from"./app-BBiA4mAE.js";import{u as w}from"./useTranslation-CV4_gBnb.js";import{C as y}from"./cookie-DkEMAjDp.js";import{X as S}from"./x-DVK_F_Gh.js";function X({settings:o}){const{t}=w(),[u,r]=m.useState(!1),[x,A]=m.useState({necessary:!0,analytics:!1,marketing:!1});m.useEffect(()=>{try{!localStorage.getItem("cookie-consent")&&o.enableCookiePopup&&r(!0)}catch(s){console.error("Failed to read cookie consent:",s),o.enableCookiePopup&&r(!0)}},[o.enableCookiePopup]);const p=s=>{g.post(route("cookie.consent.log"),{consent:s,ip:window.location.hostname,userAgent:navigator.userAgent},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{},onError:()=>{}})},a=s=>({...s,timestamp:Date.now()}),n=s=>{try{localStorage.setItem("cookie-consent",JSON.stringify(s)),p(s),r(!1)}catch(N){console.error("Failed to save cookie consent:",N)}},f=()=>{const s=a({necessary:!0,analytics:!0,marketing:!0});n(s)},h=()=>{const s=a(x);n(s)},b=()=>{const s=a({necessary:!0,analytics:!1,marketing:!1});n(s)},{is_demo:l,auth:i}=d().props,{component:j}=d(),k=l===!0||l===1||l==="1",C=route().current("dashboard")||route().current("account.index")||j.toLowerCase().includes("dashboard");return!u||!o.enableCookiePopup||k&&(!(i!=null&&i.user)||!C)?null:e.jsx("div",{className:"fixed bottom-4 left-1/2 transform -translate-x-1/2 z-50 w-[900px] max-w-[95vw]",children:e.jsxs("div",{className:"bg-background border border-border rounded-xl shadow-2xl backdrop-blur-sm",children:[e.jsxs("div",{className:"flex items-start justify-between p-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-1.5 bg-primary/10 rounded-lg",children:e.jsx(y,{className:"h-4 w-4 text-primary"})}),e.jsx("h3",{className:"font-semibold text-base",children:o.cookieTitle||t("Cookie Consent")})]}),e.jsx(c,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 hover:bg-muted",onClick:()=>r(!1),children:e.jsx(S,{className:"h-3 w-3"})})]}),e.jsx("div",{className:"px-3 pb-3",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2 leading-relaxed",children:o.cookieDescription}),o.strictlyNecessaryCookies&&e.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted/30 rounded-lg mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:o.strictlyCookieTitle}),e.jsx("p",{className:"text-xs text-muted-foreground",children:o.strictlyCookieDescription})]}),e.jsx(v,{checked:!0,disabled:!0,className:"ml-2"})]}),o.contactUsUrl&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:[o.contactUsDescription," ",e.jsx("a",{href:o.contactUsUrl,className:"text-primary hover:underline font-medium",children:t("Contact us")})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 min-w-[140px]",children:[e.jsx(c,{size:"sm",onClick:f,className:"w-full bg-green-600 hover:bg-green-700",children:t("Accept All")}),e.jsx(c,{size:"sm",variant:"outline",onClick:h,className:"w-full",children:t("Accept Selected")}),e.jsx(c,{size:"sm",variant:"destructive",onClick:b,className:"w-full",children:t("Reject")})]})]})})]})})}export{X as C};
