import{j as e}from"./ui-ZHFf5B17.js";import{r as f}from"./vendor-CcMVubkO.js";import{D as N,a as y,b as v,c as b}from"./dialog-BLwxprq_.js";import{B as t}from"./button-DYC7yMVq.js";import{a as w,f as d}from"./helpers-QYnGjXad.js";import{printReceipt as D}from"./PrintReceipt-C-pduKVb.js";import{downloadReceiptPDF as C}from"./DownloadReceipt-5DE6KMYb.js";import{u as T}from"./useTranslation-CV4_gBnb.js";import{C as k}from"./circle-check-big-CGCa8M7E.js";import{D as P}from"./download-DpWzK9fg.js";import{P as R}from"./printer-BDwaclJ1.js";import"./utils-DrcJ8Itn.js";import"./utils-B-dksMZM.js";import"./x-DVK_F_Gh.js";import"./createLucideIcon-Dov4NOxw.js";import"./index-BMyiKApA.js";import"./app-BBiA4mAE.js";/* empty css            */import"./html2pdf-Dais6JZR.js";function U({isOpen:j,onClose:m,completedSale:a,globalSettings:s}){var o;const{t:r}=T(),h=f.useRef(null),p=()=>{D(a,s)},u=()=>{C(a,s)};return a?e.jsx(N,{open:j,onOpenChange:m,children:e.jsxs(y,{className:"max-w-md max-h-[90vh] overflow-y-auto backdrop-blur-none",children:[e.jsx(v,{className:"no-print",children:e.jsxs(b,{className:"flex items-center justify-center text-green-600",children:[e.jsx(k,{className:"h-6 w-6 mr-2"}),r("Sale Completed Successfully!")]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center bg-green-50 p-4 rounded-lg no-print",children:[e.jsx("p",{className:"text-green-800 font-medium",children:r("Your transaction has been processed successfully.")}),e.jsxs("p",{className:"text-green-600 text-sm mt-1",children:[r("Receipt Number"),": ",a.pos_number]})]}),e.jsx("div",{ref:h,className:"mx-auto w-72 bg-white border border-gray-200 shadow-lg font-mono text-xs leading-tight print-area print-receipt",children:e.jsxs("div",{className:"p-3",children:[e.jsxs("div",{className:"text-center mb-3",children:[e.jsx("div",{className:"font-bold text-base tracking-wider mb-1",children:(s==null?void 0:s.company_name)||"COMPANY NAME"}),e.jsxs("div",{className:"text-xs leading-relaxed",children:[e.jsx("div",{children:(s==null?void 0:s.company_address)||"Company Address"}),e.jsxs("div",{children:[(s==null?void 0:s.company_city)||"City",", ",(s==null?void 0:s.company_state)||"State"]}),e.jsxs("div",{children:[(s==null?void 0:s.company_country)||"Country"," - ",(s==null?void 0:s.company_zipcode)||"Zipcode"]})]})]}),e.jsx("div",{className:"text-center my-2",children:e.jsx("div",{className:"border-t-2 border-dashed border-gray-400"})}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex justify-between py-0.5",children:[e.jsxs("span",{className:"font-medium",children:[r("Receipt"),":"]}),e.jsx("span",{className:"font-bold",children:a.pos_number})]}),e.jsxs("div",{className:"flex justify-between py-0.5",children:[e.jsxs("span",{className:"font-medium",children:[r("Date"),":"]}),e.jsx("span",{children:w(new Date)})]}),e.jsxs("div",{className:"flex justify-between py-0.5",children:[e.jsxs("span",{className:"font-medium",children:[r("Customer"),":"]}),e.jsx("span",{className:"truncate ml-2 font-medium",children:((o=a.customer)==null?void 0:o.name)||r("Walk-in")})]})]}),e.jsx("div",{className:"text-center my-2",children:e.jsx("div",{className:"border-t-2 border-dashed border-gray-400"})}),e.jsx("div",{className:"mb-3",children:a.items.map(n=>{const x=n.price*n.quantity;let l=0,c="";return n.taxes&&n.taxes.length>0?c=n.taxes.map(i=>(l+=x*i.rate/100,`${i.name} (${i.rate}%)`)).join(", "):c="-",e.jsxs("div",{className:"mb-3 pb-2 border-b border-dotted border-gray-300",children:[e.jsx("div",{className:"font-bold text-sm mb-1 truncate",children:n.name}),e.jsxs("div",{className:"space-y-0.5 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:[r("Qty"),":"]}),e.jsx("span",{className:"font-medium",children:n.quantity})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:[r("Price"),":"]}),e.jsx("span",{className:"font-medium",children:d(n.price)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:[r("Tax"),":"]}),e.jsx("span",{className:"font-medium",children:c})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:[r("Tax Amount"),":"]}),e.jsx("span",{className:"font-medium",children:d(l)})]}),e.jsxs("div",{className:"flex justify-between font-bold border-t border-dotted pt-1",children:[e.jsxs("span",{children:[r("Sub Total"),":"]}),e.jsx("span",{children:d(x)})]})]})]},n.id)})}),e.jsx("div",{className:"text-center my-2",children:e.jsx("div",{className:"border-t-2 border-dashed border-gray-400"})}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex justify-between py-1 text-sm",children:[e.jsxs("span",{className:"font-medium",children:[r("Discount"),":"]}),e.jsxs("span",{className:"font-bold",children:["-",d(a.discount)]})]}),e.jsxs("div",{className:"flex justify-between py-2 text-base font-bold border-t-2 border-double border-gray-600",children:[e.jsxs("span",{children:[r("Total"),":"]}),e.jsx("span",{className:"text-lg",children:d(a.total)})]})]}),e.jsx("div",{className:"text-center my-2",children:e.jsx("div",{className:"border-t-2 border-dashed border-gray-400"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs font-medium",children:r("★ Thank you for your business! ★")}),e.jsx("div",{className:"text-xs mt-1 opacity-75",children:new Date().toLocaleTimeString()})]})]})}),e.jsxs("div",{className:"flex justify-end gap-2 no-print",children:[e.jsxs(t,{onClick:u,className:"bg-green-500 hover:bg-green-700",children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),r("Download PDF")]}),e.jsxs(t,{onClick:p,className:"bg-blue-500 hover:bg-blue-700",children:[e.jsx(R,{className:"h-4 w-4 mr-2"}),r("Print")]}),e.jsx(t,{type:"button",variant:"outline",onClick:m,children:r("Close")})]})]})]})}):null}export{U as default};
