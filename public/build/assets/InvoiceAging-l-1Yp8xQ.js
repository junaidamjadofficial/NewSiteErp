import{j as s}from"./ui-ZHFf5B17.js";import{r as i}from"./vendor-CcMVubkO.js";import{X as u,a as _}from"./app-BBiA4mAE.js";import{B as p}from"./button-DYC7yMVq.js";import{C as b,c as h}from"./card-DHszHnbI.js";import{D as v}from"./date-picker-CVthJV3y.js";import{a as D,f as e}from"./helpers-QYnGjXad.js";import{N as w}from"./no-records-found-C2RGIdAh.js";import{u as C}from"./useTranslation-CV4_gBnb.js";import{P as k}from"./printer-BDwaclJ1.js";import{F as A}from"./file-text-BmYvzZ5U.js";/* empty css            */import"./index-BMyiKApA.js";import"./utils-B-dksMZM.js";import"./utils-DrcJ8Itn.js";import"./react-datepicker-BHcKmBHW.js";import"./popover-fYI5j510.js";import"./calendar-DvmJ2XsD.js";import"./createLucideIcon-Dov4NOxw.js";import"./plus-C1hmRCnY.js";function U({financialYear:o}){var m,x;const{t}=C(),{auth:g}=u().props,[l,y]=i.useState((o==null?void 0:o.year_end_date)||""),[a,j]=i.useState(null),[n,d]=i.useState(!1),c=async()=>{d(!0);try{const r=await _.get(route("account.reports.invoice-aging"),{params:{as_of_date:l}});j(r.data)}catch(r){console.error("Error:",r)}finally{d(!1)}};i.useEffect(()=>{c()},[]);const f=()=>{window.open(route("account.reports.invoice-aging.print")+`?as_of_date=${l}&download=pdf`,"_blank")};return s.jsxs(b,{className:"shadow-sm",children:[s.jsx(h,{className:"p-6 border-b bg-gray-50/50",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("As Of Date")}),s.jsx(v,{value:l,onChange:y,placeholder:t("Select date")})]}),s.jsxs("div",{className:"flex items-end gap-2",children:[s.jsx(p,{onClick:c,disabled:n,size:"sm",children:t(n?"Loading...":"Generate")}),a&&((x=(m=g.user)==null?void 0:m.permissions)==null?void 0:x.includes("print-invoice-aging"))&&s.jsxs(p,{variant:"outline",size:"sm",onClick:f,className:"gap-2",children:[s.jsx(k,{className:"h-4 w-4"}),t("Download PDF")]})]})]})}),s.jsx(h,{className:"p-0",children:a&&a.customers.length>0?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"p-4 bg-gray-50 border-b",children:[s.jsx("h3",{className:"font-semibold text-lg",children:t("Invoice Aging Report")}),s.jsxs("p",{className:"text-sm text-gray-600",children:[t("As of")," ",D(a.as_of_date)]})]}),s.jsx("div",{className:"overflow-y-auto max-h-[60vh]",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-100 sticky top-0",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:t("Customer")}),s.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold",children:t("Current")}),s.jsxs("th",{className:"px-4 py-3 text-right text-sm font-semibold",children:["1-30 ",t("Days")]}),s.jsxs("th",{className:"px-4 py-3 text-right text-sm font-semibold",children:["31-60 ",t("Days")]}),s.jsxs("th",{className:"px-4 py-3 text-right text-sm font-semibold",children:["61-90 ",t("Days")]}),s.jsxs("th",{className:"px-4 py-3 text-right text-sm font-semibold",children:[">90 ",t("Days")]}),s.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold",children:t("Total")})]})}),s.jsxs("tbody",{children:[a.customers.map((r,N)=>s.jsxs("tr",{className:"border-t hover:bg-gray-50",children:[s.jsx("td",{className:"px-4 py-3",children:r.customer_name}),s.jsx("td",{className:"px-4 py-3 text-right",children:e(r.current)}),s.jsx("td",{className:"px-4 py-3 text-right",children:e(r["1_30_days"])}),s.jsx("td",{className:"px-4 py-3 text-right",children:e(r["31_60_days"])}),s.jsx("td",{className:"px-4 py-3 text-right",children:e(r["61_90_days"])}),s.jsx("td",{className:"px-4 py-3 text-right",children:e(r.over_90_days)}),s.jsx("td",{className:"px-4 py-3 text-right font-semibold",children:e(r.total)})]},N)),s.jsxs("tr",{className:"bg-gray-200 font-bold border-t-4",children:[s.jsx("td",{className:"px-4 py-4",children:t("Total")}),s.jsx("td",{className:"px-4 py-4 text-right",children:e(a.aging_summary.current)}),s.jsx("td",{className:"px-4 py-4 text-right",children:e(a.aging_summary["1_30_days"])}),s.jsx("td",{className:"px-4 py-4 text-right",children:e(a.aging_summary["31_60_days"])}),s.jsx("td",{className:"px-4 py-4 text-right",children:e(a.aging_summary["61_90_days"])}),s.jsx("td",{className:"px-4 py-4 text-right",children:e(a.aging_summary.over_90_days)}),s.jsx("td",{className:"px-4 py-4 text-right",children:e(a.aging_summary.total)})]})]})]})})]}):s.jsx(w,{icon:A,title:t("Invoice Aging Report"),description:t("No outstanding invoices found"),className:"h-auto py-12"})})]})}export{U as default};
