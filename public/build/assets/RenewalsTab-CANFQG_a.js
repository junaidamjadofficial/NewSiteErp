import{j as e}from"./ui-ZHFf5B17.js";import{r as x}from"./vendor-CcMVubkO.js";import{X as Ne,A as j}from"./app-BBiA4mAE.js";import{C as be,a as ye,b as _e,c as Ce}from"./card-DHszHnbI.js";import{B as n}from"./button-DYC7yMVq.js";import{D as se,a as ae,b as te,c as re,e as le}from"./dialog-BLwxprq_.js";import{T as Se}from"./textarea-DxQ_BnuT.js";import{L as m}from"./label-DbqhUtKI.js";import{T as Re,a as De,b as ne,c as D,d as Te,e as T}from"./table-DHznIK9t.js";import{S as de,a as ie,b as ce,c as oe,d as g}from"./select-BEhl2QER.js";import{D as xe}from"./date-picker-CVthJV3y.js";import{C as Pe}from"./currency-input-BZrT8lhz.js";import{I as H}from"./input-error-DuIbBMgZ.js";import{S as Ee}from"./search-input-BmfsW7ME.js";import{T as w,a as N,b,c as y}from"./tooltip-C7wT1CW2.js";import{a as P,f as J,k as ke}from"./helpers-QYnGjXad.js";import{u as Ae}from"./useTranslation-CV4_gBnb.js";import{L as Ve}from"./list-BVwWsOhE.js";import{G as Ie}from"./grid-3x3-BHB0xGDK.js";import{P as Le}from"./plus-C1hmRCnY.js";import{E as me}from"./eye-C8Kok_ez.js";import{S as he}from"./square-pen-D0WnMiRU.js";import{T as ue}from"./trash-2-CIuynBL1.js";import{U as qe}from"./user-DQm7Eg7s.js";import{C as Ue}from"./chevron-left-CMBAh2v_.js";import{C as ze}from"./chevron-right-BtPraxo3.js";import{R as pe}from"./refresh-cw-DjdBLqaG.js";/* empty css            */import"./utils-DrcJ8Itn.js";import"./utils-B-dksMZM.js";import"./index-BMyiKApA.js";import"./x-DVK_F_Gh.js";import"./createLucideIcon-Dov4NOxw.js";import"./index-BdQq_4o_.js";import"./index-BYFX2qNQ.js";import"./index-BZAHB8Ku.js";import"./input-DqOfVTcn.js";import"./chevron-down-Zr-tNTku.js";import"./search-Chs14P_a.js";import"./check-DUlQPeVG.js";import"./react-datepicker-BHcKmBHW.js";import"./popover-fYI5j510.js";import"./calendar-DvmJ2XsD.js";const Oe=c=>{switch(c==null?void 0:c.toString().toLowerCase()){case"draft":return"bg-gray-100 text-gray-800";case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-blue-100 text-blue-800";case"active":return"bg-green-100 text-green-800";case"expired":return"bg-orange-100 text-orange-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},Be=(c,d)=>{switch(c==null?void 0:c.toString().toLowerCase()){case"draft":return d("Draft");case"pending":return d("Pending");case"approved":return d("Approved");case"active":return d("Active");case"expired":return d("Expired");case"cancelled":return d("Cancelled");default:return d("Draft")}};function Es({contract:c,setDeleteConfig:d}){var Y,Z,ee;const{t:s}=Ae(),{auth:i}=Ne().props,[je,_]=x.useState(!1),[o,h]=x.useState({start_date:"",end_date:"",value:"",status:"pending",notes:""}),[E,k]=x.useState({}),[$,K]=x.useState("list"),[u,C]=x.useState(parseInt(new URLSearchParams(window.location.search).get("renewal_page")||"1")),[v,ge]=x.useState(parseInt(new URLSearchParams(window.location.search).get("renewal_per_page")||"10")),[S,Q]=x.useState(new URLSearchParams(window.location.search).get("renewal_search")||""),[G,W]=x.useState(new URLSearchParams(window.location.search).get("renewal_search")||""),[ve,X]=x.useState(null),[A,V]=x.useState(null),[fe,M]=x.useState(!1),we=()=>{k({});const t=A?route("contract-renewals.update",A):route("contract-renewals.store",c.id);j[A?"put":"post"](t,o,{onSuccess:()=>{_(!1),h({start_date:"",end_date:"",value:"",status:"pending",notes:""}),V(null),k({}),j.reload()},onError:f=>{k(f)}})},r=()=>{var t;return(t=c.renewals)==null?void 0:t.find(R=>R.id===ve)};return e.jsxs(e.Fragment,{children:[e.jsxs(be,{children:[e.jsxs(ye,{className:"flex flex-row items-center justify-between",children:[e.jsx(_e,{children:s("Contract Renewals")}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(Ee,{value:G,onChange:t=>W(t),onSearch:()=>{Q(G),C(1),j.reload({data:{renewal_search:G,renewal_page:1,renewal_per_page:v}})},onClear:()=>{Q(""),W(""),C(1),j.reload({data:{renewal_search:"",renewal_page:1,renewal_per_page:v}})},placeholder:s("Search renewals..."),className:"w-64"})}),e.jsxs("div",{className:"flex border rounded-md",children:[e.jsx(n,{size:"sm",variant:$==="list"?"default":"ghost",onClick:()=>K("list"),className:"rounded-r-none px-2 h-9",children:e.jsx(Ve,{className:"h-3 w-3"})}),e.jsx(n,{size:"sm",variant:$==="grid"?"default":"ghost",onClick:()=>K("grid"),className:"rounded-l-none px-2 h-9",children:e.jsx(Ie,{className:"h-3 w-3"})})]}),e.jsxs(de,{value:v.toString(),onValueChange:t=>{ge(Number(t)),C(1),j.reload({data:{renewal_search:S,renewal_page:1,renewal_per_page:Number(t)}})},children:[e.jsx(ie,{className:"w-[120px] h-9",children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsxs(g,{value:"5",children:["5 ",s("per page")]}),e.jsxs(g,{value:"10",children:["10 ",s("per page")]}),e.jsxs(g,{value:"20",children:["20 ",s("per page")]}),e.jsxs(g,{value:"50",children:["50 ",s("per page")]})]})]}),((Z=(Y=i.user)==null?void 0:Y.permissions)==null?void 0:Z.includes("create-contract-renewals"))&&e.jsx(w,{children:e.jsxs(N,{children:[e.jsx(b,{asChild:!0,children:e.jsx(n,{size:"sm",onClick:()=>{V(null),h({start_date:"",end_date:"",value:"",status:"pending",notes:""}),k({}),_(!0)},className:"h-9 w-9 p-0",children:e.jsx(Le,{className:"h-4 w-4"})})}),e.jsx(y,{children:e.jsx("p",{children:s("Add Renewal")})})]})})]})]}),e.jsx(Ce,{className:"p-0",children:(()=>{const t=c.renewals||[],R=t.length,f=Math.ceil(R/v);return t.length>0?e.jsxs(e.Fragment,{children:[$==="list"?e.jsxs(Re,{children:[e.jsx(De,{children:e.jsxs(ne,{children:[e.jsx(D,{children:s("Start Date")}),e.jsx(D,{children:s("End Date")}),e.jsx(D,{children:s("Value")}),e.jsx(D,{children:s("Status")}),e.jsx(D,{children:s("Created By")}),e.jsx(D,{className:"w-24",children:s("Actions")})]})}),e.jsx(Te,{children:t.map(a=>{var p,l,I,L,q,U,z,O,B;return e.jsxs(ne,{children:[e.jsx(T,{children:P(a.start_date)}),e.jsx(T,{children:P(a.end_date)}),e.jsx(T,{children:a.value?J(a.value):"-"}),e.jsx(T,{children:e.jsx("span",{className:`px-2 py-1 rounded-full text-sm ${Oe(a.status)}`,children:Be(a.status,s)})}),e.jsx(T,{children:((p=a.creator)==null?void 0:p.name)||"-"}),e.jsx(T,{children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx(w,{children:e.jsxs(N,{children:[e.jsx(b,{asChild:!0,children:e.jsx(n,{variant:"ghost",onClick:()=>{X(a.id),M(!0)},className:"h-8 w-8 p-0 text-blue-600 hover:text-blue-700",children:e.jsx(me,{className:"h-4 w-4"})})}),e.jsx(y,{children:e.jsx("p",{children:s("View Details")})})]})}),((I=(l=i.user)==null?void 0:l.permissions)==null?void 0:I.includes("edit-contract-renewals"))&&(a.creator_id===((L=i.user)==null?void 0:L.id)||a.created_by===((q=i.user)==null?void 0:q.id))&&e.jsx(w,{children:e.jsxs(N,{children:[e.jsx(b,{asChild:!0,children:e.jsx(n,{variant:"ghost",onClick:()=>{V(a.id),h({start_date:a.start_date,end_date:a.end_date,value:a.value,status:a.status,notes:a.notes||""}),_(!0)},className:"h-8 w-8 p-0 text-green-600 hover:text-green-700",children:e.jsx(he,{className:"h-4 w-4"})})}),e.jsx(y,{children:e.jsx("p",{children:s("Edit")})})]})}),((z=(U=i.user)==null?void 0:U.permissions)==null?void 0:z.includes("delete-contract-renewals"))&&(a.creator_id===((O=i.user)==null?void 0:O.id)||a.created_by===((B=i.user)==null?void 0:B.id))&&e.jsx(w,{children:e.jsxs(N,{children:[e.jsx(b,{asChild:!0,children:e.jsx(n,{variant:"ghost",onClick:()=>{d?d({type:"renewal",id:a.id,route:"contract-renewals.destroy",message:s("Are you sure you want to delete this renewal?")}):confirm(s("Are you sure you want to delete this renewal?"))&&j.delete(route("contract-renewals.destroy",a.id))},className:"h-8 w-8 p-0 text-red-600 hover:text-red-700",children:e.jsx(ue,{className:"h-4 w-4"})})}),e.jsx(y,{children:e.jsx("p",{children:s("Delete")})})]})})]})})]},a.id)})})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4 p-4",children:t.map(a=>{var p,l,I,L,q,U,z,O,B;return e.jsxs("div",{className:"group bg-white border border-gray-200 rounded-xl p-4 hover:shadow-lg hover:border-blue-300 transition-all duration-300 hover:-translate-y-1 cursor-pointer",children:[e.jsxs("div",{className:"text-center mb-4 p-3 bg-gradient-to-r from-primary/5 to-primary/10 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1 font-medium",children:s("Renewal Value")}),e.jsx("p",{className:"font-bold text-xl text-primary",children:a.value?J(a.value):"-"})]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-3 mb-4",children:e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-500 mb-1",children:s("Start")}),e.jsx("p",{className:"font-semibold text-gray-900",children:P(a.start_date)})]}),e.jsx("div",{className:"w-px h-8 bg-gray-300"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-500 mb-1",children:s("End")}),e.jsx("p",{className:"font-semibold text-gray-900",children:P(a.end_date)})]})]})}),e.jsxs("div",{className:"flex items-center gap-2 mb-4 px-2",children:[e.jsx("div",{className:"w-6 h-6 bg-purple-50 rounded-full flex items-center justify-center",children:e.jsx(qe,{className:"h-3 w-3 text-purple-600"})}),e.jsx("span",{className:"text-xs text-gray-600 truncate font-medium",children:((p=a.creator)==null?void 0:p.name)||"-"})]}),a.notes&&e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-2 mb-4",children:e.jsx("p",{className:"text-xs text-amber-700 line-clamp-2 leading-relaxed",children:a.notes})}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[e.jsx("div",{className:`w-2.5 h-2.5 rounded-full ${a.status==="pending"?"bg-yellow-500":a.status==="approved"?"bg-blue-500":a.status==="active"?"bg-green-500":a.status==="expired"?"bg-gray-500":a.status==="rejected"?"bg-red-500":"bg-gray-500"}`}),e.jsx("span",{className:"text-xs",children:s(a.status)})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(w,{children:e.jsxs(N,{children:[e.jsx(b,{asChild:!0,children:e.jsx(n,{variant:"ghost",onClick:F=>{F.stopPropagation(),X(a.id),M(!0)},className:"h-6 w-6 p-0 text-blue-600 hover:text-blue-700",children:e.jsx(me,{className:"h-3 w-3"})})}),e.jsx(y,{children:e.jsx("p",{children:s("View Details")})})]})}),((I=(l=i.user)==null?void 0:l.permissions)==null?void 0:I.includes("edit-contract-renewals"))&&(a.creator_id===((L=i.user)==null?void 0:L.id)||a.created_by===((q=i.user)==null?void 0:q.id))&&e.jsx(w,{children:e.jsxs(N,{children:[e.jsx(b,{asChild:!0,children:e.jsx(n,{variant:"ghost",onClick:F=>{F.stopPropagation(),V(a.id),h({start_date:a.start_date,end_date:a.end_date,value:a.value,status:a.status,notes:a.notes||""}),_(!0)},className:"h-6 w-6 p-0 text-green-600 hover:text-green-700",children:e.jsx(he,{className:"h-3 w-3"})})}),e.jsx(y,{children:e.jsx("p",{children:s("Edit Renewal")})})]})}),((z=(U=i.user)==null?void 0:U.permissions)==null?void 0:z.includes("delete-contract-renewals"))&&(a.creator_id===((O=i.user)==null?void 0:O.id)||a.created_by===((B=i.user)==null?void 0:B.id))&&e.jsx(w,{children:e.jsxs(N,{children:[e.jsx(b,{asChild:!0,children:e.jsx(n,{variant:"ghost",onClick:F=>{F.stopPropagation(),d?d({type:"renewal",id:a.id,route:"contract-renewals.destroy",message:s("Are you sure you want to delete this renewal?")}):confirm(s("Are you sure you want to delete this renewal?"))&&j.delete(route("contract-renewals.destroy",a.id))},className:"h-6 w-6 p-0 text-destructive hover:text-destructive",children:e.jsx(ue,{className:"h-3 w-3"})})}),e.jsx(y,{children:e.jsx("p",{children:s("Delete Renewal")})})]})})]})]})]},a.id)})}),e.jsx("div",{className:"px-4 py-3 border-t bg-gray-50/30",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[s("Showing")," ",e.jsx("span",{className:"font-medium text-foreground",children:(u-1)*v+1})," ",s("to")," ",e.jsx("span",{className:"font-medium text-foreground",children:Math.min(u*v,R)})," ",s("of")," ",e.jsx("span",{className:"font-medium text-foreground",children:R})," ",s("results")]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(n,{variant:"outline",size:"sm",onClick:()=>{const a=Math.max(1,u-1);C(a),j.reload({data:{renewal_search:S,renewal_page:a,renewal_per_page:v}})},disabled:u===1,className:"h-8 px-3",children:[e.jsx(Ue,{className:"h-4 w-4"}),s("Previous")]}),e.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,f)},(a,p)=>{let l;return f<=5||u<=3?l=p+1:u>=f-2?l=f-4+p:l=u-2+p,e.jsx(n,{variant:u===l?"default":"outline",size:"sm",onClick:()=>{C(l),j.reload({data:{renewal_search:S,renewal_page:l,renewal_per_page:v}})},className:"h-8 w-8 p-0",children:l},l)})}),e.jsxs(n,{variant:"outline",size:"sm",onClick:()=>{const a=Math.min(f,u+1);C(a),j.reload({data:{renewal_search:S,renewal_page:a,renewal_per_page:v}})},disabled:u===f,className:"h-8 px-3",children:[s("Next"),e.jsx(ze,{className:"h-4 w-4"})]})]})]})})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(pe,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500 text-sm",children:s(S?"No renewals found":"No renewals yet")}),e.jsx("p",{className:"text-gray-400 text-xs mt-1",children:s(S?"Try adjusting your search":"Create your first renewal")})]})})()})]}),e.jsx(se,{open:je,onOpenChange:_,children:e.jsxs(ae,{children:[e.jsx(te,{children:e.jsx(re,{children:s(A?"Edit Contract Renewal":"Add Contract Renewal")})}),e.jsxs("div",{className:"space-y-4 my-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(m,{required:!0,children:s("Start Date")}),e.jsx(xe,{value:o.start_date,onChange:t=>h({...o,start_date:t}),placeholder:s("Select Start Date"),required:!0}),e.jsx(H,{message:E.start_date})]}),e.jsxs("div",{children:[e.jsx(m,{required:!0,children:s("End Date")}),e.jsx(xe,{value:o.end_date,onChange:t=>h({...o,end_date:t}),placeholder:s("Select End Date"),required:!0}),e.jsx(H,{message:E.end_date})]})]}),e.jsx("div",{children:e.jsx(Pe,{label:s("Value"),value:o.value,onChange:t=>h({...o,value:t}),error:E.value,required:!0})}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"status",required:!0,children:s("Status")}),e.jsxs(de,{value:o.status,onValueChange:t=>h({...o,status:t}),children:[e.jsx(ie,{children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(g,{value:"draft",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-600"}),s("Draft")]})}),e.jsx(g,{value:"pending",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-600"}),s("Pending")]})}),e.jsx(g,{value:"approved",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-600"}),s("Approved")]})}),e.jsx(g,{value:"active",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-600"}),s("Active")]})}),e.jsx(g,{value:"expired",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-orange-600"}),s("Expired")]})}),e.jsx(g,{value:"cancelled",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-red-600"}),s("Cancelled")]})})]})]}),e.jsx(H,{message:E.status})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"notes",children:s("Notes")}),e.jsx(Se,{id:"notes",value:o.notes,onChange:t=>h({...o,notes:t.target.value}),placeholder:s("Enter Notes"),rows:3}),e.jsx(H,{message:E.notes})]})]}),e.jsxs(le,{children:[e.jsx(n,{variant:"outline",onClick:()=>{_(!1),V(null),h({start_date:"",end_date:"",value:"",status:"draft",notes:""}),k({})},children:s("Cancel")}),e.jsx(n,{onClick:we,children:s(A?"Update":"Create")})]})]})}),e.jsx(se,{open:fe,onOpenChange:M,children:e.jsxs(ae,{className:"sm:max-w-lg",children:[e.jsx(te,{children:e.jsxs(re,{className:"flex items-center gap-2",children:[e.jsx(pe,{className:"h-4 w-4"}),s("Renewal Details")]})}),r()&&e.jsxs("div",{className:"space-y-4 my-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(m,{className:"text-sm font-medium text-gray-700",children:s("Start Date")}),e.jsx("p",{className:"text-sm mt-1",children:P(r().start_date)})]}),e.jsxs("div",{children:[e.jsx(m,{className:"text-sm font-medium text-gray-700",children:s("End Date")}),e.jsx("p",{className:"text-sm mt-1",children:P(r().end_date)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(m,{className:"text-sm font-medium text-gray-700",children:s("Value")}),e.jsx("p",{className:"text-sm mt-1",children:r().value?J(r().value):"-"})]}),e.jsxs("div",{children:[e.jsx(m,{className:"text-sm font-medium text-gray-700",children:s("Status")}),e.jsx("div",{className:"mt-1",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[e.jsx("div",{className:`w-2.5 h-2.5 rounded-full ${r().status==="pending"?"bg-yellow-500":r().status==="approved"?"bg-blue-500":r().status==="active"?"bg-green-500":r().status==="expired"?"bg-gray-500":r().status==="rejected"?"bg-red-500":"bg-gray-500"}`}),s(r().status)]})})]})]}),e.jsxs("div",{children:[e.jsx(m,{className:"text-sm font-medium text-gray-700",children:s("Created By")}),e.jsx("p",{className:"text-sm mt-1",children:((ee=r().creator)==null?void 0:ee.name)||"-"})]}),e.jsxs("div",{children:[e.jsx(m,{className:"text-sm font-medium text-gray-700",children:s("Created At")}),e.jsx("p",{className:"text-sm mt-1",children:ke(r().created_at)})]}),r().notes&&e.jsxs("div",{children:[e.jsx(m,{className:"text-sm font-medium text-gray-700",children:s("Notes")}),e.jsx("div",{className:"mt-1 bg-gray-50 rounded-lg p-3",children:e.jsx("p",{className:"text-sm text-gray-700",children:r().notes})})]})]}),e.jsx(le,{children:e.jsx(n,{variant:"outline",onClick:()=>{M(!1),X(null)},children:s("Close")})})]})})]})}export{Es as default};
