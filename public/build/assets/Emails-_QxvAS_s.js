import{j as e}from"./ui-ZHFf5B17.js";import{r as n}from"./vendor-CcMVubkO.js";import{A as j}from"./app-BBiA4mAE.js";import{D as f}from"./data-table--afTq2As.js";import{B as p}from"./button-DYC7yMVq.js";import{D as g,a as b,b as y,c as E}from"./dialog-BLwxprq_.js";import{L as l}from"./label-DbqhUtKI.js";import{I as d}from"./input-DqOfVTcn.js";import{R as v}from"./rich-text-editor-59agrfWF.js";import{N as D}from"./no-records-found-C2RGIdAh.js";import{k as N}from"./helpers-QYnGjXad.js";import{u as S}from"./useTranslation-CV4_gBnb.js";import{M as C}from"./mail-XtzF_PXw.js";/* empty css            */import"./card-DHszHnbI.js";import"./utils-DrcJ8Itn.js";import"./utils-B-dksMZM.js";import"./table-DHznIK9t.js";import"./search-Chs14P_a.js";import"./createLucideIcon-Dov4NOxw.js";import"./chevron-left-CMBAh2v_.js";import"./chevron-right-BtPraxo3.js";import"./arrow-up-down-D4TAtYCt.js";import"./arrow-up-BLTFDVcR.js";import"./index-BMyiKApA.js";import"./x-DVK_F_Gh.js";import"./index-DaFL_H0m.js";import"./with-selector-CP8JaRn2.js";import"./undo-D3tFEvb3.js";import"./list-BVwWsOhE.js";import"./link-2Bt5o4zZ.js";import"./plus-C1hmRCnY.js";function se({lead:m,onRegisterAddHandler:c}){n.useEffect(()=>{c(()=>o(!0))},[c]);const{t}=S(),[u,o]=n.useState(!1),[a,s]=n.useState({to:"",subject:"",description:""}),x=r=>r?r.replace(/<[^>]*>/g,"").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&nbsp;/g," "):"",h=r=>{r.preventDefault(),j.post(route("lead.leads.store-email",m.id),a,{onSuccess:()=>{s({to:"",subject:"",description:""}),o(!1)}})};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-y-auto scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-100 max-h-[75vh] rounded-none w-full",children:e.jsx("div",{className:"min-w-[600px]",children:e.jsx(f,{data:m.emails||[],columns:[{key:"to",header:t("To")},{key:"subject",header:t("Subject")},{key:"description",header:t("Description"),render:r=>{if(!r)return"-";const i=x(r);return e.jsx("span",{className:"text-sm text-gray-600 truncate max-w-xs",title:i,children:i.length>30?`${i.substring(0,30)}...`:i})}},{key:"created_at",header:t("Date"),render:r=>N(r)}],className:"rounded-none",emptyState:e.jsx(D,{icon:C,title:t("No Emails sent"),description:t("Get started by sending your first email."),onCreateClick:()=>o(!0),createButtonText:t("Send Email"),className:"h-auto"})})})}),e.jsx(g,{open:u,onOpenChange:o,children:e.jsxs(b,{className:"max-w-2xl",children:[e.jsx(y,{children:e.jsx(E,{children:t("Send Email")})}),e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"to",children:t("To")}),e.jsx(d,{id:"to",type:"email",value:a.to,onChange:r=>s({...a,to:r.target.value}),placeholder:t("Enter email address"),required:!0})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"subject",children:t("Subject")}),e.jsx(d,{id:"subject",type:"text",value:a.subject,onChange:r=>s({...a,subject:r.target.value}),placeholder:t("Enter subject"),required:!0})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"description",children:t("Description")}),e.jsx(v,{content:a.description,onChange:r=>s({...a,description:r}),placeholder:t("Enter email content"),className:"mt-1"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(p,{type:"button",variant:"outline",onClick:()=>o(!1),children:t("Cancel")}),e.jsx(p,{type:"submit",children:t("Send Email")})]})]})]})})]})}export{se as default};
