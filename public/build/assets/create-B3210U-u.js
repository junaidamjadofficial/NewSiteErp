import{j as e}from"./ui-ZHFf5B17.js";import{r as N}from"./vendor-CcMVubkO.js";import{X as _,G as b}from"./app-BBiA4mAE.js";import{a as C,b as f,c as S}from"./dialog-BLwxprq_.js";import{B as m}from"./button-DYC7yMVq.js";import{I as l}from"./input-DqOfVTcn.js";import{L as d}from"./label-DbqhUtKI.js";import{T as F}from"./textarea-DxQ_BnuT.js";import{S as D,a as E,b as I,c as L,d as c}from"./select-BEhl2QER.js";import{S as P}from"./switch-ByWYyd_6.js";import{D as T}from"./date-picker-CVthJV3y.js";import{C as h}from"./currency-input-BZrT8lhz.js";import{u as U}from"./useTranslation-CV4_gBnb.js";/* empty css            */import"./utils-DrcJ8Itn.js";import"./utils-B-dksMZM.js";import"./x-DVK_F_Gh.js";import"./createLucideIcon-Dov4NOxw.js";import"./index-BMyiKApA.js";import"./index-BdQq_4o_.js";import"./index-BYFX2qNQ.js";import"./index-BZAHB8Ku.js";import"./chevron-down-Zr-tNTku.js";import"./search-Chs14P_a.js";import"./check-DUlQPeVG.js";import"./react-datepicker-BHcKmBHW.js";import"./popover-fYI5j510.js";import"./calendar-DvmJ2XsD.js";import"./input-error-DuIbBMgZ.js";import"./helpers-QYnGjXad.js";function me({onSuccess:p}){var x;const{t:r}=U(),[n,u]=N.useState(!1),{props:o}=_(),j=((x=o==null?void 0:o.companyAllSetting)==null?void 0:x.currencySymbol)||"$",{data:i,setData:a,post:g,errors:t,reset:v}=b({name:"",description:"",code:"",discount:0,limit:void 0,type:"percentage",minimum_spend:void 0,maximum_spend:void 0,limit_per_user:void 0,expiry_date:"",included_module:[],excluded_module:[],status:!0}),y=s=>{s.preventDefault(),u(!0),g(route("coupons.store"),{onSuccess:()=>{v(),p()},onFinish:()=>u(!1)})};return e.jsxs(C,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(f,{children:e.jsx(S,{children:r("Create Coupon")})}),e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"name",children:r("Name")}),e.jsx(l,{id:"name",value:i.name,onChange:s=>a("name",s.target.value),placeholder:r("Enter coupon name"),className:t.name?"border-red-500":"",required:!0}),t.name&&e.jsx("p",{className:"text-sm text-red-500",children:t.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"code",children:r("Code")}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(l,{id:"code",value:i.code,onChange:s=>a("code",s.target.value.toUpperCase()),placeholder:r("Enter coupon code"),className:t.code?"border-red-500":"",required:!0}),e.jsx(m,{type:"button",variant:"outline",onClick:()=>a("code","COUP-"+Date.now()),disabled:n,children:r("Generate")})]}),t.code&&e.jsx("p",{className:"text-sm text-red-500",children:t.code})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"type",required:!0,children:r("Type")}),e.jsxs(D,{value:i.type,onValueChange:s=>a("type",s),children:[e.jsx(E,{className:t.type?"border-red-500":"",children:e.jsx(I,{placeholder:r("Select type")})}),e.jsxs(L,{children:[e.jsx(c,{value:"percentage",children:r("Percentage")}),e.jsx(c,{value:"flat",children:r("Flat Amount")}),e.jsx(c,{value:"fixed",children:r("Fixed Price")})]})]}),t.type&&e.jsx("p",{className:"text-sm text-red-500",children:t.type})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(d,{htmlFor:"discount",required:!0,children:[r("Discount")," ",i.type==="percentage"?"(%)":`(${j})`]}),e.jsx(l,{id:"discount",type:"number",step:"0.01",min:"0",value:i.discount,onChange:s=>a("discount",parseFloat(s.target.value)||0),placeholder:r("Enter discount value"),className:t.discount?"border-red-500":""}),t.discount&&e.jsx("p",{className:"text-sm text-red-500",children:t.discount})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"limit",children:r("Usage Limit")}),e.jsx(l,{id:"limit",type:"number",min:"1",value:i.limit||"",onChange:s=>a("limit",s.target.value?parseInt(s.target.value):void 0),placeholder:r("Enter Usage Limit"),className:t.limit?"border-red-500":""}),t.limit&&e.jsx("p",{className:"text-sm text-red-500",children:t.limit})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"limit_per_user",children:r("Limit Per User")}),e.jsx(l,{id:"limit_per_user",type:"number",min:"1",value:i.limit_per_user||"",onChange:s=>a("limit_per_user",s.target.value?parseInt(s.target.value):void 0),placeholder:r("Enter Limit Per User"),className:t.limit_per_user?"border-red-500":""}),t.limit_per_user&&e.jsx("p",{className:"text-sm text-red-500",children:t.limit_per_user})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsx(h,{label:r("Minimum Spend"),value:(i.minimum_spend||"").toString(),onChange:s=>a("minimum_spend",s?parseFloat(s):void 0),error:t.minimum_spend,placeholder:r("Enter minimum spend")})}),e.jsx("div",{children:e.jsx(h,{label:r("Maximum Spend"),value:(i.maximum_spend||"").toString(),onChange:s=>a("maximum_spend",s?parseFloat(s):void 0),error:t.maximum_spend,placeholder:r("Enter maximum spend")})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"expiry_date",children:r("Expiry Date")}),e.jsx(T,{value:i.expiry_date,onChange:s=>a("expiry_date",s),placeholder:r("Select expiry date"),className:t.expiry_date?"border-red-500":""}),t.expiry_date&&e.jsx("p",{className:"text-sm text-red-500",children:t.expiry_date})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"description",children:r("Description")}),e.jsx(F,{id:"description",value:i.description,onChange:s=>a("description",s.target.value),placeholder:r("Enter coupon description"),rows:3,className:t.description?"border-red-500":""}),t.description&&e.jsx("p",{className:"text-sm text-red-500",children:t.description})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(P,{id:"status",checked:i.status,onCheckedChange:s=>a("status",s)}),e.jsx(d,{htmlFor:"status",children:r("Active")})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(m,{type:"button",variant:"outline",onClick:p,children:r("Cancel")}),e.jsx(m,{type:"submit",disabled:n,children:r(n?"Creating...":"Create")})]})]})]})}export{me as default};
