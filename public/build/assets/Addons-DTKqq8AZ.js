import{j as e}from"./ui-ZHFf5B17.js";import{S as w,x as j,a as v}from"./app-BBiA4mAE.js";import{r as l}from"./vendor-CcMVubkO.js";import{u as I}from"./useTranslation-CV4_gBnb.js";/* empty css            */function T({modules:r}){const{t:s}=I(),[a,h]=l.useState(0),[i,b]=l.useState(!1),[y,m]=l.useState(!1),[x,o]=l.useState(""),[c,g]=l.useState([]),p=async()=>{var n,f;if(a>=r.length){m(!0);return}const t=r[a];b(!0),o("");try{const d=await v.post(route("installer.addons.store"),{module:t.name});d.data.success?(g(u=>[...u,t.name]),h(u=>u+1),d.data.completed&&m(!0)):o(d.data.message)}catch(d){o(((f=(n=d.response)==null?void 0:n.data)==null?void 0:f.message)||"Installation failed")}finally{b(!1)}},N=()=>{h(0),g([]),m(!1),o(""),p()};return l.useEffect(()=>{if(a>0&&a<r.length&&!x){const t=setTimeout(()=>{p()},1e3);return()=>clearTimeout(t)}},[a]),e.jsxs(e.Fragment,{children:[e.jsx(w,{title:s("Installation - Add-ons")}),e.jsx("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:e.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-2xl",children:e.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:s("Add-on Installation")}),x&&e.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-md",children:e.jsx("p",{className:"text-red-700",children:x})}),e.jsx("p",{className:"text-gray-600 mb-4",children:s("This step will install and enable all available add-on modules one by one.")}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4 mb-6",children:[e.jsxs("h3",{className:"font-semibold text-blue-800 mb-2",children:[s("Add-ons Progress")," (",c.length,"/",r.length,"):"]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-4",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${c.length/r.length*100}%`}})}),e.jsx("div",{className:"max-h-60 overflow-y-auto space-y-2",children:r.map((t,n)=>e.jsx("div",{className:`p-2 rounded border ${c.includes(t.name)?"bg-green-100 border-green-300":n===a&&i?"bg-yellow-100 border-yellow-300":"bg-white border-gray-200"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:t.alias}),e.jsx("p",{className:"text-sm text-gray-600",children:t.description})]}),e.jsxs("div",{children:[c.includes(t.name)&&e.jsxs("span",{className:"text-green-600",children:["✓ ",s("Installed")]}),n===a&&i&&e.jsxs("span",{className:"text-yellow-600",children:["⏳ ",s("Installing...")]})]})]})},t.name))})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(j,{href:route("installer.database"),className:"py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:s("Back")}),y?e.jsx(j,{href:route("installer.final"),className:"py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700",children:s("Continue")}):e.jsx("button",{onClick:N,disabled:i,className:"py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50",children:s(i?"Installing...":"Start Installation")})]})]})})})]})}export{T as default};
