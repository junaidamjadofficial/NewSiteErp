import{j as s}from"./ui-ZHFf5B17.js";import{r as v}from"./vendor-CcMVubkO.js";import{a as N,b as g,c as C}from"./dialog-BLwxprq_.js";import{B as d}from"./button-DYC7yMVq.js";import{C as k}from"./checkbox-Cvtgzug2.js";import{X as w,G as y}from"./app-BBiA4mAE.js";import{u as D}from"./useTranslation-CV4_gBnb.js";import{T as L}from"./tag-B8n-xlTS.js";import"./utils-DrcJ8Itn.js";import"./utils-B-dksMZM.js";import"./x-DVK_F_Gh.js";import"./createLucideIcon-Dov4NOxw.js";import"./index-BMyiKApA.js";import"./index-BYFX2qNQ.js";import"./check-DUlQPeVG.js";/* empty css            */function J({deal:a,onSuccess:l}){const{t:r}=D(),{labels:o}=w().props,m=(o==null?void 0:o.filter(e=>e.pipeline_id===a.pipeline_id))||[],[n,c]=v.useState(()=>{const e={};return a.labels&&a.labels.split(",").map(Number).filter(Boolean).forEach(t=>{e[t]=!0}),e}),{data:T,setData:p,patch:x,processing:f}=y({labels:a.labels||""}),h=(e,i)=>{const t={...n};i?t[e]=!0:delete t[e],c(t);const j=Object.keys(t).filter(b=>t[parseInt(b)]);p("labels",j.join(","))},u=e=>{e.preventDefault(),x(route("lead.deals.update-labels",a.id),{onSuccess:()=>{l==null||l()}})};return s.jsxs(N,{className:"max-w-md max-h-[90vh] overflow-y-auto",children:[s.jsx(g,{className:"pb-4 border-b",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:s.jsx(L,{className:"h-5 w-5 text-purple-600"})}),s.jsxs("div",{children:[s.jsx(C,{className:"text-xl font-semibold",children:r("Deal Labels")}),s.jsx("p",{className:"text-sm text-muted-foreground",children:a.name})]})]})}),s.jsx("div",{className:"overflow-y-auto flex-1 p-6",children:s.jsx("div",{className:"space-y-4",children:m.map(e=>s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(k,{id:`label-${e.id}`,checked:n[e.id]||!1,onCheckedChange:i=>h(e.id,!!i)}),s.jsx("label",{htmlFor:`label-${e.id}`,className:"text-sm font-medium cursor-pointer",children:s.jsx("div",{className:"px-3 py-1 rounded text-white text-sm font-medium",style:{backgroundColor:e.color},children:e.name})})]},e.id))})}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx(d,{variant:"outline",onClick:l,children:r("Cancel")}),s.jsx(d,{onClick:u,disabled:f,children:r("Save")})]})]})}export{J as default};
