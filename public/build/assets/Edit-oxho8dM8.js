import{j as e}from"./ui-ZHFf5B17.js";import{a as C,b as O,c as q}from"./dialog-BLwxprq_.js";import{X as k,G as w}from"./app-BBiA4mAE.js";import{B as j}from"./button-DYC7yMVq.js";import{L as p}from"./label-DbqhUtKI.js";import{I as m}from"./input-error-DuIbBMgZ.js";import{I as v}from"./input-DqOfVTcn.js";import{S as E,a as I,b as T,c as A,d as l}from"./select-BEhl2QER.js";import{S as _}from"./switch-ByWYyd_6.js";import{r as D}from"./vendor-CcMVubkO.js";import{u as F}from"./useTranslation-CV4_gBnb.js";import{P as Q}from"./plus-C1hmRCnY.js";import{T as J}from"./trash-2-CIuynBL1.js";import"./utils-DrcJ8Itn.js";import"./utils-B-dksMZM.js";import"./x-DVK_F_Gh.js";import"./createLucideIcon-Dov4NOxw.js";/* empty css            */import"./index-BMyiKApA.js";import"./index-BdQq_4o_.js";import"./index-BYFX2qNQ.js";import"./index-BZAHB8Ku.js";import"./chevron-down-Zr-tNTku.js";import"./search-Chs14P_a.js";import"./check-DUlQPeVG.js";function ce({customquestion:a,onSuccess:f}){var y;k().props;const{t}=F(),N=s=>{if(Array.isArray(s))return s;try{const n=JSON.parse(s||"[]");return Array.isArray(n)?n.map((i,r)=>({id:`${r}`,option:i})):[{id:"1",option:""}]}catch{return[{id:"1",option:""}]}},{data:c,setData:o,put:S,processing:g,errors:d}=w({question:a.question??"",type:a.type??"text",options:a.options??"[]",is_required:a.is_required??!1,is_active:a.is_active??!0,sort_order:a.sort_order??0}),[x,u]=D.useState(()=>N(a.options)),b=s=>{s.preventDefault(),S(route("recruitment.custom-questions.update",a.id),{onSuccess:()=>{f()}})};return e.jsxs(C,{children:[e.jsx(O,{children:e.jsx(q,{children:t("Edit Custom Question")})}),e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"question",children:t("Question")}),e.jsx(v,{id:"question",type:"text",value:c.question,onChange:s=>o("question",s.target.value),placeholder:t("Enter Question"),required:!0}),e.jsx(m,{message:d.question})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"type",children:t("Type")}),e.jsxs(E,{value:c.type||"text",onValueChange:s=>{o("type",s),["text","textarea","date","number"].includes(s)?(o("options","[]"),u([])):x.length===0&&u([{id:"1",option:""}])},children:[e.jsx(I,{children:e.jsx(T,{})}),e.jsxs(A,{children:[e.jsx(l,{value:"text",children:t("Text")}),e.jsx(l,{value:"textarea",children:t("Textarea")}),e.jsx(l,{value:"select",children:t("Select")}),e.jsx(l,{value:"radio",children:t("Radio")}),e.jsx(l,{value:"checkbox",children:t("Checkbox")}),e.jsx(l,{value:"date",children:t("Date")}),e.jsx(l,{value:"number",children:t("Number")})]})]}),e.jsx(m,{message:d.type})]}),!["text","textarea","date","number"].includes(c.type)&&e.jsxs("div",{children:[e.jsx(p,{children:t("Options")}),e.jsx("div",{className:"space-y-2",children:x.map((s,n)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{value:s.option||"",onChange:i=>{const r=[...x];r[n]={...r[n],option:i.target.value},u(r),o("options",JSON.stringify(r.map(h=>h.option).filter(h=>h.trim()!=="")))},placeholder:t("Enter Option"),className:"flex-1"}),n===0?e.jsx(j,{type:"button",size:"sm",onClick:()=>{const i=[...x];i.push({id:Date.now().toString(),option:""}),u(i)},className:"h-8 w-8 p-0",children:e.jsx(Q,{className:"h-4 w-4"})}):e.jsx(j,{type:"button",variant:"ghost",size:"sm",onClick:()=>{const i=x.filter((r,h)=>h!==n);u(i),o("options",JSON.stringify(i.map(r=>r.option).filter(r=>r.trim()!=="")))},className:"h-8 w-8 p-0 text-destructive hover:text-destructive",children:e.jsx(J,{className:"h-4 w-4"})})]},s.id||n))}),e.jsx(m,{message:d.options})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_,{id:"is_required",checked:c.is_required||!1,onCheckedChange:s=>o("is_required",!!s)}),e.jsx(p,{htmlFor:"is_required",className:"cursor-pointer",children:t("Is Required")}),e.jsx(m,{message:d.is_required})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_,{id:"is_active",checked:c.is_active||!1,onCheckedChange:s=>o("is_active",!!s)}),e.jsx(p,{htmlFor:"is_active",className:"cursor-pointer",children:t("Is Active")}),e.jsx(m,{message:d.is_active})]})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"sort_order",children:t("Sort Order")}),e.jsx(v,{id:"sort_order",type:"number",step:"1",min:"0",value:((y=c.sort_order)==null?void 0:y.toString())||"0",onChange:s=>o("sort_order",parseInt(s.target.value)||0),placeholder:t("Enter Sort Order")}),e.jsx(m,{message:d.sort_order})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(j,{type:"button",variant:"outline",onClick:f,children:t("Cancel")}),e.jsx(j,{type:"submit",disabled:g,children:t(g?"Updating...":"Update")})]})]})]})}export{ce as default};
