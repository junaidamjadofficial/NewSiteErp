import{j as e}from"./ui-ZHFf5B17.js";import{r as u}from"./vendor-CcMVubkO.js";import{X as Gs,G as E,S as Xs,A as v,a as Js}from"./app-BBiA4mAE.js";import{u as se}from"./usePageButtons-Dl7ivmUg.js";import{A as Qs}from"./authenticated-layout-CIIwr118.js";import{B as a}from"./button-DYC7yMVq.js";import{C as w,a as D,b as S,c as _}from"./card-DHszHnbI.js";import{D as B,a as q,b as z,c as L}from"./dialog-BLwxprq_.js";import{C as te}from"./confirmation-dialog-mYyCtWPl.js";import{S as Ke,a as Re,b as He,c as Ge,d as V}from"./select-BEhl2QER.js";import{M as Xe}from"./multi-select-enhanced-C0hF2-Yw.js";import{I as re}from"./input-DqOfVTcn.js";import{T as ie}from"./textarea-DxQ_BnuT.js";import{L as n}from"./label-DbqhUtKI.js";import{D as O}from"./date-picker-CVthJV3y.js";import{C as ae}from"./currency-input-BZrT8lhz.js";import{T as j,a as o,b as c,c as m}from"./tooltip-C7wT1CW2.js";import{a as U,f as Je,j as Ws,l as Ys}from"./helpers-QYnGjXad.js";import{S as Zs}from"./slider-CIevYFX0.js";import{D as et}from"./data-table--afTq2As.js";import{N as st}from"./no-records-found-C2RGIdAh.js";import{I as P}from"./input-error-DuIbBMgZ.js";import{L as tt}from"./LineChart-d0s5dWyp.js";import{M as rt}from"./MediaPicker-CztOgrDm.js";import{u as Q}from"./useFormFields-BwNmEYJY.js";import{u as it}from"./useTranslation-CV4_gBnb.js";import{s as le,p as at}from"./lucide-react-DCPJy5XZ.js";import{S as Qe}from"./square-pen-D0WnMiRU.js";import{S as lt}from"./square-check-big-jIi-JzLQ.js";import{B as We}from"./bug-DBRM7-K0.js";import{P as ne}from"./plus-C1hmRCnY.js";import{T as W}from"./trash-2-CIuynBL1.js";import{A as de}from"./activity-DJdfPCaa.js";import{E as nt}from"./eye-C8Kok_ez.js";import{D as dt}from"./download-DpWzK9fg.js";import{F as Ye}from"./file-BD5h_kEE.js";import{C as ot}from"./calendar-DvmJ2XsD.js";import{I as ct}from"./image-C8M1mNs8.js";import{V as mt}from"./video-NvD8FrU_.js";import{M as xt}from"./music-CaAUDMgx.js";import{F as pt}from"./file-text-BmYvzZ5U.js";/* empty css            */import"./radio-group-Bg6nc_Xb.js";import"./index-BYFX2qNQ.js";import"./utils-DrcJ8Itn.js";import"./utils-B-dksMZM.js";import"./circle-bmoNtd-e.js";import"./createLucideIcon-Dov4NOxw.js";import"./index-BMyiKApA.js";import"./separator-DVB3ZNtW.js";import"./x-DVK_F_Gh.js";import"./panel-left-BJWtIBes.js";import"./chevron-right-BtPraxo3.js";import"./check-DUlQPeVG.js";import"./chevron-down-Zr-tNTku.js";import"./calculator-T0kIVMoE.js";import"./dollar-sign-CaNGv6yE.js";import"./code-zYLA2qp9.js";import"./target-DdsyVirL.js";import"./panels-top-left-jTb_Yuv7.js";import"./trending-up-DP6snsap.js";import"./layers-DwAcD_sb.js";import"./file-check-Y_ulrqs4.js";import"./users-OzPx1l-a.js";import"./headphones-BkxDRJ_v.js";import"./clock-3RA97mBy.js";import"./credit-card-CditegsP.js";import"./mail-XtzF_PXw.js";import"./package-rNDE_pCr.js";import"./settings-BQeqI1zG.js";import"./shopping-cart-Dh9vxMBK.js";import"./message-circle-TeiA59tv.js";import"./use-favicon-CGM0zyjT.js";import"./search-Chs14P_a.js";import"./useFlashMessages-3JrX8KdK.js";import"./refresh-cw-DjdBLqaG.js";import"./language-lyE4jnGJ.js";import"./globe-CbUyzYsc.js";import"./avatar-BOBGUcwF.js";import"./index-DaFL_H0m.js";import"./sun-BFQeGX5r.js";import"./moon-CVX3oKK_.js";import"./monitor-CEyd7Aqp.js";import"./cookie-consent-OcwKHqiv.js";import"./switch-ByWYyd_6.js";import"./cookie-DkEMAjDp.js";import"./user-x-DrMYVmY_.js";import"./index-BdQq_4o_.js";import"./index-BZAHB8Ku.js";import"./popover-fYI5j510.js";import"./badge-CV60sqBJ.js";import"./react-datepicker-BHcKmBHW.js";import"./table-DHznIK9t.js";import"./chevron-left-CMBAh2v_.js";import"./arrow-up-down-D4TAtYCt.js";import"./arrow-up-BLTFDVcR.js";import"./CategoricalChart-C_J4m0OX.js";import"./with-selector-CP8JaRn2.js";import"./index-8JwjhRSi.js";import"./CartesianChart-xUg5Tgkn.js";import"./Legend-Cwc2mKgr.js";import"./ActivePoints-Cn_xkUZK.js";import"./ErrorBarContext-D-RSKWTC.js";import"./upload-KhHqnUys.js";import"./sparkles-yKnt-shd.js";import"./index-Chjiymov.js";import"./undo-D3tFEvb3.js";import"./arrow-left-vDNMjIRy.js";import"./arrow-right-left-B2Yy1Hqs.js";import"./arrow-right-0NYEyiZu.js";import"./award-DEt0AONC.js";import"./bar-chart-3-BYjotveo.js";import"./ticket-CPT2TfbK.js";import"./briefcase-CLMrDjdn.js";import"./building-2-DdQko_34.js";import"./building-BGlxQx6H.js";import"./circle-alert-De6bM8Qi.js";import"./circle-check-big-CGCa8M7E.js";import"./circle-check-D2gG32Ng.js";import"./circle-help-CE56Mn6R.js";import"./circle-user-BD0wePLr.js";import"./clipboard-check-DGMK1yDo.js";import"./copy-BfAQhGce.js";import"./database-D2i84R0z.js";import"./external-link-DAKK0PZS.js";import"./eye-off-ub0Xog94.js";import"./youtube-ChBQIMoB.js";import"./server-CDiKS8E7.js";import"./file-image-pr_SxnfH.js";import"./mouse-pointer-CQQJQqrL.js";import"./file-question-CR2qrXfg.js";import"./folder-open-DRNg9mxz.js";import"./grid-3x3-BHB0xGDK.js";import"./grip-vertical-DvbJAfYs.js";import"./hard-drive-7HjIbMwJ.js";import"./hash-C8mMST2K.js";import"./home-lZzXcexX.js";import"./info-CuYUIdBA.js";import"./lightbulb-C1h491_-.js";import"./link-2Bt5o4zZ.js";import"./list-BVwWsOhE.js";import"./loader-circle-Dxyp6AS6.js";import"./map-pin-BtfG8ici.js";import"./megaphone-iO7AZhEi.js";import"./menu-CO-7TdWM.js";import"./message-square-warning-CPUQBKZG.js";import"./message-square-U01x5Y17.js";import"./milestone-BpY-7UvC.js";import"./minus-B1ExV4rD.js";import"./octagon-alert-_2iLUPIm.js";import"./palette-DZNd6Hfk.js";import"./paperclip-C_mZqrNn.js";import"./pen-tool-CqsLxcXF.js";import"./ruler-IeLgeA9Q.js";import"./phone-B_vxbsBq.js";import"./play-D1oIUpjL.js";import"./printer-BDwaclJ1.js";import"./radio-XBYO3AW-.js";import"./rotate-ccw-C3yG9Vnv.js";import"./save-B89BgUdM.js";import"./send-J2b8i-sO.js";import"./shield-alert-DzGJ4C70.js";import"./shield-DylwwFFg.js";import"./star-D9yXa3BZ.js";import"./sticky-note-C2BipOAH.js";import"./tag-B8n-xlTS.js";import"./timer-B_1PmEWX.js";import"./trending-down-L1xdWaEg.js";import"./triangle-alert-Ad-nVD4c.js";import"./type-J3x5O6X0.js";import"./user-check-BJVxGvgh.js";import"./user-DQm7Eg7s.js";import"./zap-DKIHv8g2.js";function Ea(){var De,Se,_e,ke,Me,Ie,Ee,Oe,Pe,Te,Fe,Ae,Be,qe,ze,Le,Ve,Ue,$e;const{t}=it(),{project:r,teamMembers:Ze,available_clients:es,projectStats:$,chartData:ss,chartLines:ts,activityLogs:Y,projectFiles:Z,auth:d}=Gs().props,rs=se("projectShowButtons",{project:r}),is=se("spreadsheetBtn",{module:"Project",sub_module:r.id}),as=se("businessProcessMappingBtn",{module:"Taskly",submodule:"Project",id:r.id}),[ls,K]=u.useState(!1),[ns,R]=u.useState(!1),[ds,T]=u.useState(!1),[os,H]=u.useState(!1),[cs,G]=u.useState(!1),[ht,ut]=u.useState(!1),[jt,oe]=u.useState(null),[ms,ce]=u.useState(null),[xs,me]=u.useState(!1),[X,xe]=u.useState({isOpen:!1,userId:null,userName:""}),[J,pe]=u.useState({isOpen:!1,clientId:null,clientName:""}),[ee,he]=u.useState({isOpen:!1,milestoneId:null}),ps=s=>{he({isOpen:!0,milestoneId:s})},ue=()=>{he({isOpen:!1,milestoneId:null})},hs=()=>{ee.milestoneId&&v.delete(route("project.milestones.delete",r.id),{data:{id:ee.milestoneId},onSuccess:()=>ue()})},{data:us,setData:js,post:gs,processing:je,errors:ge,reset:fs}=E({user_ids:[]}),{data:vs,setData:Ns,post:bs,processing:fe,errors:ve,reset:ys}=E({client_ids:[]}),{data:b,setData:y,post:Cs,processing:Ne,errors:h,reset:ws}=E({title:"",cost:"",start_date:"",end_date:"",summary:""}),{data:g,setData:f,put:Ds,processing:be,errors:l,reset:Ss}=E({title:"",cost:"",start_date:"",end_date:"",summary:"",status:"Incomplete",progress:0,milestone_id:null}),{data:k,setData:C,put:_s,processing:ye,errors:N,reset:ks}=E({name:"",description:"",budget:0,start_date:"",end_date:"",status:"Ongoing"}),{data:Ms,setData:Is,post:gt,processing:ft,errors:Es,reset:vt}=E({images:[]}),Os=Q("aiField",b,y,h,"create","title","Title","taskly","milestone"),Ps=Q("aiField",b,y,h,"create","summary","Summary","taskly","milestone"),Ts=Q("aiField",g,f,l,"edit","title","Title","taskly","milestone"),Fs=Q("aiField",g,f,l,"edit","summary","Summary","taskly","milestone"),As=async()=>{var s,i;if((i=(s=d.user)==null?void 0:s.permissions)!=null&&i.includes("edit-project")){me(!0);try{const p=(await Js.get(route("project.edit",r.id))).data.project;ce(p),C({name:p.name||"",description:p.description||"",budget:p.budget||0,start_date:p.start_date||"",end_date:p.end_date||"",status:p.status||"Ongoing"}),G(!0)}catch(x){console.error("Failed to fetch project data:",x)}finally{me(!1)}}},Bs=s=>{s.preventDefault(),gs(route("project.invite",r.id),{onSuccess:()=>{K(!1),fs()}})},qs=s=>{s.preventDefault(),bs(route("project.invite-client",r.id),{onSuccess:()=>{R(!1),ys()}})},zs=s=>{s.preventDefault(),Cs(route("project.milestones.store",r.id),{onSuccess:()=>{T(!1),ws()}})},Ls=s=>{oe(s),f({title:s.title,cost:s.cost||"",start_date:s.start_date||"",end_date:s.end_date||"",summary:s.summary||"",status:s.status||"Incomplete",progress:s.progress||0,milestone_id:s.id}),H(!0)},Vs=s=>{s.preventDefault(),Ds(route("project.milestones.update",r.id),{onSuccess:()=>{H(!1),Ss(),oe(null)}})},Us=s=>{s.preventDefault(),_s(route("project.update",r.id),{onSuccess:()=>{G(!1),ks(),ce(null)}})},$s=(s,i)=>{xe({isOpen:!0,userId:s,userName:i})},Ce=()=>{xe({isOpen:!1,userId:null,userName:""})},Ks=()=>{X.userId&&v.delete(route("project.delete-member",r.id),{data:{user_id:X.userId},onSuccess:()=>Ce()})},Rs=(s,i)=>{pe({isOpen:!0,clientId:s,clientName:i})},we=()=>{pe({isOpen:!1,clientId:null,clientName:""})},Hs=()=>{J.clientId&&v.delete(route("project.delete-client",r.id),{data:{client_id:J.clientId},onSuccess:()=>we()})};return e.jsxs(Qs,{breadcrumbs:[{label:t("Project"),url:route("project.dashboard.index")},{label:r.name}],pageTitle:r.name,pageActions:e.jsx("div",{className:"flex gap-2",children:e.jsxs(j,{children:[rs.map(s=>e.jsx("div",{children:s.component},s.id)),is.map(s=>e.jsx("div",{children:s.component},s.id)),as.map(s=>e.jsx("div",{children:s.component},s.id)),((Se=(De=d.user)==null?void 0:De.permissions)==null?void 0:Se.includes("manage-project-task"))&&e.jsxs(o,{delayDuration:0,children:[e.jsx(c,{asChild:!0,children:e.jsx(a,{size:"sm",onClick:()=>v.get(route("project.tasks.kanban",r.id)),children:e.jsx(at,{className:"h-4 w-4"})})}),e.jsx(m,{children:e.jsx("p",{children:t("Task Kanban")})})]}),((ke=(_e=d.user)==null?void 0:_e.permissions)==null?void 0:ke.includes("manage-project-bug"))&&e.jsxs(o,{delayDuration:0,children:[e.jsx(c,{asChild:!0,children:e.jsx(a,{size:"sm",onClick:()=>v.get(route("project.bugs.kanban",r.id)),children:e.jsx(We,{className:"h-4 w-4"})})}),e.jsx(m,{children:e.jsx("p",{children:t("Bug")})})]}),((Ie=(Me=d.user)==null?void 0:Me.permissions)==null?void 0:Ie.includes("manage-project-task"))&&e.jsxs(o,{delayDuration:0,children:[e.jsx(c,{asChild:!0,children:e.jsx(a,{size:"sm",onClick:()=>v.get(route("project.tasks.calendar",r.id)),children:e.jsx(ot,{className:"h-4 w-4"})})}),e.jsx(m,{children:e.jsx("p",{children:t("Calendar View")})})]})]})}),children:[e.jsx(Xs,{title:r.name}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsxs(w,{className:"shadow-sm",children:[e.jsx(D,{className:"p-6 border-b bg-gray-50/50",children:e.jsxs(S,{className:"text-lg flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-5 w-5 text-blue-600"}),t("Project Details")]}),e.jsx(j,{children:e.jsxs(o,{delayDuration:0,children:[e.jsx(c,{asChild:!0,children:e.jsx(a,{size:"sm",variant:"ghost",onClick:As,disabled:xs,className:"h-8 w-8 p-0 text-blue-600 hover:text-blue-700",children:e.jsx(Qe,{className:"h-4 w-4"})})}),e.jsx(m,{children:e.jsx("p",{children:t("Edit")})})]})})]})}),e.jsx(_,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600 min-w-0 flex-shrink-0",children:t("Status")}),e.jsx("span",{className:`text-sm px-2 py-1 rounded-full text-right ${r.status==="Finished"?"bg-green-100 text-green-800":r.status==="Ongoing"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:t(r.status)})]}),e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600 min-w-0 flex-shrink-0",children:t("Start Date")}),e.jsx("span",{className:"text-sm text-gray-900 text-right",children:r.start_date?U(r.start_date):"-"})]}),e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600 min-w-0 flex-shrink-0",children:t("End Date")}),e.jsx("span",{className:`text-sm text-right ${r.end_date&&new Date(r.end_date)<new Date?"text-red-600":"text-gray-900"}`,children:r.end_date?U(r.end_date):"-"})]}),r.description&&e.jsxs("div",{className:"pt-2 border-t border-gray-100",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600 block mb-2",children:t("Description")}),e.jsx("p",{className:"text-sm text-gray-900 leading-relaxed",children:r.description})]})]})})]}),e.jsxs(w,{className:"shadow-sm",children:[e.jsx(D,{className:"p-6 border-b bg-gray-50/50",children:e.jsxs(S,{className:"text-lg flex items-center gap-2",children:[e.jsx(le,{className:"h-5 w-5 text-blue-600"}),t("Project Overview")]})}),e.jsx(_,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:`text-center p-4 bg-blue-50 rounded-lg border border-blue-100 relative ${(Oe=(Ee=d.user)==null?void 0:Ee.permissions)!=null&&Oe.includes("manage-project-task")?"cursor-pointer":""}`,onClick:()=>{var s,i;return((i=(s=d.user)==null?void 0:s.permissions)==null?void 0:i.includes("manage-project-task"))&&v.get(route("project.tasks.index",{project_id:r.id}))},children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:$.taskCount}),e.jsx("div",{className:"text-sm font-medium text-gray-600",children:t("Tasks")}),e.jsx(j,{children:e.jsxs(o,{delayDuration:0,children:[e.jsx(c,{asChild:!0,children:e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx(lt,{className:"h-4 w-4 text-blue-600"})})}),e.jsx(m,{children:e.jsx("p",{children:t("View Tasks")})})]})})]}),e.jsxs("div",{className:`text-center p-4 bg-red-50 rounded-lg border border-red-100 relative ${(Te=(Pe=d.user)==null?void 0:Pe.permissions)!=null&&Te.includes("manage-project-bug")?"cursor-pointer":""}`,onClick:()=>{var s,i;return((i=(s=d.user)==null?void 0:s.permissions)==null?void 0:i.includes("manage-project-bug"))&&v.get(route("project.bugs.index",{project_id:r.id}))},children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:$.bugCount}),e.jsx("div",{className:"text-sm font-medium text-gray-600",children:t("Bug")}),e.jsx(j,{children:e.jsxs(o,{delayDuration:0,children:[e.jsx(c,{asChild:!0,children:e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx(We,{className:"h-4 w-4 text-red-600"})})}),e.jsx(m,{children:e.jsx("p",{children:t("View Bug")})})]})})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg border border-green-100",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:Math.round($.daysLeft)}),e.jsx("div",{className:"text-sm font-medium text-gray-600",children:t("Days Left")})]}),e.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-lg border border-yellow-100",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:Je($.budget)}),e.jsx("div",{className:"text-sm font-medium text-gray-600",children:t("Budget")})]})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-9 gap-6",children:[e.jsxs(w,{className:"md:col-span-3",children:[e.jsxs(D,{className:"flex flex-row items-center justify-between",children:[e.jsx(S,{className:"text-xl",children:t("Team Members")}),((Ae=(Fe=d.user)==null?void 0:Fe.permissions)==null?void 0:Ae.includes("invite-project-member"))&&e.jsx(j,{children:e.jsxs(o,{delayDuration:0,children:[e.jsx(c,{asChild:!0,children:e.jsx(a,{size:"sm",onClick:()=>K(!0),children:e.jsx(ne,{className:"h-4 w-4"})})}),e.jsx(m,{children:e.jsx("p",{children:t("Create")})})]})})]}),e.jsx(_,{children:e.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:[r.team_members.map(s=>{var i,x;return e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[e.jsx("span",{className:"text-sm",children:s.name}),((x=(i=d.user)==null?void 0:i.permissions)==null?void 0:x.includes("delete-project-member"))&&e.jsx(j,{children:e.jsxs(o,{delayDuration:0,children:[e.jsx(c,{asChild:!0,children:e.jsx(a,{size:"sm",variant:"ghost",onClick:()=>$s(s.id,s.name),className:"h-6 w-6 p-0 text-red-600 hover:text-red-700",children:e.jsx(W,{className:"h-3 w-3"})})}),e.jsx(m,{children:e.jsx("p",{children:t("Delete")})})]})})]},s.id)}),r.team_members.length===0&&e.jsx("p",{className:"text-sm text-gray-500",children:t("No team members added yet.")})]})})]}),e.jsxs(w,{className:"md:col-span-3",children:[e.jsxs(D,{className:"flex flex-row items-center justify-between",children:[e.jsx(S,{className:"text-xl",children:t("Clients")}),((qe=(Be=d.user)==null?void 0:Be.permissions)==null?void 0:qe.includes("invite-project-client"))&&e.jsx(j,{children:e.jsxs(o,{delayDuration:0,children:[e.jsx(c,{asChild:!0,children:e.jsx(a,{size:"sm",onClick:()=>R(!0),children:e.jsx(ne,{className:"h-4 w-4"})})}),e.jsx(m,{children:e.jsx("p",{children:t("Create")})})]})})]}),e.jsx(_,{children:e.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:[(ze=r.clients)==null?void 0:ze.map(s=>{var i,x;return e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[e.jsx("span",{className:"text-sm",children:s.name}),((x=(i=d.user)==null?void 0:i.permissions)==null?void 0:x.includes("delete-project-client"))&&e.jsx(j,{children:e.jsxs(o,{delayDuration:0,children:[e.jsx(c,{asChild:!0,children:e.jsx(a,{size:"sm",variant:"ghost",onClick:()=>Rs(s.id,s.name),className:"h-6 w-6 p-0 text-red-600 hover:text-red-700",children:e.jsx(W,{className:"h-3 w-3"})})}),e.jsx(m,{children:e.jsx("p",{children:t("Delete")})})]})})]},s.id)}),(!r.clients||r.clients.length===0)&&e.jsx("p",{className:"text-sm text-gray-500",children:t("No clients added yet.")})]})})]}),e.jsxs(w,{className:"md:col-span-3",children:[e.jsx(D,{children:e.jsx(S,{className:"text-xl",children:t("Progress")})}),e.jsx(_,{className:"px-0 py-4",children:e.jsx(tt,{data:ss||[],dataKey:"",xAxisKey:"name",height:200,showGrid:!1,lines:ts||[],margin:{left:0,right:0,top:5,bottom:5}})})]})]}),((Ve=(Le=d.user)==null?void 0:Le.permissions)==null?void 0:Ve.includes("manage-project-milestone"))&&e.jsxs(w,{className:"mt-6 shadow-sm",children:[e.jsxs(D,{className:"flex flex-row items-center justify-between p-6 border-b bg-gray-50/50",children:[e.jsx(S,{className:"text-xl",children:t("Milestones")}),(($e=(Ue=d.user)==null?void 0:Ue.permissions)==null?void 0:$e.includes("create-project-milestone"))&&e.jsx(j,{children:e.jsxs(o,{delayDuration:0,children:[e.jsx(c,{asChild:!0,children:e.jsx(a,{size:"sm",onClick:()=>T(!0),children:e.jsx(ne,{className:"h-4 w-4"})})}),e.jsx(m,{children:e.jsx("p",{children:t("Create")})})]})})]}),e.jsx(_,{className:"p-0",children:e.jsx("div",{className:"overflow-y-auto scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-100 max-h-[70vh] rounded-none w-full",children:e.jsx("div",{className:"min-w-[800px]",children:e.jsx(et,{data:r.milestones||[],columns:[{key:"title",header:t("Title")},{key:"cost",header:t("Cost"),render:s=>s?Je(s):"-"},{key:"start_date",header:t("Start Date"),render:s=>s?U(s):"-"},{key:"end_date",header:t("End Date"),render:s=>{if(!s)return"-";const i=new Date(s)<new Date;return e.jsx("span",{className:i?"text-red-600":"",children:U(s)})}},{key:"status",header:t("Status"),render:s=>e.jsx("span",{className:`px-2 py-1 rounded-full text-sm ${s==="Complete"?"bg-green-100 text-green-800":s==="Ongoing"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:t(s)})},{key:"progress",header:t("Progress"),render:s=>s?e.jsxs("div",{className:"flex items-center gap-2 min-w-24",children:[e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${s}%`}})}),e.jsxs("span",{className:"text-xs font-medium text-gray-600 min-w-8",children:[s,"%"]})]}):"-"},{key:"actions",header:t("Action"),render:(s,i)=>{var x,p,F,M;return e.jsxs("div",{className:"flex gap-1",children:[((p=(x=d.user)==null?void 0:x.permissions)==null?void 0:p.includes("edit-project-milestone"))&&e.jsxs(o,{delayDuration:0,children:[e.jsx(c,{asChild:!0,children:e.jsx(a,{variant:"ghost",size:"sm",onClick:()=>Ls(i),className:"h-8 w-8 p-0 text-blue-600 hover:text-blue-700",children:e.jsx(Qe,{className:"h-4 w-4"})})}),e.jsx(m,{children:e.jsx("p",{children:t("Edit")})})]}),((M=(F=d.user)==null?void 0:F.permissions)==null?void 0:M.includes("delete-project-milestone"))&&e.jsxs(o,{delayDuration:0,children:[e.jsx(c,{asChild:!0,children:e.jsx(a,{variant:"ghost",size:"sm",onClick:()=>ps(i.id),className:"h-8 w-8 p-0 text-destructive hover:text-destructive",children:e.jsx(W,{className:"h-4 w-4"})})}),e.jsx(m,{children:e.jsx("p",{children:t("Delete")})})]})]})}}],className:"rounded-none",emptyState:e.jsx(st,{icon:le,title:t("No milestones found"),description:t("Get started by creating your first milestone."),hasFilters:!1,onClearFilters:()=>{},createPermission:"create-milestone",onCreateClick:()=>T(!0),createButtonText:t("Create Milestone"),className:"h-auto"})})})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mt-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(w,{className:"shadow-sm h-full flex flex-col",children:[e.jsx(D,{className:"p-6 border-b bg-gray-50/50",children:e.jsxs(S,{className:"text-lg flex items-center gap-2",children:[e.jsx(de,{className:"h-5 w-5 text-green-600"}),t("Recent Activity")]})}),e.jsx(_,{className:"p-4 flex-1 flex flex-col",children:e.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-100 max-h-96",children:Y&&Y.length>0?e.jsx("div",{className:"grid grid-cols-2 gap-4",children:Y.map(s=>e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(de,{className:"h-3 w-3 text-green-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-xs font-medium text-gray-900 line-clamp-2",dangerouslySetInnerHTML:{__html:s.remark}}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:U(s.created_at)})]})]},s.id))}):e.jsxs("div",{className:"text-center py-8 text-gray-500 flex-1 flex flex-col items-center justify-center",children:[e.jsx(de,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:t("No recent activity")})]})})})]})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white border rounded-lg p-6 shadow-sm h-full flex flex-col",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:t("Files")}),e.jsxs("div",{className:"mb-4",children:[e.jsx(rt,{value:Ms.images,onChange:s=>{const i=Array.isArray(s)?s:[s].filter(Boolean);if(i.length>0){const x={images:i};v.post(route("project.files.store",r.id),x,{onSuccess:()=>{Is("images",[])}})}},multiple:!0,placeholder:t("Select files"),showPreview:!1,label:""}),e.jsx(P,{message:Es.images})]}),Z&&Z.length>0?e.jsx("div",{className:"space-y-2 flex-1 overflow-y-auto max-h-96 scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-100",children:Z.map(s=>{var F;const i=M=>{var A;const I=(A=M.split(".").pop())==null?void 0:A.toLowerCase();return["jpg","jpeg","png","gif","webp","svg"].includes(I||"")?e.jsx(ct,{className:"h-5 w-5 text-blue-500"}):["mp4","avi","mov","wmv","flv","webm"].includes(I||"")?e.jsx(mt,{className:"h-5 w-5 text-purple-500"}):["mp3","wav","flac","aac","ogg"].includes(I||"")?e.jsx(xt,{className:"h-5 w-5 text-green-500"}):["txt","doc","docx","pdf","rtf"].includes(I||"")?e.jsx(pt,{className:"h-5 w-5 text-red-500"}):e.jsx(Ye,{className:"h-5 w-5 text-gray-500"})},x=M=>{var A;const I=(A=M.split(".").pop())==null?void 0:A.toLowerCase();return["jpg","jpeg","png","gif","webp","svg"].includes(I||"")};let p=Ws(s.file_path);return e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg border hover:bg-gray-100 transition-colors group",children:[e.jsx("div",{className:"flex-shrink-0",children:x(s.file_path)?e.jsx("img",{src:p,alt:s.file_name,className:"w-10 h-10 object-cover rounded border"}):e.jsx("div",{className:"w-10 h-10 bg-white rounded border flex items-center justify-center",children:i(s.file_name)})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",title:s.file_name,children:s.file_name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[(F=s.file_name.split(".").pop())==null?void 0:F.toUpperCase()," file"]})]}),e.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx(j,{children:e.jsxs(o,{delayDuration:0,children:[e.jsx(c,{asChild:!0,children:e.jsx(a,{size:"sm",variant:"ghost",onClick:()=>window.open(p,"_blank"),className:"h-8 w-8 p-0 text-green-600 hover:text-green-700",children:e.jsx(nt,{className:"h-4 w-4"})})}),e.jsx(m,{children:e.jsx("p",{children:t("View")})})]})}),e.jsx(j,{children:e.jsxs(o,{delayDuration:0,children:[e.jsx(c,{asChild:!0,children:e.jsx(a,{size:"sm",variant:"ghost",onClick:()=>Ys(p),className:"h-8 w-8 p-0 text-blue-600 hover:text-blue-700",children:e.jsx(dt,{className:"h-4 w-4"})})}),e.jsx(m,{children:e.jsx("p",{children:t("Download")})})]})}),e.jsx(j,{children:e.jsxs(o,{delayDuration:0,children:[e.jsx(c,{asChild:!0,children:e.jsx(a,{size:"sm",variant:"ghost",onClick:()=>v.delete(route("project.files.delete",s.id)),className:"h-8 w-8 p-0 text-red-600 hover:text-red-700",children:e.jsx(W,{className:"h-4 w-4"})})}),e.jsx(m,{children:e.jsx("p",{children:t("Delete")})})]})})]})]},s.id)})}):e.jsxs("div",{className:"text-center py-8 text-gray-500 flex-1 flex flex-col items-center justify-center",children:[e.jsx(Ye,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:t("No files uploaded yet")})]})]})})]}),e.jsx(B,{open:ls,onOpenChange:K,children:e.jsxs(q,{className:"sm:max-w-md",children:[e.jsx(z,{children:e.jsx(L,{children:t("Team Member")})}),e.jsxs("form",{onSubmit:Bs,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(n,{required:!0,children:t("Users")}),e.jsx(Xe,{options:Ze.map(s=>({value:s.id.toString(),label:s.name})),value:us.user_ids.map(s=>s.toString()),onValueChange:s=>js("user_ids",s.map(i=>parseInt(i))),placeholder:t("Select users"),searchable:!0}),ge.user_ids&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:ge.user_ids})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(a,{type:"button",variant:"outline",onClick:()=>K(!1),children:t("Cancel")}),e.jsx(a,{type:"submit",disabled:je,children:t(je?"Adding...":"Add")})]})]})]})}),e.jsx(B,{open:ns,onOpenChange:R,children:e.jsxs(q,{className:"sm:max-w-md",children:[e.jsx(z,{children:e.jsx(L,{children:t("Share To Client")})}),e.jsxs("form",{onSubmit:qs,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(n,{required:!0,children:t("Clients")}),e.jsx(Xe,{options:es.map(s=>({value:s.id.toString(),label:s.name})),value:vs.client_ids.map(s=>s.toString()),onValueChange:s=>Ns("client_ids",s.map(i=>parseInt(i))),placeholder:t("Select clients"),searchable:!0}),ve.client_ids&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:ve.client_ids})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(a,{type:"button",variant:"outline",onClick:()=>R(!1),children:t("Cancel")}),e.jsx(a,{type:"submit",disabled:fe,children:t(fe?"Inviting...":"Invite")})]})]})]})}),e.jsx(B,{open:ds,onOpenChange:T,children:e.jsxs(q,{children:[e.jsx(z,{children:e.jsx(L,{children:t("Create Milestone")})}),e.jsxs("form",{onSubmit:zs,className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex gap-2 items-end",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(n,{htmlFor:"title",children:t("Milestone Title")}),e.jsx(re,{id:"title",value:b.title,onChange:s=>y("title",s.target.value),placeholder:t("Enter milestone title"),className:h.title?"border-red-500":"",required:!0}),h.title&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:h.title})]}),Os.map(s=>e.jsx("div",{children:s.component},s.id))]})}),e.jsx("div",{children:e.jsx(ae,{id:"cost",required:!0,label:t("Milestone Cost"),value:b.cost,onChange:s=>y("cost",s),error:h.cost})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{required:!0,children:t("Start Date")}),e.jsx(O,{value:b.start_date,onChange:s=>y("start_date",s),placeholder:t("Select start date")}),h.start_date&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:h.start_date})]}),e.jsxs("div",{children:[e.jsx(n,{required:!0,children:t("End Date")}),e.jsx(O,{value:b.end_date,onChange:s=>y("end_date",s),placeholder:t("Select end date")}),h.end_date&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:h.end_date})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(n,{htmlFor:"summary",children:t("Summary")}),e.jsx("div",{className:"flex gap-2",children:Ps.map(s=>e.jsx("div",{children:s.component},s.id))})]}),e.jsx(ie,{id:"summary",rows:3,value:b.summary,onChange:s=>y("summary",s.target.value),placeholder:t("Enter summary"),className:h.summary?"border-red-500":""}),h.summary&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:h.summary})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(a,{type:"button",variant:"outline",onClick:()=>T(!1),children:t("Cancel")}),e.jsx(a,{type:"submit",disabled:Ne,children:t(Ne?"Creating...":"Create")})]})]})]})}),e.jsx(B,{open:os,onOpenChange:H,children:e.jsxs(q,{children:[e.jsx(z,{children:e.jsx(L,{children:t("Edit Milestone")})}),e.jsxs("form",{onSubmit:Vs,className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex gap-2 items-end",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(n,{htmlFor:"edit-title",children:t("Milestone Title")}),e.jsx(re,{id:"edit-title",value:g.title,onChange:s=>f("title",s.target.value),placeholder:t("Enter milestone title"),className:l.title?"border-red-500":"",required:!0}),l.title&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:l.title})]}),Ts.map(s=>e.jsx("div",{children:s.component},s.id))]})}),e.jsx("div",{children:e.jsx(ae,{id:"edit-cost",required:!0,label:t("Milestone Cost"),value:g.cost,onChange:s=>f("cost",s),error:l.cost})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{required:!0,children:t("Start Date")}),e.jsx(O,{value:g.start_date,onChange:s=>f("start_date",s),placeholder:t("Select start date")}),l.start_date&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:l.start_date})]}),e.jsxs("div",{children:[e.jsx(n,{required:!0,children:t("End Date")}),e.jsx(O,{value:g.end_date,onChange:s=>f("end_date",s),placeholder:t("Select end date")}),l.end_date&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:l.end_date})]})]}),e.jsxs("div",{children:[e.jsx(n,{children:t("Status")}),e.jsxs(Ke,{value:g.status,onValueChange:s=>f("status",s),children:[e.jsx(Re,{className:l.status?"border-red-500":"",children:e.jsx(He,{placeholder:t("Select status")})}),e.jsxs(Ge,{children:[e.jsx(V,{value:"Incomplete",children:t("Incomplete")}),e.jsx(V,{value:"Complete",children:t("Complete")})]})]}),l.status&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:l.status})]}),e.jsxs("div",{children:[e.jsxs(n,{htmlFor:"edit-progress",children:[t("Progress")," (",g.progress,"%)"]}),e.jsx(Zs,{value:[g.progress],onValueChange:s=>f("progress",s[0]),max:100,step:1,className:"mt-2"}),l.progress&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:l.progress})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(n,{htmlFor:"edit-summary",children:t("Summary")}),e.jsx("div",{className:"flex gap-2",children:Fs.map(s=>e.jsx("div",{children:s.component},s.id))})]}),e.jsx(ie,{id:"edit-summary",rows:3,value:g.summary,onChange:s=>f("summary",s.target.value),placeholder:t("Enter summary"),className:l.summary?"border-red-500":""}),l.summary&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:l.summary})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(a,{type:"button",variant:"outline",onClick:()=>H(!1),children:t("Cancel")}),e.jsx(a,{type:"submit",disabled:be,children:t(be?"Updating...":"Update")})]})]})]})}),e.jsx(te,{open:X.isOpen,onOpenChange:Ce,title:t("Remove Team Member"),message:t("Are you sure you want to remove {{name}} from this project?",{name:X.userName}),confirmText:t("Delete"),onConfirm:Ks,variant:"destructive"}),e.jsx(te,{open:J.isOpen,onOpenChange:we,title:t("Remove Client"),message:t("Are you sure you want to remove {{name}} from this project?",{name:J.clientName}),confirmText:t("Delete"),onConfirm:Hs,variant:"destructive"}),e.jsx(te,{open:ee.isOpen,onOpenChange:ue,title:t("Delete Milestone"),message:t("Are you sure you want to delete this milestone?"),confirmText:t("Delete"),onConfirm:hs,variant:"destructive"}),e.jsx(B,{open:cs,onOpenChange:G,children:e.jsxs(q,{children:[e.jsx(z,{children:e.jsx(L,{children:t("Edit Project")})}),ms&&e.jsxs("form",{onSubmit:Us,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"edit_project_name",children:t("Name")}),e.jsx(re,{id:"edit_project_name",value:k.name,onChange:s=>C("name",s.target.value),placeholder:t("Enter project name"),className:N.name?"border-red-500":"",required:!0}),e.jsx(P,{message:N.name})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{required:!0,children:t("Start Date")}),e.jsx(O,{value:k.start_date,onChange:s=>C("start_date",s),placeholder:t("Select start date")}),e.jsx(P,{message:N.start_date})]}),e.jsxs("div",{children:[e.jsx(n,{required:!0,children:t("End Date")}),e.jsx(O,{value:k.end_date,onChange:s=>C("end_date",s),placeholder:t("Select end date")}),e.jsx(P,{message:N.end_date})]})]}),e.jsx("div",{children:e.jsx(ae,{label:t("Budget"),value:k.budget.toString(),onChange:s=>C("budget",parseFloat(s)||0),error:N.budget,required:!0})}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"edit_project_status",children:t("Status")}),e.jsxs(Ke,{value:k.status,onValueChange:s=>C("status",s),children:[e.jsx(Re,{children:e.jsx(He,{})}),e.jsxs(Ge,{children:[e.jsx(V,{value:"Ongoing",children:t("Ongoing")}),e.jsx(V,{value:"Onhold",children:t("Onhold")}),e.jsx(V,{value:"Finished",children:t("Finished")})]})]}),e.jsx(P,{message:N.status})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"edit_project_description",children:t("Description")}),e.jsx(ie,{id:"edit_project_description",rows:3,value:k.description,onChange:s=>C("description",s.target.value),placeholder:t("Enter project description"),className:N.description?"border-red-500":""}),e.jsx(P,{message:N.description})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(a,{type:"button",variant:"outline",onClick:()=>G(!1),children:t("Cancel")}),e.jsx(a,{type:"submit",disabled:ye,children:t(ye?"Updating...":"Update")})]})]})]})})]})}export{Ea as default};
