import{j as e}from"./ui-ZHFf5B17.js";import{r as l}from"./vendor-CcMVubkO.js";import{X as v,x as w,a as C}from"./app-BBiA4mAE.js";import{B as b}from"./button-DYC7yMVq.js";import{C as D,c as N}from"./card-DHszHnbI.js";import{D as B}from"./date-picker-CVthJV3y.js";import{C as S}from"./checkbox-Cvtgzug2.js";import{a as k,f as r}from"./helpers-QYnGjXad.js";import{N as T}from"./no-records-found-C2RGIdAh.js";import{u as E}from"./useTranslation-CV4_gBnb.js";import{P as F}from"./printer-BDwaclJ1.js";import{F as P}from"./file-text-BmYvzZ5U.js";/* empty css            */import"./index-BMyiKApA.js";import"./utils-B-dksMZM.js";import"./utils-DrcJ8Itn.js";import"./react-datepicker-BHcKmBHW.js";import"./popover-fYI5j510.js";import"./calendar-DvmJ2XsD.js";import"./createLucideIcon-Dov4NOxw.js";import"./index-BYFX2qNQ.js";import"./check-DUlQPeVG.js";import"./plus-C1hmRCnY.js";function ae({financialYear:n}){var h,f;const{t:s}=E(),{auth:i}=v().props,[c,g]=l.useState((n==null?void 0:n.year_end_date)||""),[d,y]=l.useState(!1),[a,_]=l.useState(null),[m,x]=l.useState(!1),p=async()=>{x(!0);try{const t=await C.get(route("account.reports.vendor-balance"),{params:{as_of_date:c,show_zero_balances:d}});_(t.data)}catch(t){console.error("Error:",t)}finally{x(!1)}};return l.useEffect(()=>{p()},[]),e.jsxs(D,{className:"shadow-sm",children:[e.jsx(N,{className:"p-6 border-b bg-gray-50/50",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:s("As Of Date")}),e.jsx(B,{value:c,onChange:g,placeholder:s("Select date")})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer mb-2",children:[e.jsx(S,{checked:d,onCheckedChange:y}),e.jsx("span",{className:"text-sm",children:s("Show Zero Balances")})]})}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx(b,{onClick:p,disabled:m,size:"sm",children:s(m?"Loading...":"Generate")}),a&&((f=(h=i.user)==null?void 0:h.permissions)==null?void 0:f.includes("print-vendor-balance"))&&e.jsxs(b,{variant:"outline",size:"sm",onClick:()=>window.open(route("account.reports.vendor-balance.print")+`?as_of_date=${c}&show_zero_balances=${d}&download=pdf`,"_blank"),className:"gap-2",children:[e.jsx(F,{className:"h-4 w-4"}),s("Download PDF")]})]})]})}),e.jsx(N,{className:"p-0",children:a&&a.vendors.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-4 bg-gray-50 border-b",children:[e.jsx("h3",{className:"font-semibold text-lg",children:s("Vendor Balance Summary")}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s("As of")," ",k(a.as_of_date)]}),e.jsxs("p",{className:"text-sm font-semibold mt-2",children:[s("Total Outstanding"),": ",r(a.total_balance)]})]}),e.jsx("div",{className:"overflow-y-auto max-h-[60vh]",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-100 sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:s("Vendor")}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:s("Email")}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold",children:s("Total Billed")}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold",children:s("Total Returns & Debit Notes")}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold",children:s("Total Paid")}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold",children:s("Balance")})]})}),e.jsxs("tbody",{children:[a.vendors.map((t,o)=>{var j,u;return e.jsxs("tr",{className:"border-t hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3",children:(u=(j=i.user)==null?void 0:j.permissions)!=null&&u.includes("view-vendor-detail-report")?e.jsx(w,{href:route("account.reports.vendor-detail",t.vendor_id),className:"text-blue-600 hover:text-blue-700",children:t.vendor_name}):t.vendor_name}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:t.vendor_email}),e.jsx("td",{className:"px-4 py-3 text-right",children:r(t.total_billed)}),e.jsx("td",{className:"px-4 py-3 text-right text-red-600",children:r(t.total_returns)}),e.jsx("td",{className:"px-4 py-3 text-right",children:r(t.total_paid)}),e.jsx("td",{className:"px-4 py-3 text-right font-semibold",children:r(t.balance)})]},o)}),e.jsxs("tr",{className:"bg-gray-200 font-bold border-t-4",children:[e.jsx("td",{colSpan:2,className:"px-4 py-4",children:s("Total")}),e.jsx("td",{className:"px-4 py-4 text-right",children:r(a.vendors.reduce((t,o)=>t+o.total_billed,0))}),e.jsx("td",{className:"px-4 py-4 text-right text-red-600",children:r(a.vendors.reduce((t,o)=>t+o.total_returns,0))}),e.jsx("td",{className:"px-4 py-4 text-right",children:r(a.vendors.reduce((t,o)=>t+o.total_paid,0))}),e.jsx("td",{className:"px-4 py-4 text-right",children:r(a.total_balance)})]})]})]})})]}):e.jsx(T,{icon:P,title:s("Vendor Balance Summary"),description:s("No vendor balances found"),className:"h-auto py-12"})})]})}export{ae as default};
