import{j as e}from"./ui-ZHFf5B17.js";import{a as D,b as U,c as V}from"./dialog-BLwxprq_.js";import{X as H,G as M}from"./app-BBiA4mAE.js";import{B as b}from"./button-DYC7yMVq.js";import{L as o}from"./label-DbqhUtKI.js";import{I as l}from"./input-error-DuIbBMgZ.js";import{T as v}from"./textarea-DxQ_BnuT.js";import{S as E,a as N,b as F,c as R,d}from"./select-BEhl2QER.js";import{M as q}from"./multi-select-enhanced-C0hF2-Yw.js";import{R as j}from"./rating-CvplBioO.js";import{r as p}from"./vendor-CcMVubkO.js";import{u as B}from"./useTranslation-CV4_gBnb.js";import"./utils-DrcJ8Itn.js";import"./utils-B-dksMZM.js";import"./x-DVK_F_Gh.js";import"./createLucideIcon-Dov4NOxw.js";/* empty css            */import"./index-BMyiKApA.js";import"./index-BdQq_4o_.js";import"./index-BYFX2qNQ.js";import"./index-BZAHB8Ku.js";import"./input-DqOfVTcn.js";import"./chevron-down-Zr-tNTku.js";import"./search-Chs14P_a.js";import"./check-DUlQPeVG.js";import"./popover-fYI5j510.js";import"./badge-CV60sqBJ.js";import"./star-D9yXa3BZ.js";function he({interviewfeedback:s,onSuccess:w}){var f,S,C,I;const{interviews:m,users:g}=H().props,[u,x]=p.useState(g||[]),{t:r}=B(),{data:i,setData:n,put:T,processing:_,errors:a}=M({technical_rating:s.technical_rating??"",communication_rating:s.communication_rating??"",cultural_fit_rating:s.cultural_fit_rating??"",overall_rating:s.overall_rating??"",strengths:s.strengths??"",weaknesses:s.weaknesses??"",comments:s.comments??"",recommendation:((f=s.recommendation)==null?void 0:f.toString())??"0",interview_id:((S=s.interview_id)==null?void 0:S.toString())||"",interviewer_ids:s.interviewer_ids||[]});p.useEffect(()=>{if(i.interview_id){const t=m.find(c=>c.id.toString()===i.interview_id);if(t&&t.interviewers&&t.interviewers.length>0){const c=g.filter(h=>t.interviewers.includes(h.name)||t.interviewers.includes(h.id.toString()));x(c)}else x([])}else x([])},[i.interview_id,m,g]),p.useEffect(()=>{if(s.interview_id){const t=m.find(c=>c.id.toString()===s.interview_id.toString());if(t&&t.interviewers&&t.interviewers.length>0){const c=g.filter(h=>t.interviewers.includes(h.name)||t.interviewers.includes(h.id.toString()));x(c)}}},[]);const y=t=>{t.preventDefault(),T(route("recruitment.interview-feedbacks.update",s.id),{onSuccess:()=>{w()}})};return e.jsxs(D,{children:[e.jsx(U,{children:e.jsx(V,{children:r("Edit Interview Feedback")})}),e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs(o,{htmlFor:"interview_id",required:!0,children:[r("Interview")," "]}),e.jsxs(E,{value:((C=i.interview_id)==null?void 0:C.toString())||"",onValueChange:t=>n("interview_id",t),children:[e.jsx(N,{children:e.jsx(F,{placeholder:r("Select Interview")})}),e.jsx(R,{children:m.map(t=>e.jsx(d,{value:t.id.toString(),children:t.name},t.id))})]}),e.jsx(l,{message:a.interview_id}),(!m||m.length===0)&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[r("Create interview here. "),e.jsx("a",{href:route("recruitment.interviews.index"),className:"text-blue-600 hover:text-blue-800 cursor-pointer",children:r("interview")}),"."]})]}),e.jsxs("div",{children:[e.jsxs(o,{required:!0,children:[r("Interviewers")," "]}),e.jsx(q,{options:u.map(t=>({value:t.id.toString(),label:t.name})),value:i.interviewer_ids,onValueChange:t=>n("interviewer_ids",t),placeholder:i.interview_id?u.length===0?r("No interviewers available"):r("Select Interviewers..."):r("Select Interview first"),searchable:!0,disabled:!i.interview_id||u.length===0}),e.jsx(l,{message:a.interviewer_ids}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:r("Interviewers are filtered based on selected interview.")}),(!u||u.length===0)&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[r("Create user here. "),e.jsx("a",{href:route("users.index"),className:"text-blue-600 hover:text-blue-800 cursor-pointer",children:r("Create User")}),"."]})]}),e.jsxs("div",{children:[e.jsx(o,{children:r("Technical Rating")}),e.jsx(j,{value:Number(i.technical_rating)||0,onChange:t=>n("technical_rating",t.toString())}),e.jsx(l,{message:a.technical_rating})]}),e.jsxs("div",{children:[e.jsx(o,{children:r("Communication Rating")}),e.jsx(j,{value:Number(i.communication_rating)||0,onChange:t=>n("communication_rating",t.toString())}),e.jsx(l,{message:a.communication_rating})]}),e.jsxs("div",{children:[e.jsx(o,{children:r("Cultural Fit Rating")}),e.jsx(j,{value:Number(i.cultural_fit_rating)||0,onChange:t=>n("cultural_fit_rating",t.toString())}),e.jsx(l,{message:a.cultural_fit_rating})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"recommendation",children:r("Recommendation")}),e.jsxs(E,{value:((I=i.recommendation)==null?void 0:I.toString())||"0",onValueChange:t=>n("recommendation",t),children:[e.jsx(N,{children:e.jsx(F,{})}),e.jsxs(R,{children:[e.jsx(d,{value:"0",children:r("Strong Hire")}),e.jsx(d,{value:"1",children:r("Hire")}),e.jsx(d,{value:"2",children:r("Maybe")}),e.jsx(d,{value:"3",children:r("Reject")}),e.jsx(d,{value:"4",children:r("Strong Reject")})]})]}),e.jsx(l,{message:a.recommendation})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"strengths",children:r("Strengths")}),e.jsx(v,{id:"strengths",value:i.strengths,onChange:t=>n("strengths",t.target.value),placeholder:r("Enter Strengths"),rows:3}),e.jsx(l,{message:a.strengths})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"weaknesses",children:r("Weaknesses")}),e.jsx(v,{id:"weaknesses",value:i.weaknesses,onChange:t=>n("weaknesses",t.target.value),placeholder:r("Enter Weaknesses"),rows:3}),e.jsx(l,{message:a.weaknesses})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"comments",children:r("Comments")}),e.jsx(v,{id:"comments",value:i.comments,onChange:t=>n("comments",t.target.value),placeholder:r("Enter Comments"),rows:3}),e.jsx(l,{message:a.comments})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(b,{type:"button",variant:"outline",onClick:w,children:r("Cancel")}),e.jsx(b,{type:"submit",disabled:_,children:r(_?"Updating...":"Update")})]})]})]})}export{he as default};
