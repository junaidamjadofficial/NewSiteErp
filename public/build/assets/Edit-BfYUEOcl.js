import{j as e}from"./ui-ZHFf5B17.js";import{a as K,b as Z,c as ee}from"./dialog-BLwxprq_.js";import{X as se,G as te,a as y}from"./app-BBiA4mAE.js";import{B}from"./button-DYC7yMVq.js";import{L as c}from"./label-DbqhUtKI.js";import{I as d}from"./input-error-DuIbBMgZ.js";import{I as u}from"./input-DqOfVTcn.js";import{C as Q}from"./currency-input-BZrT8lhz.js";import{T as P}from"./textarea-DxQ_BnuT.js";import{S as b,a as C,b as N,c as S,d as _}from"./select-BEhl2QER.js";import{R as re,a as ie}from"./radio-group-Bg6nc_Xb.js";import{C as le}from"./checkbox-Cvtgzug2.js";import{P as oe}from"./phone-input-d5yugTbF.js";import{D as M}from"./date-picker-CVthJV3y.js";import{r as j}from"./vendor-CcMVubkO.js";import{M as ae}from"./MediaPicker-CztOgrDm.js";import{u as ne}from"./useTranslation-CV4_gBnb.js";import{F as D}from"./file-text-BmYvzZ5U.js";import{I as ce}from"./image-C8M1mNs8.js";import"./utils-DrcJ8Itn.js";import"./utils-B-dksMZM.js";import"./x-DVK_F_Gh.js";import"./createLucideIcon-Dov4NOxw.js";/* empty css            */import"./index-BMyiKApA.js";import"./helpers-QYnGjXad.js";import"./index-BdQq_4o_.js";import"./index-BYFX2qNQ.js";import"./index-BZAHB8Ku.js";import"./chevron-down-Zr-tNTku.js";import"./search-Chs14P_a.js";import"./check-DUlQPeVG.js";import"./circle-bmoNtd-e.js";import"./react-datepicker-BHcKmBHW.js";import"./popover-fYI5j510.js";import"./calendar-DvmJ2XsD.js";import"./badge-CV60sqBJ.js";import"./plus-C1hmRCnY.js";import"./upload-KhHqnUys.js";function Ye({candidate:l,onSuccess:I}){var V,J;const{jobpostings:E,candidatesources:g}=se().props,{t}=ne(),[w,v]=j.useState([]),[h,f]=j.useState({applicant:[],visibility:[]}),[H,W]=j.useState({}),[de,$]=j.useState(null),[L,F]=j.useState(null),[T,k]=j.useState(null),O=s=>{var n;const r=(n=s.split(".").pop())==null?void 0:n.toLowerCase();return["jpg","jpeg","png","gif","webp"].includes(r||"")?e.jsx(ce,{className:"h-8 w-8 text-blue-500"}):e.jsx(D,{className:"h-8 w-8 text-red-500"})},R=(s,r)=>{var n;if(s){const m=(n=s.name.split(".").pop())==null?void 0:n.toLowerCase();if(["jpg","jpeg","png","gif","webp"].includes(m||"")){const p=new FileReader;p.onload=x=>{var U,A,G;r==="profile_photo"?$((U=x.target)==null?void 0:U.result):r==="resume"?F((A=x.target)==null?void 0:A.result):k((G=x.target)==null?void 0:G.result)},p.readAsDataURL(s)}else r==="profile_photo"?$(null):r==="resume"?F(null):k(null)}else r==="profile_photo"?$(null):r==="resume"?F(null):k(null);o(r,s)},X=()=>{var r,n,m;const s={job_id:((r=l.job_id)==null?void 0:r.toString())||"",source_id:((n=l.source_id)==null?void 0:n.toString())||"",first_name:l.first_name??"",last_name:l.last_name??"",email:l.email??"",phone:l.phone??"",gender:l.gender??"",dob:l.dob?typeof l.dob=="string"?l.dob.split("T")[0]:new Date(l.dob).toISOString().split("T")[0]:"",country:l.country??"",state:l.state??"",city:l.city??"",current_company:l.current_company??"",current_position:l.current_position??"",experience_years:l.experience_years??"",current_salary:l.current_salary??"",expected_salary:l.expected_salary??"",notice_period:l.notice_period??"",skills:l.skills??"",education:l.education??"",portfolio_url:l.portfolio_url??"",linkedin_url:l.linkedin_url??"",profile_url:l.profile_path??"",resume:null,cover_letter:null,status:((m=l.status)==null?void 0:m.toString())||"0",application_date:l.application_date?typeof l.application_date=="string"?l.application_date.split("T")[0]:new Date(l.application_date).toISOString().split("T")[0]:"",custom_question:l.custom_question??""};if(l.custom_question)try{const p=JSON.parse(l.custom_question);Object.keys(p).forEach(x=>{s[x]=p[x]})}catch{}return s},{data:i,setData:o,put:Y,processing:q,errors:a}=te(X());j.useEffect(()=>{l.job_id&&(y.get(route("recruitment.job-postings.custom-questions",l.job_id)).then(s=>{v(s.data)}).catch(()=>{v([])}),y.get(route("recruitment.job-postings.settings",l.job_id)).then(s=>{f({applicant:s.data.applicant||[],visibility:s.data.visibility||[]})}).catch(()=>{f({applicant:[],visibility:[]})}))},[]),j.useEffect(()=>{var s;i.job_id&&i.job_id!==((s=l.job_id)==null?void 0:s.toString())&&(y.get(route("recruitment.job-postings.custom-questions",i.job_id)).then(r=>{v(r.data);const n={...i};Object.keys(n).forEach(m=>{m.startsWith("custom_question_")&&delete n[m]}),o(n)}).catch(()=>{v([])}),y.get(route("recruitment.job-postings.settings",i.job_id)).then(r=>{f({applicant:r.data.applicant||[],visibility:r.data.visibility||[]})}).catch(()=>{f({applicant:[],visibility:[]})}))},[i.job_id]);const z=s=>{s.preventDefault();const r=w.filter(m=>m.is_required),n={};r.forEach(m=>{const p=i[`custom_question_${m.id}`];(!p||p.trim()==="")&&(n[`custom_question_${m.id}`]="This field is required.")}),W(n),!(Object.keys(n).length>0)&&Y(route("recruitment.candidates.update",l.id),{onSuccess:()=>{I()}})};return e.jsxs(K,{className:"max-w-4xl",children:[e.jsx(Z,{children:e.jsx(ee,{children:t("Edit Candidate")})}),e.jsxs("form",{onSubmit:z,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(c,{htmlFor:"job_id",required:!0,children:[t("Job")," "]}),e.jsxs(b,{value:((V=i.job_id)==null?void 0:V.toString())||"",onValueChange:s=>o("job_id",s),required:!0,children:[e.jsx(C,{children:e.jsx(N,{placeholder:t("Select Job")})}),e.jsx(S,{children:E.map(s=>e.jsx(_,{value:s.id.toString(),children:s.title},s.id))})]}),e.jsx(d,{message:a.job_id}),(!E||E.length===0)&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[t("Create job posting here. "),e.jsx("a",{href:route("recruitment.job-postings.index"),className:"text-blue-600 hover:text-blue-800 cursor-pointer",children:t("job posting")}),"."]})]}),e.jsxs("div",{children:[e.jsxs(c,{htmlFor:"source_id",required:!0,children:[t("Source")," "]}),e.jsxs(b,{value:((J=i.source_id)==null?void 0:J.toString())||"",onValueChange:s=>o("source_id",s),required:!0,children:[e.jsx(C,{children:e.jsx(N,{placeholder:t("Select Source")})}),e.jsx(S,{children:g==null?void 0:g.map(s=>e.jsx(_,{value:s.id.toString(),children:s.name},s.id))})]}),e.jsx(d,{message:a.source_id}),(!g||g.length===0)&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[t("Create candidate source here. "),e.jsx("a",{href:route("recruitment.candidate-sources.index"),className:"text-blue-600 hover:text-blue-800 cursor-pointer",children:t("candidate source")}),"."]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"first_name",children:t("First Name")}),e.jsx(u,{id:"first_name",type:"text",value:i.first_name,onChange:s=>o("first_name",s.target.value),placeholder:t("Enter First Name"),required:!0}),e.jsx(d,{message:a.first_name})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"last_name",children:t("Last Name")}),e.jsx(u,{id:"last_name",type:"text",value:i.last_name,onChange:s=>o("last_name",s.target.value),placeholder:t("Enter Last Name"),required:!0}),e.jsx(d,{message:a.last_name})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.applicant.includes("gender")&&e.jsxs("div",{children:[e.jsx(c,{htmlFor:"gender",children:t("Gender")}),e.jsxs(b,{value:i.gender,onValueChange:s=>o("gender",s),children:[e.jsx(C,{children:e.jsx(N,{placeholder:t("Select Gender")})}),e.jsxs(S,{children:[e.jsx(_,{value:"male",children:t("Male")}),e.jsx(_,{value:"female",children:t("Female")}),e.jsx(_,{value:"other",children:t("Other")})]})]}),e.jsx(d,{message:a.gender})]}),h.visibility.includes("profile_image")&&e.jsxs("div",{children:[e.jsx(ae,{label:t("Profile Photo"),value:i.profile_url,onChange:s=>o("profile_url",s),placeholder:t("Select Profile Photo"),id:"profile_photo"}),e.jsx(d,{message:a.profile_photo})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"email",children:t("Email")}),e.jsx(u,{id:"email",type:"email",value:i.email,onChange:s=>o("email",s.target.value),placeholder:t("Enter Email"),required:!0}),e.jsx(d,{message:a.email})]}),e.jsx("div",{children:e.jsx(oe,{label:t("Phone"),value:i.phone,onChange:s=>o("phone",s),placeholder:t("Enter Phone"),error:a.phone,id:"phone"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.applicant.includes("date_of_birth")&&e.jsxs("div",{children:[e.jsx(c,{children:t("Date of Birth")}),e.jsx(M,{value:i.dob,onChange:s=>o("dob",s),placeholder:t("Select Date of Birth"),maxDate:new Date(Date.now()-24*60*60*1e3)}),e.jsx(d,{message:a.dob})]}),h.applicant.includes("country")&&e.jsxs("div",{children:[e.jsx(c,{htmlFor:"country",children:t("Country")}),e.jsx(u,{id:"country",type:"text",value:i.country,onChange:s=>o("country",s.target.value),placeholder:t("Enter Country")}),e.jsx(d,{message:a.country})]})]}),h.applicant.includes("country")&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.applicant.includes("country")&&e.jsxs("div",{children:[e.jsx(c,{htmlFor:"state",children:t("State")}),e.jsx(u,{id:"state",type:"text",value:i.state,onChange:s=>o("state",s.target.value),placeholder:t("Enter State")}),e.jsx(d,{message:a.state})]}),h.applicant.includes("country")&&e.jsxs("div",{children:[e.jsx(c,{htmlFor:"city",children:t("City")}),e.jsx(u,{id:"city",type:"text",value:i.city,onChange:s=>o("city",s.target.value),placeholder:t("Enter City")}),e.jsx(d,{message:a.city})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"current_company",children:t("Current Company")}),e.jsx(u,{id:"current_company",type:"text",value:i.current_company,onChange:s=>o("current_company",s.target.value),placeholder:t("Enter Current Company")}),e.jsx(d,{message:a.current_company})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"current_position",children:t("Current Position")}),e.jsx(u,{id:"current_position",type:"text",value:i.current_position,onChange:s=>o("current_position",s.target.value),placeholder:t("Enter Current Position")}),e.jsx(d,{message:a.current_position})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"experience_years",children:t("Experience (Years)")}),e.jsx(u,{id:"experience_years",type:"number",step:"0.5",min:"0",value:i.experience_years,onChange:s=>o("experience_years",s.target.value),placeholder:"0",required:!0}),e.jsx(d,{message:a.experience_years})]}),e.jsx("div",{children:e.jsx(Q,{label:t("Current Salary"),value:i.current_salary,onChange:s=>o("current_salary",s),error:a.current_salary})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsx(Q,{label:t("Expected Salary"),value:i.expected_salary,onChange:s=>o("expected_salary",s),error:a.expected_salary})}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"notice_period",children:t("Notice Period")}),e.jsx(u,{id:"notice_period",type:"text",value:i.notice_period,onChange:s=>o("notice_period",s.target.value),placeholder:t("Enter Notice Period")}),e.jsx(d,{message:a.notice_period})]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx(c,{required:!0,children:t("Application Date")}),e.jsx(M,{value:i.application_date,onChange:s=>o("application_date",s),placeholder:t("Select Application Date"),required:!0}),e.jsx(d,{message:a.application_date})]})}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"skills",children:t("Skills")}),e.jsx(P,{id:"skills",value:i.skills,onChange:s=>o("skills",s.target.value),placeholder:t("Enter Skills"),rows:3}),e.jsx(d,{message:a.skills})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"education",children:t("Education")}),e.jsx(P,{id:"education",value:i.education,onChange:s=>o("education",s.target.value),placeholder:t("Enter Education"),rows:3}),e.jsx(d,{message:a.education})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"portfolio_url",children:t("Portfolio Url")}),e.jsx(u,{id:"portfolio_url",type:"text",value:i.portfolio_url,onChange:s=>o("portfolio_url",s.target.value),placeholder:t("Enter Portfolio Url")}),e.jsx(d,{message:a.portfolio_url})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"linkedin_url",children:t("Linkedin Url")}),e.jsx(u,{id:"linkedin_url",type:"text",value:i.linkedin_url,onChange:s=>o("linkedin_url",s.target.value),placeholder:t("Enter Linkedin Url")}),e.jsx(d,{message:a.linkedin_url})]}),(h.visibility.includes("resume")||h.visibility.includes("cover_letter"))&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.visibility.includes("resume")&&e.jsxs("div",{children:[e.jsx(c,{htmlFor:"resume_path",children:t("Resume/CV")}),e.jsx(u,{id:"resume_path",type:"file",onChange:s=>{var r;return R(((r=s.target.files)==null?void 0:r[0])||null,"resume")}}),e.jsx(d,{message:a.resume}),i.resume&&e.jsx("div",{className:"mt-2 p-2 border rounded-lg bg-gray-50",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[L?e.jsx("img",{src:L,alt:"Resume preview",className:"h-12 w-12 object-cover rounded"}):O(i.resume.name),e.jsx("span",{className:"text-sm text-gray-700 truncate",children:i.resume.name})]})}),l.resume_path&&!i.resume&&e.jsx("div",{className:"mt-2 p-2 border rounded-lg bg-blue-50",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(D,{className:"h-8 w-8 text-blue-500"}),e.jsx("span",{className:"text-sm text-blue-700",children:t("Current resume uploaded")})]})})]}),h.visibility.includes("cover_letter")&&e.jsxs("div",{children:[e.jsx(c,{htmlFor:"cover_letter_path",children:t("Cover Letter")}),e.jsx(u,{id:"cover_letter_path",type:"file",onChange:s=>{var r;return R(((r=s.target.files)==null?void 0:r[0])||null,"cover_letter")}}),e.jsx(d,{message:a.cover_letter}),i.cover_letter&&e.jsx("div",{className:"mt-2 p-2 border rounded-lg bg-gray-50",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[T?e.jsx("img",{src:T,alt:"Cover letter preview",className:"h-12 w-12 object-cover rounded"}):O(i.cover_letter.name),e.jsx("span",{className:"text-sm text-gray-700 truncate",children:i.cover_letter.name})]})}),l.cover_letter_path&&!i.cover_letter&&e.jsx("div",{className:"mt-2 p-2 border rounded-lg bg-blue-50",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(D,{className:"h-8 w-8 text-blue-500"}),e.jsx("span",{className:"text-sm text-blue-700",children:t("Current cover letter uploaded")})]})})]})]}),w.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:t("Application Questions")}),w.map(s=>e.jsxs("div",{children:[e.jsxs(c,{htmlFor:`custom_question_${s.id}`,children:[s.question,s.is_required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),s.type==="text"&&e.jsx(u,{id:`custom_question_${s.id}`,type:"text",value:i[`custom_question_${s.id}`]||"",onChange:r=>o(`custom_question_${s.id}`,r.target.value),placeholder:t("Enter your answer")}),s.type==="textarea"&&e.jsx(P,{id:`custom_question_${s.id}`,value:i[`custom_question_${s.id}`]||"",onChange:r=>o(`custom_question_${s.id}`,r.target.value),placeholder:t("Enter your answer"),rows:3}),s.type==="select"&&e.jsxs(b,{value:i[`custom_question_${s.id}`]||"",onValueChange:r=>o(`custom_question_${s.id}`,r),children:[e.jsx(C,{children:e.jsx(N,{placeholder:t("Select an option")})}),e.jsx(S,{children:s.options&&JSON.parse(s.options).map((r,n)=>e.jsx(_,{value:r,children:r},n))})]}),s.type==="radio"&&e.jsx(re,{value:i[`custom_question_${s.id}`]||"",onValueChange:r=>o(`custom_question_${s.id}`,r),children:s.options&&JSON.parse(s.options).map((r,n)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ie,{value:r,id:`custom_question_${s.id}_${n}`}),e.jsx(c,{htmlFor:`custom_question_${s.id}_${n}`,className:"text-sm",children:r})]},n))}),s.type==="checkbox"&&e.jsx("div",{className:"space-y-2",children:s.options&&JSON.parse(s.options).map((r,n)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{id:`custom_question_${s.id}_${n}`,checked:(i[`custom_question_${s.id}`]||"").split(",").includes(r),onCheckedChange:m=>{const p=(i[`custom_question_${s.id}`]||"").split(",").filter(x=>x);m?o(`custom_question_${s.id}`,[...p,r].join(",")):o(`custom_question_${s.id}`,p.filter(x=>x!==r).join(","))}}),e.jsx(c,{htmlFor:`custom_question_${s.id}_${n}`,className:"text-sm",children:r})]},n))}),s.type==="date"&&e.jsx(u,{id:`custom_question_${s.id}`,type:"date",value:i[`custom_question_${s.id}`]||"",onChange:r=>o(`custom_question_${s.id}`,r.target.value)}),s.type==="number"&&e.jsx(u,{id:`custom_question_${s.id}`,type:"number",value:i[`custom_question_${s.id}`]||"",onChange:r=>o(`custom_question_${s.id}`,r.target.value),placeholder:t("Enter a number")}),e.jsx(d,{message:a[`custom_question_${s.id}`]||H[`custom_question_${s.id}`]})]},s.id))]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(B,{type:"button",variant:"outline",onClick:I,children:t("Cancel")}),e.jsx(B,{type:"submit",disabled:q,children:t(q?"Updating...":"Update")})]})]})]})}export{Ye as default};
