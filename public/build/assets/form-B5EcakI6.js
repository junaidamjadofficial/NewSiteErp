import{j as e}from"./ui-ZHFf5B17.js";import{G as M}from"./app-BBiA4mAE.js";import{r as P}from"./vendor-CcMVubkO.js";import{B as y}from"./button-DYC7yMVq.js";import{I as n}from"./input-DqOfVTcn.js";import{L as i}from"./label-DbqhUtKI.js";import{T as D}from"./textarea-DxQ_BnuT.js";import{S as N}from"./switch-ByWYyd_6.js";import{C as z}from"./checkbox-Cvtgzug2.js";import{I as b}from"./input-error-DuIbBMgZ.js";import{C as x,a as u,b as h,c as j}from"./card-DHszHnbI.js";import{B as _}from"./badge-CV60sqBJ.js";import{u as S}from"./useTranslation-CV4_gBnb.js";import{I as w}from"./info-CuYUIdBA.js";import{S as U}from"./scroll-area-DAwMSbd_.js";import{d as G,g as I,c as R}from"./helpers-QYnGjXad.js";/* empty css            */import"./index-BMyiKApA.js";import"./utils-B-dksMZM.js";import"./utils-DrcJ8Itn.js";import"./index-BYFX2qNQ.js";import"./check-DUlQPeVG.js";import"./createLucideIcon-Dov4NOxw.js";import"./index-BdQq_4o_.js";function H({userSubscriptionInfo:s,totalModulesCount:f}){const{t:c}=S();return s.is_superadmin?e.jsxs(x,{className:"border-blue-200 bg-blue-50 dark:bg-blue-900/20 dark:border-blue-800",children:[e.jsx(u,{className:"pb-3",children:e.jsxs(h,{className:"text-sm flex items-center gap-2",children:[e.jsx(w,{className:"w-4 h-4 text-blue-600"}),c("Super Admin Access")]})}),e.jsx(j,{children:e.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:c("You have access to all {{count}} available features as a super admin.",{count:f})})})]}):e.jsxs(x,{className:"border-orange-200 bg-orange-50 dark:bg-orange-900/20 dark:border-orange-800",children:[e.jsx(u,{className:"pb-3",children:e.jsxs(h,{className:"text-sm flex items-center gap-2",children:[e.jsx(w,{className:"w-4 h-4 text-orange-600"}),c("Subscription Features")]})}),e.jsxs(j,{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-orange-800 dark:text-orange-200",children:c("Available Features")}),e.jsx(_,{variant:"outline",className:"text-orange-700 border-orange-300",children:s.available_modules_count})]}),e.jsx("p",{className:"text-xs text-orange-700 dark:text-orange-300",children:c("Only modules from your current subscription package are shown. To access more modules, upgrade your subscription.")})]})]})}function ue({plan:s,activeModules:f,isEdit:c=!1,userSubscriptionInfo:d}){const{t:a}=S(),[v,A]=P.useState(""),C=()=>R(1).replace(/[\d\s.,]/g,"").trim(),{data:t,setData:l,post:E,put:F,processing:k,errors:g}=M({name:(s==null?void 0:s.name)||"",description:(s==null?void 0:s.description)||"",number_of_users:(s==null?void 0:s.number_of_users)||1,storage_limit:(s==null?void 0:s.storage_limit)||0,total:(s==null?void 0:s.storage_limit)||0,status:(s==null?void 0:s.status)??!0,free_plan:(s==null?void 0:s.free_plan)??!1,modules:(s==null?void 0:s.modules)||[],package_price_yearly:(s==null?void 0:s.package_price_yearly)||0,package_price_monthly:(s==null?void 0:s.package_price_monthly)||0,trial:(s==null?void 0:s.trial)??!1,trial_days:(s==null?void 0:s.trial_days)||0}),L=r=>{r.preventDefault(),c&&s?F(route("plans.update",s.id)):E(route("plans.store"))},T=(r,o)=>{o?l("modules",[...t.modules,r]):l("modules",t.modules.filter(m=>m!==r))},p=f.filter(r=>r.alias.toLowerCase().includes(v.toLowerCase())||r.module.toLowerCase().includes(v.toLowerCase()));return e.jsxs("form",{onSubmit:L,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[e.jsxs("div",{className:"col-span-3 space-y-4",children:[d&&e.jsx(H,{userSubscriptionInfo:d,totalModulesCount:f.length}),e.jsxs(x,{children:[e.jsx(u,{className:"pb-3",children:e.jsx(h,{className:"text-sm",children:a("Quick Settings")})}),e.jsxs(j,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(i,{className:"text-xs",children:a("Active")}),e.jsx(N,{checked:t.status,onCheckedChange:r=>l("status",r)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(i,{className:"text-xs",children:a("Trial")}),e.jsx(N,{checked:t.trial,onCheckedChange:r=>l("trial",r)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(i,{className:"text-xs",children:a("Free")}),e.jsx(N,{checked:t.free_plan,onCheckedChange:r=>l("free_plan",r)})]})]})]}),t.trial&&e.jsxs(x,{children:[e.jsx(u,{className:"pb-3",children:e.jsx(h,{className:"text-sm",children:a("Trial Settings")})}),e.jsx(j,{children:e.jsxs("div",{children:[e.jsx(i,{className:"text-xs",children:a("Trial Days")}),e.jsx(n,{type:"number",placeholder:a("Enter trial days"),value:t.trial_days||0,onChange:r=>l("trial_days",parseInt(r.target.value)||0)})]})})]}),!t.free_plan&&e.jsxs(x,{children:[e.jsx(u,{className:"pb-3",children:e.jsx(h,{className:"text-sm",children:a("Pricing")})}),e.jsxs(j,{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs(i,{className:"text-xs",children:[a("Monthly")," (",C(),")"]}),e.jsx(n,{type:"number",step:"0.01",placeholder:a("Enter monthly price"),value:t.package_price_monthly||0,onChange:r=>l("package_price_monthly",parseFloat(r.target.value)||0)})]}),e.jsxs("div",{children:[e.jsxs(i,{className:"text-xs",children:[a("Yearly")," (",C(),")"]}),e.jsx(n,{type:"number",step:"0.01",placeholder:a("Enter yearly price"),value:t.package_price_yearly||0,onChange:r=>l("package_price_yearly",parseFloat(r.target.value)||0)})]})]})]})]}),e.jsxs("div",{className:"col-span-9 space-y-6",children:[e.jsxs(x,{children:[e.jsx(u,{children:e.jsx(h,{children:a("Plan Information")})}),e.jsxs(j,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{required:!0,children:a("Plan Name")}),e.jsx(n,{placeholder:a("Enter plan name"),value:t.name,onChange:r=>l("name",r.target.value)}),e.jsx(b,{message:g.name})]}),e.jsxs("div",{children:[e.jsx(i,{children:a("Max Users")}),e.jsx(n,{type:"number",placeholder:a("Enter max users"),value:t.number_of_users||"",onChange:r=>l("number_of_users",parseInt(r.target.value)||0)}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:a('Note: "-1" for Unlimited')}),e.jsx(b,{message:g.number_of_users})]}),e.jsxs("div",{children:[e.jsx(i,{children:a("Storage Limit (GB)")}),e.jsx(n,{type:"number",placeholder:a("Enter storage limit in GB"),value:t.storage_limit||"",onChange:r=>{const o=parseInt(r.target.value)||0;l("storage_limit",o),l("total",o)}}),e.jsx(b,{message:g.storage_limit})]})]}),e.jsxs("div",{children:[e.jsx(i,{children:a("Description")}),e.jsx(D,{placeholder:a("Enter plan description"),value:t.description,onChange:r=>l("description",r.target.value),rows:3}),e.jsx(b,{message:g.description})]})]})]}),e.jsxs(x,{children:[e.jsxs(u,{children:[e.jsxs(h,{className:"flex items-center justify-between",children:[a("Features"),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(_,{children:[t.modules.length," ",a("selected")]}),d&&!d.is_superadmin&&e.jsxs(_,{variant:"outline",className:"text-xs",children:[d.available_modules_count," ",a("available")]})]})]}),d&&!d.is_superadmin&&e.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("svg",{className:"w-4 h-4 text-amber-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-amber-800 dark:text-amber-200",children:a("Subscription Limited")}),e.jsx("p",{className:"text-xs text-amber-700 dark:text-amber-300 mt-1",children:a("Only showing {{count}} modules from your subscription. Contact admin to access more modules.",{count:d.available_modules_count})})]})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"flex-1",children:e.jsx(n,{value:v,onChange:r=>A(r.target.value),placeholder:a("Search...")})}),e.jsx(y,{type:"button",variant:"outline",size:"default",onClick:r=>{r.preventDefault(),p.every(m=>t.modules.includes(m.module))?l("modules",t.modules.filter(m=>!p.map(B=>B.module).includes(m))):l("modules",[...new Set([...t.modules,...p.map(m=>m.module)])])},children:p.every(r=>t.modules.includes(r.module))?a("Uncheck All"):a("Check All")})]})]}),e.jsxs(j,{children:[e.jsx(U,{className:"h-[300px]",children:e.jsx("div",{className:"grid grid-cols-4 gap-3 pr-4",children:p.map(r=>e.jsxs("div",{className:"flex items-center gap-3 p-4 border rounded hover:bg-muted/50",children:[e.jsx("img",{src:G(r.module),alt:"",className:"w-8 h-8 border rounded"}),e.jsx("span",{className:"text-sm truncate flex-1",children:I(r.module)}),e.jsx(z,{checked:t.modules.includes(r.module),onCheckedChange:o=>T(r.module,!!o)})]},r.module))})}),e.jsx(b,{message:g.modules})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(y,{type:"button",variant:"outline",onClick:()=>window.history.back(),children:a("Cancel")}),e.jsx(y,{type:"submit",disabled:k,children:a(k?"Saving...":c?"Update":"Create")})]})]})}export{ue as PlanForm,ue as default};
