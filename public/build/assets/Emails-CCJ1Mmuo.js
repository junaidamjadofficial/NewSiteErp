import{j as e}from"./ui-ZHFf5B17.js";import{r as l}from"./vendor-CcMVubkO.js";import{A as g}from"./app-BBiA4mAE.js";import{B as c}from"./button-DYC7yMVq.js";import{D as b,a as v,b as N,c as y}from"./dialog-BLwxprq_.js";import{L as n}from"./label-DbqhUtKI.js";import{I as d}from"./input-DqOfVTcn.js";import{R as E}from"./rich-text-editor-59agrfWF.js";import{N as C}from"./no-records-found-C2RGIdAh.js";import{k as D}from"./helpers-QYnGjXad.js";import{u as S}from"./useTranslation-CV4_gBnb.js";import{M as p}from"./mail-XtzF_PXw.js";/* empty css            */import"./index-BMyiKApA.js";import"./utils-B-dksMZM.js";import"./utils-DrcJ8Itn.js";import"./x-DVK_F_Gh.js";import"./createLucideIcon-Dov4NOxw.js";import"./index-DaFL_H0m.js";import"./with-selector-CP8JaRn2.js";import"./undo-D3tFEvb3.js";import"./list-BVwWsOhE.js";import"./link-2Bt5o4zZ.js";import"./plus-C1hmRCnY.js";function Y({deal:i,onRegisterAddHandler:m}){l.useEffect(()=>{m(()=>a(!0))},[m]);const{t:s}=S(),[u,a]=l.useState(!1),[r,o]=l.useState({to:"",subject:"",description:""}),x=t=>t?t.replace(/<[^>]*>/g,"").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&nbsp;/g," "):"",h=t=>{t.preventDefault(),g.post(route("lead.deals.store-email",i.id),r,{onSuccess:()=>{o({to:"",subject:"",description:""}),a(!1)}})};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-4 max-h-[75vh] overflow-y-auto",children:i.emails&&i.emails.length>0?i.emails.map((t,j)=>{const f=x(t.description);return e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{className:"font-medium text-gray-900",children:t.to})]}),e.jsx("span",{className:"text-xs text-gray-500",children:D(t.created_at)})]}),e.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:t.subject}),e.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:f})]},j)}):e.jsx(C,{icon:p,title:s("No Emails sent"),description:s("Get started by sending your first email."),onCreateClick:()=>a(!0),createButtonText:s("Send Email"),className:"h-auto"})}),e.jsx(b,{open:u,onOpenChange:a,children:e.jsxs(v,{className:"max-w-2xl",children:[e.jsx(N,{children:e.jsx(y,{children:s("Send Email")})}),e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"to",children:s("To")}),e.jsx(d,{id:"to",type:"email",value:r.to,onChange:t=>o({...r,to:t.target.value}),placeholder:s("Enter email address"),required:!0})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"subject",children:s("Subject")}),e.jsx(d,{id:"subject",type:"text",value:r.subject,onChange:t=>o({...r,subject:t.target.value}),placeholder:s("Enter subject"),required:!0})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"description",children:s("Description")}),e.jsx(E,{content:r.description,onChange:t=>o({...r,description:t}),placeholder:s("Enter email content"),className:"mt-1"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(c,{type:"button",variant:"outline",onClick:()=>a(!1),children:s("Cancel")}),e.jsx(c,{type:"submit",children:s("Send Email")})]})]})]})})]})}export{Y as default};
