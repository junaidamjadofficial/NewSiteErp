import{j as e}from"./ui-ZHFf5B17.js";import{r as h}from"./vendor-CcMVubkO.js";import{B as f}from"./button-DYC7yMVq.js";import{I as T}from"./input-DqOfVTcn.js";import{L as k}from"./label-DbqhUtKI.js";import{C as G,a as K,b as Q,c as R}from"./card-DHszHnbI.js";import{A as q}from"./app-BBiA4mAE.js";import{S as F}from"./switch-ByWYyd_6.js";import{S as v,a as g,b as _,c as b,d as x}from"./select-BEhl2QER.js";import{T as D,a as E,b as S,c as I}from"./tooltip-C7wT1CW2.js";import{u as Y}from"./useTranslation-CV4_gBnb.js";import{H as W}from"./headphones-BkxDRJ_v.js";import{S as $}from"./save-B89BgUdM.js";import{P as J}from"./plus-C1hmRCnY.js";import{G as M}from"./grip-vertical-DvbJAfYs.js";import{T as U}from"./trash-2-CIuynBL1.js";import"./index-BMyiKApA.js";import"./utils-B-dksMZM.js";import"./utils-DrcJ8Itn.js";/* empty css            */import"./index-BYFX2qNQ.js";import"./index-BdQq_4o_.js";import"./index-BZAHB8Ku.js";import"./chevron-down-Zr-tNTku.js";import"./createLucideIcon-Dov4NOxw.js";import"./search-Chs14P_a.js";import"./check-DUlQPeVG.js";const X={text:"Text",email:"Email",number:"Number",date:"Date",textarea:"Textarea",file:"File",select:"Select"},Z={3:"25%",4:"33%",6:"50%",8:"66%",12:"100%"};function Fe({userSettings:i,fields:ee,auth:se}){const{t:r}=Y(),[N,j]=h.useState(!1),d=!0,[p,w]=h.useState(null),[u,C]=h.useState({faq_is_on:(i==null?void 0:i.faq_is_on)==="on"||!1,knowledge_base_is_on:(i==null?void 0:i.knowledge_base_is_on)==="on"||!1}),[c,o]=h.useState([]);h.useEffect(()=>{i&&C({faq_is_on:(i==null?void 0:i.faq_is_on)==="on"||!1,knowledge_base_is_on:(i==null?void 0:i.knowledge_base_is_on)==="on"||!1}),fetch(route("support-ticket.fields.get")).then(s=>s.json()).then(s=>{const l=(s.fields||[]).sort((a,t)=>a.order-t.order);o(l)}).catch(()=>o([]))},[i]);const y=(s,l)=>{C(a=>({...a,[s]:l}))},A=()=>{const s={name:"",placeholder:"",type:"text",is_required:!0,width:"12",order:c.length};o(l=>[...l,s])},n=(s,l)=>{o(a=>a.map((t,m)=>m===s?{...t,...l}:t))},L=s=>{const l=c[s];l.custom_id&&l.custom_id<=6||confirm(r("Are you sure?"))&&o(a=>a.filter((t,m)=>m!==s))},O=(s,l)=>{w(l),s.dataTransfer.effectAllowed="move"},P=s=>{s.preventDefault(),s.dataTransfer.dropEffect="move"},V=(s,l)=>{if(s.preventDefault(),p===null||p===l)return;const a=[...c],t=a[p];a.splice(p,1),a.splice(l,0,t);const m=a.map((z,H)=>({...z,order:H}));o(m),w(null)},B=()=>{j(!0),q.post(route("support-ticket.settings.update"),{settings:{...u,fields:c}},{preserveScroll:!0,onSuccess:()=>{j(!1),q.reload({only:["globalSettings"]})},onError:()=>{j(!1)}})};return e.jsxs(G,{children:[e.jsxs(K,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(Q,{className:"flex items-center gap-2 text-lg",children:[e.jsx(W,{className:"h-5 w-5"}),r("Support Setting")]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:r("Configure support ticket module settings and custom fields")})]}),e.jsxs(f,{onClick:B,disabled:N,size:"sm",children:[e.jsx($,{className:"h-4 w-4 mr-2"}),r(N?"Saving...":"Save Changes")]})]}),e.jsx(R,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(k,{htmlFor:"faq_is_on",children:r("Enable FAQ")}),e.jsx("p",{className:"text-xs text-muted-foreground",children:r("Enable or disable the FAQ functionality")})]}),e.jsx(F,{id:"faq_is_on",checked:u.faq_is_on,onCheckedChange:s=>y("faq_is_on",s),disabled:!d})]})}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(k,{htmlFor:"knowledge_base_is_on",children:r("Enable Knowledge Base")}),e.jsx("p",{className:"text-xs text-muted-foreground",children:r("Enable or disable the Knowledge Base functionality")})]}),e.jsx(F,{id:"knowledge_base_is_on",checked:u.knowledge_base_is_on,onCheckedChange:s=>y("knowledge_base_is_on",s),disabled:!d})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:r("Ticket Fields Settings")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r("You can easily change order of fields using drag & drop.")})]}),e.jsx(D,{children:e.jsxs(E,{delayDuration:0,children:[e.jsx(S,{asChild:!0,children:e.jsx(f,{onClick:A,size:"sm",className:"text-white",children:e.jsx(J,{className:"h-4 w-4"})})}),e.jsx(I,{children:e.jsx("p",{children:r("Create")})})]})})]}),e.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[e.jsx("div",{className:"bg-gray-50 px-4 py-3 border-b",children:e.jsxs("div",{className:"grid grid-cols-12 gap-4 text-sm font-medium text-gray-700",children:[e.jsx("div",{className:"col-span-1"}),e.jsx("div",{className:"col-span-2",children:r("Labels")}),e.jsx("div",{className:"col-span-2",children:r("Placeholder")}),e.jsx("div",{className:"col-span-2",children:r("Type")}),e.jsx("div",{className:"col-span-2",children:r("Required")}),e.jsx("div",{className:"col-span-2",children:r("Width")}),e.jsx("div",{className:"col-span-1"})]})}),e.jsx("div",{children:c.map((s,l)=>e.jsx("div",{draggable:d,onDragStart:a=>O(a,l),onDragOver:P,onDrop:a=>V(a,l),className:"px-4 py-3 border-b bg-white cursor-move hover:bg-gray-50",children:e.jsxs("div",{className:"grid grid-cols-12 gap-4 items-center",children:[e.jsx("div",{className:"col-span-1",children:e.jsx(M,{className:"h-4 w-4 text-gray-400"})}),e.jsx("div",{className:"col-span-2",children:e.jsx(T,{value:s.name,onChange:a=>n(l,{name:a.target.value}),placeholder:r("Field name"),disabled:!d,required:!0})}),e.jsx("div",{className:"col-span-2",children:e.jsx(T,{value:s.placeholder,onChange:a=>n(l,{placeholder:a.target.value}),placeholder:r("Placeholder text"),disabled:!d,required:!0})}),e.jsx("div",{className:"col-span-2",children:e.jsxs(v,{value:s.type,onValueChange:a=>n(l,{type:a}),disabled:s.custom_id&&s.custom_id<=6,children:[e.jsx(g,{children:e.jsx(_,{})}),e.jsx(b,{children:Object.entries(X).map(([a,t])=>(a==="file"||a==="select")&&(!s.custom_id||s.custom_id>6)?null:e.jsx(x,{value:a,children:t},a))})]})}),e.jsx("div",{className:"col-span-2",children:e.jsxs(v,{value:s.is_required?"1":"0",onValueChange:a=>n(l,{is_required:a==="1"}),disabled:!d,children:[e.jsx(g,{children:e.jsx(_,{})}),e.jsxs(b,{children:[e.jsx(x,{value:"1",children:r("Yes")}),e.jsx(x,{value:"0",children:r("No")})]})]})}),e.jsx("div",{className:"col-span-2",children:e.jsxs(v,{value:s.width,onValueChange:a=>n(l,{width:a}),disabled:!d,children:[e.jsx(g,{children:e.jsx(_,{})}),e.jsx(b,{children:Object.entries(Z).map(([a,t])=>e.jsx(x,{value:a,children:t},a))})]})}),e.jsx("div",{className:"col-span-1",children:(!s.custom_id||s.custom_id>6)&&e.jsx(D,{children:e.jsxs(E,{delayDuration:0,children:[e.jsx(S,{asChild:!0,children:e.jsx(f,{variant:"ghost",size:"sm",onClick:()=>L(l),className:"h-8 w-8 p-0 text-destructive hover:text-destructive",children:e.jsx(U,{className:"h-4 w-4"})})}),e.jsx(I,{children:e.jsx("p",{children:r("Delete")})})]})})})]})},l))})]})]})]})})]})}export{Fe as default};
