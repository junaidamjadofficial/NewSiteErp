import{j as e}from"./ui-ZHFf5B17.js";import{r as o}from"./vendor-CcMVubkO.js";import{a as W,k as w}from"./helpers-QYnGjXad.js";import{R as S}from"./rich-text-editor-59agrfWF.js";import{B as n}from"./button-DYC7yMVq.js";import{T as k,a as D,b as C,c as E}from"./tooltip-C7wT1CW2.js";import{D as T,a as M,b as F,c as L}from"./dialog-BLwxprq_.js";import{L as x}from"./label-DbqhUtKI.js";import{I as A}from"./input-DqOfVTcn.js";import{T as G}from"./textarea-DxQ_BnuT.js";import{A as p}from"./app-BBiA4mAE.js";import{u as _}from"./useFormFields-BwNmEYJY.js";import{u as V}from"./useTranslation-CV4_gBnb.js";import{P as I}from"./plus-C1hmRCnY.js";import"./index-DaFL_H0m.js";import"./with-selector-CP8JaRn2.js";import"./utils-DrcJ8Itn.js";import"./utils-B-dksMZM.js";import"./undo-D3tFEvb3.js";import"./createLucideIcon-Dov4NOxw.js";import"./list-BVwWsOhE.js";import"./link-2Bt5o4zZ.js";import"./index-BMyiKApA.js";import"./index-BZAHB8Ku.js";import"./x-DVK_F_Gh.js";/* empty css            */import"./select-BEhl2QER.js";import"./index-BdQq_4o_.js";import"./index-BYFX2qNQ.js";import"./chevron-down-Zr-tNTku.js";import"./search-Chs14P_a.js";import"./check-DUlQPeVG.js";import"./radio-group-Bg6nc_Xb.js";import"./circle-bmoNtd-e.js";import"./slider-CIevYFX0.js";import"./sparkles-yKnt-shd.js";import"./input-error-DuIbBMgZ.js";import"./switch-ByWYyd_6.js";import"./index-Chjiymov.js";import"./index-8JwjhRSi.js";import"./badge-CV60sqBJ.js";function Ie({lead:r}){var j,u,b,N,y,f;const{t:s}=V(),[H,c]=o.useState(!1),[O,m]=o.useState(!1),[a,d]=o.useState({to:"",subject:"",description:""}),[h,g]=o.useState({message:""}),[P,q]=o.useState(0),z=_("aiField",a,(t,l)=>{d(i=>({...i,[t]:l}))},{},"create","subject","Subject","lead","lead_email"),B=_("aiField",a,(t,l)=>{d(i=>({...i,[t]:l})),q(i=>i+1)},{},"create","description","Description","lead","lead_email"),R=t=>{t.preventDefault(),p.post(route("lead.leads.store-email",r.id),a,{onSuccess:()=>{d({to:"",subject:"",description:""}),c(!1)}})},U=t=>{t.preventDefault(),p.post(route("lead.leads.store-discussion",r.id),h,{onSuccess:()=>{g({message:""}),m(!1)}})};return e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-xl border border-blue-100",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:r.name}),e.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:((j=r.stage)==null?void 0:j.name)||"No Stage"})]})})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200 shadow-sm",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:r.email?"1":"0"}),e.jsx("div",{className:"text-sm text-gray-500",children:s("Email")})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200 shadow-sm",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:((u=r.sources)==null?void 0:u.length)||0}),e.jsx("div",{className:"text-sm text-gray-500",children:s("Sources")})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200 shadow-sm",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:((b=r.products)==null?void 0:b.length)||0}),e.jsx("div",{className:"text-sm text-gray-500",children:s("Products")})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200 shadow-sm",children:[e.jsx("div",{className:"text-2xl font-bold text-indigo-600",children:((N=r.tasks)==null?void 0:N.length)||0}),e.jsx("div",{className:"text-sm text-gray-500",children:s("Tasks")})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:s("Lead Information")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:s("Email")}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:r.email||"-"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:s("Phone")}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:r.phone||"-"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:s("Follow Up Date")}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:r.date?W(r.date):"-"})]}),r.user&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:s("Assigned To")}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:r.user.name})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:s("Pipeline")}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:((y=r.pipeline)==null?void 0:y.name)||"-"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:s("Stage")}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:((f=r.stage)==null?void 0:f.name)||"-"})]})]})]}),r.subject&&e.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:s("Subject")}),e.jsx("div",{className:"prose prose-sm max-w-none text-gray-700",dangerouslySetInnerHTML:{__html:r.subject}})]}),r.description&&e.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:s("Description")}),e.jsx("div",{className:"prose prose-sm max-w-none text-gray-700",dangerouslySetInnerHTML:{__html:r.description}})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:s("Notes")}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsx(S,{content:r.notes||"",onChange:t=>{p.put(route("lead.leads.update",r.id),{notes:t})},placeholder:s("Add notes..."),className:"min-h-[300px]"})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s("Emails")}),e.jsx(k,{children:e.jsxs(D,{delayDuration:0,children:[e.jsx(C,{asChild:!0,children:e.jsx(n,{size:"sm",onClick:()=>c(!0),children:e.jsx(I,{className:"h-4 w-4"})})}),e.jsx(E,{children:e.jsx("p",{children:s("Send Email")})})]})})]}),e.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto",children:r.emails&&r.emails.length>0?r.emails.map((t,l)=>{const K=(v=>v?v.replace(/<[^>]*>/g,"").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&nbsp;/g," "):"")(t.description);return e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 shadow-sm",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"bg-gray-100 p-1 rounded-full",children:e.jsx("svg",{className:"h-3 w-3 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm text-gray-900",children:t.to}),e.jsx("p",{className:"text-xs text-gray-500",children:w(t.created_at)})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-gray-100",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:t.subject}),e.jsx("div",{className:"text-xs text-gray-700 leading-relaxed whitespace-pre-wrap",children:K})]})]},l)}):e.jsx("p",{className:"text-gray-500 text-sm text-center py-4",children:s("No emails found")})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s("Discussions")}),e.jsx(k,{children:e.jsxs(D,{delayDuration:0,children:[e.jsx(C,{asChild:!0,children:e.jsx(n,{size:"sm",onClick:()=>m(!0),children:e.jsx(I,{className:"h-4 w-4"})})}),e.jsx(E,{children:e.jsx("p",{children:s("Add Message")})})]})})]}),e.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto",children:r.discussions&&r.discussions.length>0?r.discussions.map((t,l)=>{var i;return e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 shadow-sm",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"bg-gray-100 p-1 rounded-full",children:e.jsx("svg",{className:"h-3 w-3 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm text-gray-900",children:((i=t.creator)==null?void 0:i.name)||"Unknown User"}),e.jsx("p",{className:"text-xs text-gray-500",children:w(t.created_at)})]})]})}),e.jsx("div",{className:"bg-white rounded-lg p-3 border border-gray-100",children:e.jsx("div",{className:"text-xs text-gray-700 leading-relaxed whitespace-pre-wrap",children:t.comment})})]},l)}):e.jsx("p",{className:"text-gray-500 text-sm text-center py-4",children:s("No discussions found")})})]})]}),e.jsx(T,{open:H,onOpenChange:c,children:e.jsxs(M,{className:"max-w-2xl",children:[e.jsx(F,{children:e.jsx(L,{children:s("Send Email")})}),e.jsxs("form",{onSubmit:R,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"to",children:s("To")}),e.jsx(A,{id:"to",type:"email",value:a.to,onChange:t=>d({...a,to:t.target.value}),placeholder:s("Enter email address"),required:!0})]}),e.jsxs("div",{className:"flex gap-2 items-end",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(x,{htmlFor:"subject",children:s("Subject")}),e.jsx(A,{id:"subject",type:"text",value:a.subject,onChange:t=>d({...a,subject:t.target.value}),placeholder:s("Enter subject"),required:!0})]}),z.map(t=>e.jsx("div",{children:t.component},t.id))]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(x,{htmlFor:"description",children:s("Description")}),e.jsx("div",{className:"flex gap-2",children:B.map(t=>e.jsx("div",{children:t.component},t.id))})]}),e.jsx(S,{content:a.description,onChange:t=>d({...a,description:t}),placeholder:s("Enter email content"),className:"mt-1"},`email-editor-${P}`)]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(n,{type:"button",variant:"outline",onClick:()=>c(!1),children:s("Cancel")}),e.jsx(n,{type:"submit",children:s("Send Email")})]})]})]})}),e.jsx(T,{open:O,onOpenChange:m,children:e.jsxs(M,{className:"max-w-md",children:[e.jsx(F,{children:e.jsx(L,{children:s("Add Message")})}),e.jsxs("form",{onSubmit:U,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"message",children:s("Message")}),e.jsx(G,{id:"message",value:h.message,onChange:t=>g({...h,message:t.target.value}),placeholder:s("Enter your message"),rows:4,required:!0})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(n,{type:"button",variant:"outline",onClick:()=>m(!1),children:s("Cancel")}),e.jsx(n,{type:"submit",children:s("Save")})]})]})]})})]})}export{Ie as default};
