import{j as t}from"./ui-ZHFf5B17.js";import{r as o}from"./vendor-CcMVubkO.js";import{X as T,a as v}from"./app-BBiA4mAE.js";import{B as g}from"./button-DYC7yMVq.js";import{C as D,c as j}from"./card-DHszHnbI.js";import{D as y}from"./date-picker-CVthJV3y.js";import{a as u,f as l}from"./helpers-QYnGjXad.js";import{N as C}from"./no-records-found-C2RGIdAh.js";import{u as S}from"./useTranslation-CV4_gBnb.js";import{P as w}from"./printer-BDwaclJ1.js";import{F}from"./file-text-BmYvzZ5U.js";/* empty css            */import"./index-BMyiKApA.js";import"./utils-B-dksMZM.js";import"./utils-DrcJ8Itn.js";import"./react-datepicker-BHcKmBHW.js";import"./popover-fYI5j510.js";import"./calendar-DvmJ2XsD.js";import"./createLucideIcon-Dov4NOxw.js";import"./plus-C1hmRCnY.js";function V({financialYear:r}){var p,h;const{t:e}=S(),{auth:b}=T().props,[d,N]=o.useState((r==null?void 0:r.year_start_date)||""),[m,f]=o.useState((r==null?void 0:r.year_end_date)||""),[s,_]=o.useState(null),[i,x]=o.useState(!1),n=async()=>{x(!0);try{const a=await v.get(route("account.reports.tax-summary"),{params:{from_date:d,to_date:m}});_(a.data)}catch(a){console.error("Error:",a)}finally{x(!1)}};return o.useEffect(()=>{n()},[]),t.jsxs(D,{className:"shadow-sm",children:[t.jsx(j,{className:"p-6 border-b bg-gray-50/50",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e("From Date")}),t.jsx(y,{value:d,onChange:N,placeholder:e("Select from date")})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e("To Date")}),t.jsx(y,{value:m,onChange:f,placeholder:e("Select to date")})]}),t.jsxs("div",{className:"flex items-end gap-2",children:[t.jsx(g,{onClick:n,disabled:i,size:"sm",children:e(i?"Loading...":"Generate")}),s&&((h=(p=b.user)==null?void 0:p.permissions)==null?void 0:h.includes("print-tax-summary"))&&t.jsxs(g,{variant:"outline",size:"sm",onClick:()=>window.open(route("account.reports.tax-summary.print")+`?from_date=${d}&to_date=${m}&download=pdf`,"_blank"),className:"gap-2",children:[t.jsx(w,{className:"h-4 w-4"}),e("Download PDF")]})]})]})}),t.jsx(j,{className:"p-0",children:s?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"p-4 bg-gray-50 border-b",children:[t.jsx("h3",{className:"font-semibold text-lg",children:e("Tax Summary Report")}),t.jsxs("p",{className:"text-sm text-gray-600",children:[u(s.from_date)," ",e("to")," ",u(s.to_date)]})]}),t.jsx("div",{className:"overflow-y-auto max-h-[60vh]",children:t.jsx("table",{className:"w-full",children:t.jsxs("tbody",{children:[t.jsxs("tr",{className:"bg-green-50",children:[t.jsx("td",{className:"px-4 py-3 font-semibold",children:e("Tax Collected (Sales)")}),t.jsx("td",{className:"px-4 py-3 text-right"})]}),s.tax_collected.items.map((a,c)=>t.jsxs("tr",{className:"border-t hover:bg-gray-50",children:[t.jsx("td",{className:"px-8 py-2",children:a.tax_name}),t.jsx("td",{className:"px-4 py-2 text-right",children:l(a.amount)})]},c)),t.jsxs("tr",{className:"bg-gray-100 font-semibold border-t-2",children:[t.jsx("td",{className:"px-4 py-3",children:e("Total Tax Collected")}),t.jsx("td",{className:"px-4 py-3 text-right",children:l(s.tax_collected.total)})]}),t.jsxs("tr",{className:"bg-red-50",children:[t.jsx("td",{className:"px-4 py-3 font-semibold",children:e("Tax Paid (Purchases)")}),t.jsx("td",{className:"px-4 py-3 text-right"})]}),s.tax_paid.items.map((a,c)=>t.jsxs("tr",{className:"border-t hover:bg-gray-50",children:[t.jsx("td",{className:"px-8 py-2",children:a.tax_name}),t.jsx("td",{className:"px-4 py-2 text-right",children:l(a.amount)})]},c)),t.jsxs("tr",{className:"bg-gray-100 font-semibold border-t-2",children:[t.jsx("td",{className:"px-4 py-3",children:e("Total Tax Paid")}),t.jsx("td",{className:"px-4 py-3 text-right",children:l(s.tax_paid.total)})]}),t.jsxs("tr",{className:`font-bold border-t-4 ${s.net_tax_liability>=0?"bg-blue-50":"bg-yellow-50"}`,children:[t.jsx("td",{className:"px-4 py-4 text-lg",children:e("Net Tax Liability")}),t.jsx("td",{className:"px-4 py-4 text-lg text-right",children:l(s.net_tax_liability)})]})]})})})]}):t.jsx(C,{icon:F,title:e("Tax Summary Report"),description:e("Select date range to generate the report"),className:"h-auto py-12"})})]})}export{V as default};
