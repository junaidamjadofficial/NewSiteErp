function v(){return v=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var o in t)({}).hasOwnProperty.call(t,o)&&(s[o]=t[o])}return s},v.apply(null,arguments)}const J=String.prototype.replace,X=/%20/g,_={RFC1738:function(s){return J.call(s,X,"+")},RFC3986:function(s){return String(s)}};var q="RFC3986";const T=Object.prototype.hasOwnProperty,S=Array.isArray,A=function(){const s=[];for(let e=0;e<256;++e)s.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return s}(),Y=function s(e,t,o){if(!t)return e;if(typeof t!="object"){if(S(e))e.push(t);else{if(!e||typeof e!="object")return[e,t];(o&&(o.plainObjects||o.allowPrototypes)||!T.call(Object.prototype,t))&&(e[t]=!0)}return e}if(!e||typeof e!="object")return[e].concat(t);let c=e;return S(e)&&!S(t)&&(c=function(r,i){const l=i&&i.plainObjects?Object.create(null):{};for(let f=0;f<r.length;++f)r[f]!==void 0&&(l[f]=r[f]);return l}(e,o)),S(e)&&S(t)?(t.forEach(function(r,i){if(T.call(e,i)){const l=e[i];l&&typeof l=="object"&&r&&typeof r=="object"?e[i]=s(l,r,o):e.push(r)}else e[i]=r}),e):Object.keys(t).reduce(function(r,i){const l=t[i];return r[i]=T.call(r,i)?s(r[i],l,o):l,r},c)},C=1024,ee=function(s,e){return[].concat(s,e)},U=function(s,e){if(S(s)){const t=[];for(let o=0;o<s.length;o+=1)t.push(e(s[o]));return t}return e(s)},te=Object.prototype.hasOwnProperty,V={brackets:function(s){return s+"[]"},comma:"comma",indices:function(s,e){return s+"["+e+"]"},repeat:function(s){return s}},E=Array.isArray,re=Array.prototype.push,L=function(s,e){re.apply(s,E(e)?e:[e])},ne=Date.prototype.toISOString,O={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:function(s,e,t,o,c){if(s.length===0)return s;let r=s;if(typeof s=="symbol"?r=Symbol.prototype.toString.call(s):typeof s!="string"&&(r=String(s)),t==="iso-8859-1")return escape(r).replace(/%u[0-9a-f]{4}/gi,function(l){return"%26%23"+parseInt(l.slice(2),16)+"%3B"});let i="";for(let l=0;l<r.length;l+=C){const f=r.length>=C?r.slice(l,l+C):r,u=[];for(let p=0;p<f.length;++p){let a=f.charCodeAt(p);a===45||a===46||a===95||a===126||a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122||c==="RFC1738"&&(a===40||a===41)?u[u.length]=f.charAt(p):a<128?u[u.length]=A[a]:a<2048?u[u.length]=A[192|a>>6]+A[128|63&a]:a<55296||a>=57344?u[u.length]=A[224|a>>12]+A[128|a>>6&63]+A[128|63&a]:(p+=1,a=65536+((1023&a)<<10|1023&f.charCodeAt(p)),u[u.length]=A[240|a>>18]+A[128|a>>12&63]+A[128|a>>6&63]+A[128|63&a])}i+=u.join("")}return i},encodeValuesOnly:!1,format:q,formatter:_[q],indices:!1,serializeDate:function(s){return ne.call(s)},skipNulls:!1,strictNullHandling:!1},K={},W=function(s,e,t,o,c,r,i,l,f,u,p,a,d,y,n,m,b,g){let h=s,j=g,$=0,Z=!1;for(;(j=j.get(K))!==void 0&&!Z;){const w=j.get(s);if($+=1,w!==void 0){if(w===$)throw new RangeError("Cyclic object value");Z=!0}j.get(K)===void 0&&($=0)}if(typeof u=="function"?h=u(e,h):h instanceof Date?h=d(h):t==="comma"&&E(h)&&(h=U(h,function(w){return w instanceof Date?d(w):w})),h===null){if(r)return f&&!m?f(e,O.encoder,b,"key",y):e;h=""}if(typeof(x=h)=="string"||typeof x=="number"||typeof x=="boolean"||typeof x=="symbol"||typeof x=="bigint"||function(w){return!(!w||typeof w!="object"||!(w.constructor&&w.constructor.isBuffer&&w.constructor.isBuffer(w)))}(h))return f?[n(m?e:f(e,O.encoder,b,"key",y))+"="+n(f(h,O.encoder,b,"value",y))]:[n(e)+"="+n(String(h))];var x;const R=[];if(h===void 0)return R;let I;if(t==="comma"&&E(h))m&&f&&(h=U(h,f)),I=[{value:h.length>0?h.join(",")||null:void 0}];else if(E(u))I=u;else{const w=Object.keys(h);I=p?w.sort(p):w}const z=l?e.replace(/\./g,"%2E"):e,k=o&&E(h)&&h.length===1?z+"[]":z;if(c&&E(h)&&h.length===0)return k+"[]";for(let w=0;w<I.length;++w){const D=I[w],H=typeof D=="object"&&D.value!==void 0?D.value:h[D];if(i&&H===null)continue;const N=a&&l?D.replace(/\./g,"%2E"):D,G=E(h)?typeof t=="function"?t(k,N):k:k+(a?"."+N:"["+N+"]");g.set(s,$);const B=new WeakMap;B.set(K,g),L(R,W(H,G,t,o,c,r,i,l,t==="comma"&&m&&E(h)?null:f,u,p,a,d,y,n,m,b,B))}return R},Q=Object.prototype.hasOwnProperty,oe=Array.isArray,P={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:function(s,e,t){const o=s.replace(/\+/g," ");if(t==="iso-8859-1")return o.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(o)}catch{return o}},delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},ie=function(s){return s.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})},M=function(s,e){return s&&typeof s=="string"&&e.comma&&s.indexOf(",")>-1?s.split(","):s},se=function(s,e,t,o){if(!s)return;const c=t.allowDots?s.replace(/\.([^.[]+)/g,"[$1]"):s,r=/(\[[^[\]]*])/g;let i=t.depth>0&&/(\[[^[\]]*])/.exec(c);const l=i?c.slice(0,i.index):c,f=[];if(l){if(!t.plainObjects&&Q.call(Object.prototype,l)&&!t.allowPrototypes)return;f.push(l)}let u=0;for(;t.depth>0&&(i=r.exec(c))!==null&&u<t.depth;){if(u+=1,!t.plainObjects&&Q.call(Object.prototype,i[1].slice(1,-1))&&!t.allowPrototypes)return;f.push(i[1])}return i&&f.push("["+c.slice(i.index)+"]"),function(p,a,d,y){let n=y?a:M(a,d);for(let m=p.length-1;m>=0;--m){let b;const g=p[m];if(g==="[]"&&d.parseArrays)b=d.allowEmptyArrays&&n===""?[]:[].concat(n);else{b=d.plainObjects?Object.create(null):{};const h=g.charAt(0)==="["&&g.charAt(g.length-1)==="]"?g.slice(1,-1):g,j=d.decodeDotInKeys?h.replace(/%2E/g,"."):h,$=parseInt(j,10);d.parseArrays||j!==""?!isNaN($)&&g!==j&&String($)===j&&$>=0&&d.parseArrays&&$<=d.arrayLimit?(b=[],b[$]=n):j!=="__proto__"&&(b[j]=n):b={0:n}}n=b}return n}(f,e,t,o)};function le(s,e){const t=function(i){return P}();if(s===""||s==null)return t.plainObjects?Object.create(null):{};const o=typeof s=="string"?function(i,l){const f={__proto__:null},u=(l.ignoreQueryPrefix?i.replace(/^\?/,""):i).split(l.delimiter,l.parameterLimit===1/0?void 0:l.parameterLimit);let p,a=-1,d=l.charset;if(l.charsetSentinel)for(p=0;p<u.length;++p)u[p].indexOf("utf8=")===0&&(u[p]==="utf8=%E2%9C%93"?d="utf-8":u[p]==="utf8=%26%2310003%3B"&&(d="iso-8859-1"),a=p,p=u.length);for(p=0;p<u.length;++p){if(p===a)continue;const y=u[p],n=y.indexOf("]="),m=n===-1?y.indexOf("="):n+1;let b,g;m===-1?(b=l.decoder(y,P.decoder,d,"key"),g=l.strictNullHandling?null:""):(b=l.decoder(y.slice(0,m),P.decoder,d,"key"),g=U(M(y.slice(m+1),l),function(j){return l.decoder(j,P.decoder,d,"value")})),g&&l.interpretNumericEntities&&d==="iso-8859-1"&&(g=ie(g)),y.indexOf("[]=")>-1&&(g=oe(g)?[g]:g);const h=Q.call(f,b);h&&l.duplicates==="combine"?f[b]=ee(f[b],g):h&&l.duplicates!=="last"||(f[b]=g)}return f}(s,t):s;let c=t.plainObjects?Object.create(null):{};const r=Object.keys(o);for(let i=0;i<r.length;++i){const l=r[i],f=se(l,o[l],t,typeof s=="string");c=Y(c,f,t)}return t.allowSparse===!0?c:function(i){const l=[{obj:{o:i},prop:"o"}],f=[];for(let u=0;u<l.length;++u){const p=l[u],a=p.obj[p.prop],d=Object.keys(a);for(let y=0;y<d.length;++y){const n=d[y],m=a[n];typeof m=="object"&&m!==null&&f.indexOf(m)===-1&&(l.push({obj:a,prop:n}),f.push(m))}}return function(u){for(;u.length>1;){const p=u.pop(),a=p.obj[p.prop];if(S(a)){const d=[];for(let y=0;y<a.length;++y)a[y]!==void 0&&d.push(a[y]);p.obj[p.prop]=d}}}(l),i}(c)}class F{constructor(e,t,o){var c,r;this.name=e,this.definition=t,this.bindings=(c=t.bindings)!=null?c:{},this.wheres=(r=t.wheres)!=null?r:{},this.config=o}get template(){const e=`${this.origin}/${this.definition.uri}`.replace(/\/+$/,"");return e===""?"/":e}get origin(){return this.config.absolute?this.definition.domain?`${this.config.url.match(/^\w+:\/\//)[0]}${this.definition.domain}${this.config.port?`:${this.config.port}`:""}`:this.config.url:""}get parameterSegments(){var e,t;return(e=(t=this.template.match(/{[^}?]+\??}/g))==null?void 0:t.map(o=>({name:o.replace(/{|\??}/g,""),required:!/\?}$/.test(o)})))!=null?e:[]}matchesUrl(e){var t;if(!this.definition.methods.includes("GET"))return!1;const o=this.template.replace(/[.*+$()[\]]/g,"\\$&").replace(/(\/?){([^}?]*)(\??)}/g,(l,f,u,p)=>{var a;const d=`(?<${u}>${((a=this.wheres[u])==null?void 0:a.replace(/(^\^)|(\$$)/g,""))||"[^/?]+"})`;return p?`(${f}${d})?`:`${f}${d}`}).replace(/^\w+:\/\//,""),[c,r]=e.replace(/^\w+:\/\//,"").split("?"),i=(t=new RegExp(`^${o}/?$`).exec(c))!=null?t:new RegExp(`^${o}/?$`).exec(decodeURI(c));if(i){for(const l in i.groups)i.groups[l]=typeof i.groups[l]=="string"?decodeURIComponent(i.groups[l]):i.groups[l];return{params:i.groups,query:le(r)}}return!1}compile(e){return this.parameterSegments.length?this.template.replace(/{([^}?]+)(\??)}/g,(t,o,c)=>{var r,i;if(!c&&[null,void 0].includes(e[o]))throw new Error(`Ziggy error: '${o}' parameter is required for route '${this.name}'.`);if(this.wheres[o]&&!new RegExp(`^${c?`(${this.wheres[o]})?`:this.wheres[o]}$`).test((i=e[o])!=null?i:""))throw new Error(`Ziggy error: '${o}' parameter '${e[o]}' does not match required format '${this.wheres[o]}' for route '${this.name}'.`);return encodeURI((r=e[o])!=null?r:"").replace(/%7C/g,"|").replace(/%25/g,"%").replace(/\$/g,"%24")}).replace(this.config.absolute?/(\.[^/]+?)(\/\/)/:/(^)(\/\/)/,"$1/").replace(/\/+$/,""):this.template}}class ae extends String{constructor(e,t,o=!0,c){if(super(),this.t=c??(typeof Ziggy<"u"?Ziggy:globalThis==null?void 0:globalThis.Ziggy),!this.t&&typeof document<"u"&&document.getElementById("ziggy-routes-json")&&(globalThis.Ziggy=JSON.parse(document.getElementById("ziggy-routes-json").textContent),this.t=globalThis.Ziggy),this.t=v({},this.t,{absolute:o}),e){if(!this.t.routes[e])throw new Error(`Ziggy error: route '${e}' is not in the route list.`);this.i=new F(e,this.t.routes[e],this.t),this.u=this.l(t)}}toString(){const e=Object.keys(this.u).filter(t=>!this.i.parameterSegments.some(({name:o})=>o===t)).filter(t=>t!=="_query").reduce((t,o)=>v({},t,{[o]:this.u[o]}),{});return this.i.compile(this.u)+function(t,o){let c=t;const r=function(n){if(!n)return O;if(n.allowEmptyArrays!==void 0&&typeof n.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(n.encodeDotInKeys!==void 0&&typeof n.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(n.encoder!=null&&typeof n.encoder!="function")throw new TypeError("Encoder has to be a function.");const m=n.charset||O.charset;if(n.charset!==void 0&&n.charset!=="utf-8"&&n.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let b=q;if(n.format!==void 0){if(!te.call(_,n.format))throw new TypeError("Unknown format option provided.");b=n.format}const g=_[b];let h,j=O.filter;if((typeof n.filter=="function"||E(n.filter))&&(j=n.filter),h=n.arrayFormat in V?n.arrayFormat:"indices"in n?n.indices?"indices":"repeat":O.arrayFormat,"commaRoundTrip"in n&&typeof n.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");return{addQueryPrefix:typeof n.addQueryPrefix=="boolean"?n.addQueryPrefix:O.addQueryPrefix,allowDots:n.allowDots===void 0?n.encodeDotInKeys===!0||O.allowDots:!!n.allowDots,allowEmptyArrays:typeof n.allowEmptyArrays=="boolean"?!!n.allowEmptyArrays:O.allowEmptyArrays,arrayFormat:h,charset:m,charsetSentinel:typeof n.charsetSentinel=="boolean"?n.charsetSentinel:O.charsetSentinel,commaRoundTrip:n.commaRoundTrip,delimiter:n.delimiter===void 0?O.delimiter:n.delimiter,encode:typeof n.encode=="boolean"?n.encode:O.encode,encodeDotInKeys:typeof n.encodeDotInKeys=="boolean"?n.encodeDotInKeys:O.encodeDotInKeys,encoder:typeof n.encoder=="function"?n.encoder:O.encoder,encodeValuesOnly:typeof n.encodeValuesOnly=="boolean"?n.encodeValuesOnly:O.encodeValuesOnly,filter:j,format:b,formatter:g,serializeDate:typeof n.serializeDate=="function"?n.serializeDate:O.serializeDate,skipNulls:typeof n.skipNulls=="boolean"?n.skipNulls:O.skipNulls,sort:typeof n.sort=="function"?n.sort:null,strictNullHandling:typeof n.strictNullHandling=="boolean"?n.strictNullHandling:O.strictNullHandling}}(o);let i,l;typeof r.filter=="function"?(l=r.filter,c=l("",c)):E(r.filter)&&(l=r.filter,i=l);const f=[];if(typeof c!="object"||c===null)return"";const u=V[r.arrayFormat],p=u==="comma"&&r.commaRoundTrip;i||(i=Object.keys(c)),r.sort&&i.sort(r.sort);const a=new WeakMap;for(let n=0;n<i.length;++n){const m=i[n];r.skipNulls&&c[m]===null||L(f,W(c[m],m,u,p,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,a))}const d=f.join(r.delimiter);let y=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(y+=r.charset==="iso-8859-1"?"utf8=%26%2310003%3B&":"utf8=%E2%9C%93&"),d.length>0?y+d:""}(v({},e,this.u._query),{addQueryPrefix:!0,arrayFormat:"indices",encodeValuesOnly:!0,skipNulls:!0,encoder:(t,o)=>typeof t=="boolean"?Number(t):o(t)})}p(e){e?this.t.absolute&&e.startsWith("/")&&(e=this.h().host+e):e=this.m();let t={};const[o,c]=Object.entries(this.t.routes).find(([r,i])=>t=new F(r,i,this.t).matchesUrl(e))||[void 0,void 0];return v({name:o},t,{route:c})}m(){const{host:e,pathname:t,search:o}=this.h();return(this.t.absolute?e+t:t.replace(this.t.url.replace(/^\w*:\/\/[^/]+/,""),"").replace(/^\/+/,"/"))+o}current(e,t){const{name:o,params:c,query:r,route:i}=this.p();if(!e)return o;const l=new RegExp(`^${e.replace(/\./g,"\\.").replace(/\*/g,".*")}$`).test(o);if([null,void 0].includes(t)||!l)return l;const f=new F(o,i,this.t);t=this.l(t,f);const u=v({},c,r);if(Object.values(t).every(a=>!a)&&!Object.values(u).some(a=>a!==void 0))return!0;const p=(a,d)=>Object.entries(a).every(([y,n])=>Array.isArray(n)&&Array.isArray(d[y])?n.every(m=>d[y].includes(m)||d[y].includes(decodeURIComponent(m))):typeof n=="object"&&typeof d[y]=="object"&&n!==null&&d[y]!==null?p(n,d[y]):d[y]==n||d[y]==decodeURIComponent(n));return p(t,u)}h(){var e,t,o,c,r,i;const{host:l="",pathname:f="",search:u=""}=typeof window<"u"?window.location:{};return{host:(e=(t=this.t.location)==null?void 0:t.host)!=null?e:l,pathname:(o=(c=this.t.location)==null?void 0:c.pathname)!=null?o:f,search:(r=(i=this.t.location)==null?void 0:i.search)!=null?r:u}}get params(){const{params:e,query:t}=this.p();return v({},e,t)}get routeParams(){return this.p().params}get queryParams(){return this.p().query}has(e){return this.t.routes.hasOwnProperty(e)}l(e={},t=this.i){e!=null||(e={}),e=["string","number"].includes(typeof e)?[e]:e;const o=t.parameterSegments.filter(({name:c})=>!this.t.defaults[c]);return Array.isArray(e)?e=e.reduce((c,r,i)=>v({},c,o[i]?{[o[i].name]:r}:typeof r=="object"?r:{[r]:""}),{}):o.length!==1||e[o[0].name]||!e.hasOwnProperty(Object.values(t.bindings)[0])&&!e.hasOwnProperty("id")||(e={[o[0].name]:e}),v({},this.v(t),this.j(e,t))}v(e){return e.parameterSegments.filter(({name:t})=>this.t.defaults[t]).reduce((t,{name:o},c)=>v({},t,{[o]:this.t.defaults[o]}),{})}j(e,{bindings:t,parameterSegments:o}){return Object.entries(e).reduce((c,[r,i])=>{if(!i||typeof i!="object"||Array.isArray(i)||!o.some(({name:l})=>l===r))return v({},c,{[r]:i});if(!i.hasOwnProperty(t[r])){if(!i.hasOwnProperty("id"))throw new Error(`Ziggy error: object passed as '${r}' parameter is missing route model binding key '${t[r]}'.`);t[r]="id"}return v({},c,{[r]:i[t[r]]})},{})}valueOf(){return this.toString()}}function ce(s,e,t,o){const c=new ae(s,e,t,o);return s?c.toString():c}export{ce as D};
