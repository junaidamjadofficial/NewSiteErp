import{j as s}from"./ui-ZHFf5B17.js";import{r as b}from"./vendor-CcMVubkO.js";import{X as N,S as v}from"./app-BBiA4mAE.js";import{a as w}from"./html2pdf-Dais6JZR.js";import{b as i,a as g,f as n}from"./helpers-QYnGjXad.js";import{u as T}from"./usePageButtons-Dl7ivmUg.js";import{u as P}from"./useTranslation-CV4_gBnb.js";/* empty css            */import"./radio-group-Bg6nc_Xb.js";import"./index-BYFX2qNQ.js";import"./utils-DrcJ8Itn.js";import"./utils-B-dksMZM.js";import"./circle-bmoNtd-e.js";import"./createLucideIcon-Dov4NOxw.js";import"./label-DbqhUtKI.js";import"./index-BMyiKApA.js";function q(){var o,m,x,p,h;const{t:a}=P(),{invoice:e}=N().props,[y,c]=b.useState(!1),l=T("signaturePrintBtn",{invoice:e,invoiceType:"sales"});b.useEffect(()=>{new URLSearchParams(window.location.search).get("download")==="pdf"&&f()},[]);const f=async()=>{c(!0);const t=document.querySelector(".invoice-container");if(t){const d={margin:.25,filename:`sales-invoice-${e.invoice_number}.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2},jsPDF:{unit:"in",format:"a4",orientation:"portrait"}};try{await w().set(d).from(t).save(),setTimeout(()=>window.close(),1e3)}catch(r){console.error("PDF generation failed:",r)}}c(!1)};return s.jsxs("div",{className:"min-h-screen bg-white",children:[s.jsx(v,{title:a("Sales Invoice")}),y&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsx("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),s.jsx("p",{className:"text-lg font-semibold text-gray-700",children:a("Generating PDF...")})]})})}),s.jsxs("div",{className:"invoice-container bg-white max-w-4xl mx-auto p-8",children:[s.jsxs("div",{className:"flex justify-between items-start mb-8",children:[s.jsxs("div",{className:"w-1/2",children:[s.jsx("h1",{className:"text-2xl font-bold mb-4",children:i("company_name")||"YOUR COMPANY"}),s.jsxs("div",{className:"text-sm space-y-1",children:[i("company_address")&&s.jsx("p",{children:i("company_address")}),(i("company_city")||i("company_state")||i("company_zipcode"))&&s.jsxs("p",{children:[i("company_city"),i("company_state")&&`, ${i("company_state")}`," ",i("company_zipcode")]}),i("company_country")&&s.jsx("p",{children:i("company_country")}),i("company_telephone")&&s.jsxs("p",{children:[a("Phone"),": ",i("company_telephone")]}),i("company_email")&&s.jsxs("p",{children:[a("Email"),": ",i("company_email")]}),i("registration_number")&&s.jsxs("p",{children:[a("Registration"),": ",i("registration_number")]})]})]}),s.jsxs("div",{className:"text-right w-1/2",children:[s.jsx("h2",{className:"text-2xl font-bold mb-2",children:a("SALES INVOICE")}),s.jsxs("p",{className:"text-lg font-semibold",children:["#",e.invoice_number]}),s.jsxs("div",{className:"text-sm mt-2 space-y-1",children:[s.jsxs("p",{children:[a("Date"),": ",g(e.invoice_date)]}),s.jsxs("p",{children:[a("Due"),": ",g(e.due_date)]})]})]})]}),s.jsxs("div",{className:"flex justify-between mb-8",children:[s.jsxs("div",{className:"w-1/2",children:[s.jsx("h3",{className:"font-bold mb-3",children:a("BILL TO")}),s.jsxs("div",{className:"text-sm space-y-1",children:[s.jsx("p",{className:"font-semibold",children:(o=e.customer)==null?void 0:o.name}),s.jsx("p",{children:(m=e.customer)==null?void 0:m.email}),((x=e.customer_details)==null?void 0:x.billing_address)&&s.jsxs(s.Fragment,{children:[s.jsx("p",{children:e.customer_details.billing_address.name}),s.jsx("p",{children:e.customer_details.billing_address.address_line_1}),s.jsxs("p",{children:[e.customer_details.billing_address.city,", ",e.customer_details.billing_address.state," ",e.customer_details.billing_address.zip_code]})]})]})]}),s.jsxs("div",{className:"text-right w-1/2",children:[s.jsx("h3",{className:"font-bold mb-3",children:a("SHIP TO")}),s.jsx("div",{className:"text-sm space-y-1",children:(p=e.customer_details)!=null&&p.shipping_address?s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"font-semibold",children:e.customer_details.shipping_address.name}),s.jsx("p",{children:e.customer_details.shipping_address.address_line_1}),s.jsxs("p",{children:[e.customer_details.shipping_address.city,", ",e.customer_details.shipping_address.state," ",e.customer_details.shipping_address.zip_code]})]}):s.jsx("p",{className:"text-gray-500",children:a("Same as billing address")})})]})]}),s.jsx("div",{className:"mb-8",children:s.jsxs("table",{className:"w-full table-fixed",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-gray-300",children:[s.jsx("th",{className:"text-left py-3 font-bold",children:a("ITEM")}),e.type==="product"&&s.jsx("th",{className:"text-center py-3 font-bold",children:a("QTY")}),s.jsx("th",{className:"text-right py-3 font-bold",children:a("PRICE")}),s.jsx("th",{className:"text-right py-3 font-bold",children:a("DISCOUNT")}),s.jsx("th",{className:"text-right py-3 font-bold",children:a("TAX")}),s.jsx("th",{className:"text-right py-3 font-bold",children:a("TOTAL")})]})}),s.jsx("tbody",{children:(h=e.items)==null?void 0:h.map((t,d)=>{var r,j;return s.jsxs("tr",{className:"page-break-inside-avoid",children:[s.jsxs("td",{className:"py-4",children:[s.jsx("div",{className:"font-semibold",children:(r=t.product)==null?void 0:r.name}),((j=t.product)==null?void 0:j.sku)&&s.jsxs("div",{className:"text-xs text-gray-500",children:[a("SKU"),": ",t.product.sku]})]}),e.type==="product"&&s.jsx("td",{className:"text-center py-4",children:t.quantity}),s.jsx("td",{className:"text-right py-4",children:n(t.unit_price)}),s.jsx("td",{className:"text-right py-4",children:t.discount_percentage>0?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"text-sm",children:[t.discount_percentage,"%"]}),s.jsxs("div",{className:"text-sm font-medium",children:["-",n(t.discount_amount)]})]}):s.jsx("div",{className:"text-sm",children:"0%"})}),s.jsx("td",{className:"text-right py-4",children:t.taxes&&t.taxes.length>0?s.jsxs(s.Fragment,{children:[t.taxes.map((u,_)=>s.jsxs("div",{className:"text-sm",children:[u.tax_name," (",u.tax_rate,"%)"]},_)),s.jsx("div",{className:"text-sm font-medium",children:n(t.tax_amount)})]}):t.tax_percentage>0?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"text-sm",children:[t.tax_percentage,"%"]}),s.jsx("div",{className:"text-sm font-medium",children:n(t.tax_amount)})]}):s.jsx("div",{className:"text-sm",children:"0%"})}),s.jsx("td",{className:"text-right py-4 font-semibold",children:n(t.total_amount)})]},d)})})]})}),s.jsx("div",{className:"flex justify-end mb-4 page-break-inside-avoid",children:s.jsx("div",{className:"w-80 page-break-inside-avoid",children:s.jsx("div",{className:"border border-gray-400 p-4 page-break-inside-avoid",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{children:[a("Subtotal"),":"]}),s.jsx("span",{children:n(e.subtotal)})]}),e.discount_amount>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{children:[a("Discount"),":"]}),s.jsxs("span",{children:["-",n(e.discount_amount)]})]}),e.tax_amount>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{children:[a("Tax"),":"]}),s.jsx("span",{children:n(e.tax_amount)})]}),s.jsx("div",{className:"border-t border-gray-400 pt-2 mt-2",children:s.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[s.jsxs("span",{children:[a("TOTAL"),":"]}),s.jsx("span",{children:n(e.total_amount)})]})})]})})})}),s.jsxs("div",{className:"border-t border-gray-400 pt-4 text-center",children:[l.length>0&&l.map(t=>s.jsx("div",{children:t.component},t.id)),s.jsxs("p",{className:"font-semibold",children:[a("PAYMENT TERMS"),": ",e.payment_terms||a("Net 30 Days")]}),s.jsx("p",{className:"text-sm mt-2",children:a("Thank you for your business!")})]})]}),s.jsx("style",{children:`
                body {
                    -webkit-print-color-adjust: exact;
                    color-adjust: exact;
                    font-family: Arial, sans-serif;
                }

                @page {
                    margin: 0.5in;
                    size: A4;
                }

                .invoice-container {
                    max-width: 100%;
                    margin: 0;
                    box-shadow: none;
                }

                .page-break-inside-avoid {
                    page-break-inside: avoid;
                    break-inside: avoid;
                }

                @media print {
                    body {
                        background: white;
                    }

                    .invoice-container {
                        box-shadow: none;
                    }
                }
            `})]})}export{q as default};
