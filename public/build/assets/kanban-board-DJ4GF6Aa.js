import{j as r}from"./ui-ZHFf5B17.js";import{r as p}from"./vendor-CcMVubkO.js";import{u as b}from"./useTranslation-CV4_gBnb.js";function N({column:t,tasks:o,onMove:i,kanbanActions:l,TaskCard:c}){const{t:h}=b(),[j,d]=p.useState(!1),g=e=>{e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="move",d(!0)},f=e=>{e.preventDefault(),d(!0)},m=e=>{e.preventDefault(),e.currentTarget.contains(e.relatedTarget)||d(!1)},a=e=>{e.preventDefault(),e.stopPropagation(),d(!1);try{const s=JSON.parse(e.dataTransfer.getData("application/json"));s.taskId&&i&&i(s.taskId,"",t.id)}catch(s){console.error("Error parsing drag data:",s)}};return r.jsx("div",{className:"flex-1 min-w-72 max-w-80",onDragOver:g,onDragEnter:f,onDragLeave:m,onDrop:a,children:r.jsxs("div",{className:`h-full rounded-lg ${j?"ring-2 ring-blue-400 bg-blue-50":""} transition-all`,style:{backgroundColor:`${t.color}10`},children:[r.jsx("div",{className:"px-3 py-2 rounded-t-lg border-b border-white/50",style:{backgroundColor:`${t.color}20`},children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("h3",{className:"text-sm font-semibold",style:{color:t.color},children:t.title}),r.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-white/70 font-medium",style:{color:t.color},children:o.length})]}),typeof l=="function"?l(t.id):l]})}),r.jsxs("div",{className:"p-2 min-h-[700px] max-h-[calc(100vh-200px)] overflow-y-auto",children:[o.map(e=>c?r.jsx(c,{task:e},e.id):r.jsx("div",{children:e.title},e.id)),o.length===0&&r.jsx("div",{className:"text-center py-12 text-gray-400",children:r.jsx("p",{className:"text-xs",children:h("Drop tasks here")})})]})]})})}const T=p.forwardRef(function({tasks:o,columns:i,onMove:l,kanbanActions:c,taskCard:h},j){const{t:d}=b(),[g,f]=p.useState(o);p.useEffect(()=>{f(o)},[o]);const m=(a,e,s)=>{f(y=>{const n={...y};let v=null;return Object.keys(n).forEach(x=>{const D=n[x].findIndex(u=>u.id===a);D!==-1&&(v=n[x][D],n[x]=n[x].filter(u=>u.id!==a))}),v&&(n[s]=[...n[s]||[],v]),n}),l&&l(a,e,s)};return r.jsx("div",{className:"flex space-x-6 overflow-x-auto pb-6",children:i.map(a=>r.jsx(N,{column:a,tasks:g[a.id]||[],onMove:m,kanbanActions:c,TaskCard:h},a.id))})});export{T as K};
