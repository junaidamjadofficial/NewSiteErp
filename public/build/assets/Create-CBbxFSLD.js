import{j as e}from"./ui-ZHFf5B17.js";import{a as X,b as z,c as K}from"./dialog-BLwxprq_.js";import{X as W,G as Z,a as U}from"./app-BBiA4mAE.js";import{B as A}from"./button-DYC7yMVq.js";import{L as o}from"./label-DbqhUtKI.js";import{I as n}from"./input-error-DuIbBMgZ.js";import{I as d}from"./input-DqOfVTcn.js";import{C as B}from"./currency-input-BZrT8lhz.js";import{T as w}from"./textarea-DxQ_BnuT.js";import{S as _,a as v,b as f,c as y,d as j}from"./select-BEhl2QER.js";import{R as ee,a as re}from"./radio-group-Bg6nc_Xb.js";import{C as se}from"./checkbox-Cvtgzug2.js";import{P as te}from"./phone-input-d5yugTbF.js";import{D as Q}from"./date-picker-CVthJV3y.js";import{r as x}from"./vendor-CcMVubkO.js";import{M as ie}from"./MediaPicker-CztOgrDm.js";import{u as le}from"./useTranslation-CV4_gBnb.js";import{I as ae}from"./image-C8M1mNs8.js";import{F as oe}from"./file-text-BmYvzZ5U.js";import"./utils-DrcJ8Itn.js";import"./utils-B-dksMZM.js";import"./x-DVK_F_Gh.js";import"./createLucideIcon-Dov4NOxw.js";/* empty css            */import"./index-BMyiKApA.js";import"./helpers-QYnGjXad.js";import"./index-BdQq_4o_.js";import"./index-BYFX2qNQ.js";import"./index-BZAHB8Ku.js";import"./chevron-down-Zr-tNTku.js";import"./search-Chs14P_a.js";import"./check-DUlQPeVG.js";import"./circle-bmoNtd-e.js";import"./react-datepicker-BHcKmBHW.js";import"./popover-fYI5j510.js";import"./calendar-DvmJ2XsD.js";import"./badge-CV60sqBJ.js";import"./plus-C1hmRCnY.js";import"./upload-KhHqnUys.js";function He({onSuccess:P}){var V,T;const{jobpostings:C,candidatesources:g}=W().props,{t:s}=le(),[b,N]=x.useState([]),[u,S]=x.useState({applicant:[],visibility:[]}),[q,M]=x.useState({}),[ne,E]=x.useState(null),[k,$]=x.useState(null),[D,F]=x.useState(null),L=r=>{var c;const i=(c=r.split(".").pop())==null?void 0:c.toLowerCase();return["jpg","jpeg","png","gif","webp"].includes(i||"")?e.jsx(ae,{className:"h-8 w-8 text-blue-500"}):e.jsx(oe,{className:"h-8 w-8 text-red-500"})},I=(r,i)=>{var c;if(r){const m=(c=r.name.split(".").pop())==null?void 0:c.toLowerCase();if(["jpg","jpeg","png","gif","webp"].includes(m||"")){const p=new FileReader;p.onload=h=>{var J,G,O;i==="profile_photo"?E((J=h.target)==null?void 0:J.result):i==="resume"?$((G=h.target)==null?void 0:G.result):F((O=h.target)==null?void 0:O.result)},p.readAsDataURL(r)}else i==="profile_photo"?E(null):i==="resume"?$(null):F(null)}else i==="profile_photo"?E(null):i==="resume"?$(null):F(null);l(i,r)},{data:t,setData:l,post:Y,processing:R,errors:a}=Z({first_name:"",last_name:"",email:"",phone:"",gender:"",dob:"",country:"",state:"",city:"",job_id:"",source_id:"",current_company:"",current_position:"",experience_years:"",current_salary:"",expected_salary:"",notice_period:"",skills:"",education:"",portfolio_url:"",linkedin_url:"",profile_url:"",resume:null,cover_letter:null,status:"0",application_date:"",custom_question:""});x.useEffect(()=>{t.job_id?(U.get(route("recruitment.job-postings.custom-questions",t.job_id)).then(r=>{N(r.data)}).catch(()=>{N([])}),U.get(route("recruitment.job-postings.settings",t.job_id)).then(r=>{S({applicant:r.data.applicant||[],visibility:r.data.visibility||[]})}).catch(()=>{S({applicant:[],visibility:[]})})):(N([]),S({applicant:[],visibility:[]}))},[t.job_id]);const H=r=>{r.preventDefault();const i=b.filter(m=>m.is_required),c={};i.forEach(m=>{const p=t[`custom_question_${m.id}`];(!p||p.trim()==="")&&(c[`custom_question_${m.id}`]="This field is required.")}),M(c),!(Object.keys(c).length>0)&&Y(route("recruitment.candidates.store"),{onSuccess:()=>{P()}})};return e.jsxs(X,{className:"max-w-4xl",children:[e.jsx(z,{children:e.jsx(K,{children:s("Create Candidate")})}),e.jsxs("form",{onSubmit:H,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(o,{htmlFor:"job_id",required:!0,children:[s("Job")," "]}),e.jsxs(_,{value:((V=t.job_id)==null?void 0:V.toString())||"",onValueChange:r=>l("job_id",r),required:!0,children:[e.jsx(v,{children:e.jsx(f,{placeholder:s("Select Job")})}),e.jsx(y,{children:C.map(r=>e.jsx(j,{value:r.id.toString(),children:r.title},r.id))})]}),e.jsx(n,{message:a.job_id}),(!C||C.length===0)&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[s("Create job posting here. "),e.jsx("a",{href:route("recruitment.job-postings.index"),className:"text-blue-600 hover:text-blue-800 cursor-pointer",children:s("job posting")}),"."]})]}),e.jsxs("div",{children:[e.jsxs(o,{htmlFor:"source_id",required:!0,children:[s("Source")," "]}),e.jsxs(_,{value:((T=t.source_id)==null?void 0:T.toString())||"",onValueChange:r=>l("source_id",r),required:!0,children:[e.jsx(v,{children:e.jsx(f,{placeholder:s("Select Source")})}),e.jsx(y,{children:g==null?void 0:g.map(r=>e.jsx(j,{value:r.id.toString(),children:r.name},r.id))})]}),e.jsx(n,{message:a.source_id}),(!g||g.length===0)&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[s("Create candidate source here. "),e.jsx("a",{href:route("recruitment.candidate-sources.index"),className:"text-blue-600 hover:text-blue-800 cursor-pointer",children:s("candidate source")}),"."]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"first_name",children:s("First Name")}),e.jsx(d,{id:"first_name",type:"text",value:t.first_name,onChange:r=>l("first_name",r.target.value),placeholder:s("Enter First Name"),required:!0}),e.jsx(n,{message:a.first_name})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"last_name",children:s("Last Name")}),e.jsx(d,{id:"last_name",type:"text",value:t.last_name,onChange:r=>l("last_name",r.target.value),placeholder:s("Enter Last Name"),required:!0}),e.jsx(n,{message:a.last_name})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.applicant.includes("gender")&&e.jsxs("div",{children:[e.jsx(o,{htmlFor:"gender",children:s("Gender")}),e.jsxs(_,{value:t.gender,onValueChange:r=>l("gender",r),children:[e.jsx(v,{children:e.jsx(f,{placeholder:s("Select Gender")})}),e.jsxs(y,{children:[e.jsx(j,{value:"male",children:s("Male")}),e.jsx(j,{value:"female",children:s("Female")}),e.jsx(j,{value:"other",children:s("Other")})]})]}),e.jsx(n,{message:a.gender})]}),u.visibility.includes("profile_image")&&e.jsxs("div",{children:[e.jsx(ie,{label:s("Profile Photo"),value:t.profile_url,onChange:r=>l("profile_url",r),placeholder:s("Select Profile Photo"),id:"profile_photo"}),e.jsx(n,{message:a.profile_photo})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"email",children:s("Email")}),e.jsx(d,{id:"email",type:"email",value:t.email,onChange:r=>l("email",r.target.value),placeholder:s("Enter Email"),required:!0}),e.jsx(n,{message:a.email})]}),e.jsx("div",{children:e.jsx(te,{label:s("Phone"),value:t.phone,onChange:r=>l("phone",r),placeholder:s("Enter Phone"),error:a.phone,id:"phone"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.applicant.includes("date_of_birth")&&e.jsxs("div",{children:[e.jsx(o,{children:s("Date of Birth")}),e.jsx(Q,{value:t.dob,onChange:r=>l("dob",r),placeholder:s("Select Date of Birth"),maxDate:new Date(Date.now()-24*60*60*1e3)}),e.jsx(n,{message:a.dob})]}),u.applicant.includes("country")&&e.jsxs("div",{children:[e.jsx(o,{htmlFor:"country",children:s("Country")}),e.jsx(d,{id:"country",type:"text",value:t.country,onChange:r=>l("country",r.target.value),placeholder:s("Enter Country")}),e.jsx(n,{message:a.country})]})]}),u.applicant.includes("country")&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.applicant.includes("country")&&e.jsxs("div",{children:[e.jsx(o,{htmlFor:"state",children:s("State")}),e.jsx(d,{id:"state",type:"text",value:t.state,onChange:r=>l("state",r.target.value),placeholder:s("Enter State")}),e.jsx(n,{message:a.state})]}),u.applicant.includes("country")&&e.jsxs("div",{children:[e.jsx(o,{htmlFor:"city",children:s("City")}),e.jsx(d,{id:"city",type:"text",value:t.city,onChange:r=>l("city",r.target.value),placeholder:s("Enter City")}),e.jsx(n,{message:a.city})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"current_company",children:s("Current Company")}),e.jsx(d,{id:"current_company",type:"text",value:t.current_company,onChange:r=>l("current_company",r.target.value),placeholder:s("Enter Current Company")}),e.jsx(n,{message:a.current_company})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"current_position",children:s("Current Position")}),e.jsx(d,{id:"current_position",type:"text",value:t.current_position,onChange:r=>l("current_position",r.target.value),placeholder:s("Enter Current Position")}),e.jsx(n,{message:a.current_position})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"experience_years",children:s("Experience (Years)")}),e.jsx(d,{id:"experience_years",type:"number",step:"0.5",min:"0",value:t.experience_years,onChange:r=>l("experience_years",r.target.value),placeholder:s("Enter Experience in Years"),required:!0}),e.jsx(n,{message:a.experience_years})]}),e.jsx("div",{children:e.jsx(B,{label:s("Current Salary"),value:t.current_salary,onChange:r=>l("current_salary",r),error:a.current_salary})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsx(B,{label:s("Expected Salary"),value:t.expected_salary,onChange:r=>l("expected_salary",r),error:a.expected_salary})}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"notice_period",children:s("Notice Period")}),e.jsx(d,{id:"notice_period",type:"text",value:t.notice_period,onChange:r=>l("notice_period",r.target.value),placeholder:s("Enter Notice Period")}),e.jsx(n,{message:a.notice_period})]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx(o,{required:!0,children:s("Application Date")}),e.jsx(Q,{value:t.application_date,onChange:r=>l("application_date",r),placeholder:s("Select Application Date"),required:!0}),e.jsx(n,{message:a.application_date})]})}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"skills",children:s("Skills")}),e.jsx(w,{id:"skills",value:t.skills,onChange:r=>l("skills",r.target.value),placeholder:s("Enter Skills"),rows:3}),e.jsx(n,{message:a.skills})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"education",children:s("Education")}),e.jsx(w,{id:"education",value:t.education,onChange:r=>l("education",r.target.value),placeholder:s("Enter Education"),rows:3}),e.jsx(n,{message:a.education})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"portfolio_url",children:s("Portfolio Url")}),e.jsx(d,{id:"portfolio_url",type:"text",value:t.portfolio_url,onChange:r=>l("portfolio_url",r.target.value),placeholder:s("Enter Portfolio Url")}),e.jsx(n,{message:a.portfolio_url})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"linkedin_url",children:s("Linkedin Url")}),e.jsx(d,{id:"linkedin_url",type:"text",value:t.linkedin_url,onChange:r=>l("linkedin_url",r.target.value),placeholder:s("Enter Linkedin Url")}),e.jsx(n,{message:a.linkedin_url})]}),(u.visibility.includes("resume")||u.visibility.includes("cover_letter"))&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.visibility.includes("resume")&&e.jsxs("div",{children:[e.jsx(o,{htmlFor:"resume",children:s("Resume/CV")}),e.jsx(d,{id:"resume",type:"file",onChange:r=>{var i;return I(((i=r.target.files)==null?void 0:i[0])||null,"resume")}}),e.jsx(n,{message:a.resume}),t.resume&&e.jsx("div",{className:"mt-2 p-2 border rounded-lg bg-gray-50",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[k?e.jsx("img",{src:k,alt:"Resume preview",className:"h-12 w-12 object-cover rounded"}):L(t.resume.name),e.jsx("span",{className:"text-sm text-gray-700 truncate",children:t.resume.name})]})})]}),u.visibility.includes("cover_letter")&&e.jsxs("div",{children:[e.jsx(o,{htmlFor:"cover_letter",children:s("Cover Letter")}),e.jsx(d,{id:"cover_letter",type:"file",onChange:r=>{var i;return I(((i=r.target.files)==null?void 0:i[0])||null,"cover_letter")}}),e.jsx(n,{message:a.cover_letter}),t.cover_letter&&e.jsx("div",{className:"mt-2 p-2 border rounded-lg bg-gray-50",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[D?e.jsx("img",{src:D,alt:"Cover letter preview",className:"h-12 w-12 object-cover rounded"}):L(t.cover_letter.name),e.jsx("span",{className:"text-sm text-gray-700 truncate",children:t.cover_letter.name})]})})]})]}),b.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:s("Application Questions")}),b.map(r=>e.jsxs("div",{children:[e.jsxs(o,{htmlFor:`custom_question_${r.id}`,children:[r.question,r.is_required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),r.type==="text"&&e.jsx(d,{id:`custom_question_${r.id}`,type:"text",value:t[`custom_question_${r.id}`]||"",onChange:i=>l(`custom_question_${r.id}`,i.target.value),placeholder:s("Enter your answer")}),r.type==="textarea"&&e.jsx(w,{id:`custom_question_${r.id}`,value:t[`custom_question_${r.id}`]||"",onChange:i=>l(`custom_question_${r.id}`,i.target.value),placeholder:s("Enter your answer"),rows:3}),r.type==="select"&&e.jsxs(_,{value:t[`custom_question_${r.id}`]||"",onValueChange:i=>l(`custom_question_${r.id}`,i),children:[e.jsx(v,{children:e.jsx(f,{placeholder:s("Select an option")})}),e.jsx(y,{children:r.options&&JSON.parse(r.options).map((i,c)=>e.jsx(j,{value:i,children:i},c))})]}),r.type==="radio"&&e.jsx(ee,{value:t[`custom_question_${r.id}`]||"",onValueChange:i=>l(`custom_question_${r.id}`,i),children:r.options&&JSON.parse(r.options).map((i,c)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(re,{value:i,id:`custom_question_${r.id}_${c}`}),e.jsx(o,{htmlFor:`custom_question_${r.id}_${c}`,className:"text-sm",children:i})]},c))}),r.type==="checkbox"&&e.jsx("div",{className:"space-y-2",children:r.options&&JSON.parse(r.options).map((i,c)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(se,{id:`custom_question_${r.id}_${c}`,checked:(t[`custom_question_${r.id}`]||"").split(",").includes(i),onCheckedChange:m=>{const p=(t[`custom_question_${r.id}`]||"").split(",").filter(h=>h);m?l(`custom_question_${r.id}`,[...p,i].join(",")):l(`custom_question_${r.id}`,p.filter(h=>h!==i).join(","))}}),e.jsx(o,{htmlFor:`custom_question_${r.id}_${c}`,className:"text-sm",children:i})]},c))}),r.type==="date"&&e.jsx(d,{id:`custom_question_${r.id}`,type:"date",value:t[`custom_question_${r.id}`]||"",onChange:i=>l(`custom_question_${r.id}`,i.target.value)}),r.type==="number"&&e.jsx(d,{id:`custom_question_${r.id}`,type:"number",value:t[`custom_question_${r.id}`]||"",onChange:i=>l(`custom_question_${r.id}`,i.target.value),placeholder:s("Enter a number")}),e.jsx(n,{message:a[`custom_question_${r.id}`]||q[`custom_question_${r.id}`]})]},r.id))]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(A,{type:"button",variant:"outline",onClick:P,children:s("Cancel")}),e.jsx(A,{type:"submit",disabled:R,children:s(R?"Creating...":"Create")})]})]})]})}export{He as default};
